<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Capillary CS Hub</title>
  
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" crossorigin></script>
  <style>
*, *::before, *::after { box-sizing: border-box; }
body { margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8fafc; color: #1e293b; }
input, textarea, select, button { font-family: inherit; }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity:0; transform:translateY(-6px); } to { opacity:1; transform:translateY(0); } }
.sidebar { background: #0f172a; color: #e2e8f0; display: flex; flex-direction: column; height: 100vh; position: sticky; top: 0; overflow-y: auto; flex-shrink: 0; }
.sidebar::-webkit-scrollbar { width: 4px; } .sidebar::-webkit-scrollbar-track { background: transparent; } .sidebar::-webkit-scrollbar-thumb { background: #334155; border-radius: 2px; }
.nav-section { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: #475569; padding: 16px 16px 6px; }
.nav-item { display: flex; align-items: center; gap: 10px; padding: 9px 16px; cursor: pointer; border-radius: 8px; margin: 1px 8px; font-size: 13px; font-weight: 500; color: #94a3b8; transition: background 0.15s, color 0.15s; }
.nav-item:hover { background: rgba(255,255,255,0.07); color: #e2e8f0; } .nav-item.active { background: rgba(99,102,241,0.25); color: #fff; }
.cap-logo { font-size: 18px; font-weight: 800; letter-spacing: -0.5px; color: #fff; } .cap-logo-mark { width: 32px; height: 32px; border-radius: 8px; overflow: hidden; }
.card { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.07), 0 1px 2px rgba(0,0,0,0.04); border: 1px solid #f1f5f9; margin-bottom: 16px; }
.btn-primary { background: #6366f1; color: #fff; border: none; border-radius: 8px; padding: 8px 16px; font-size: 13px; font-weight: 500; cursor: pointer; transition: background 0.15s; }
.btn-primary:hover { background: #4f46e5; } .btn-secondary { background: #f1f5f9; color: #475569; border: 1px solid #e2e8f0; border-radius: 8px; padding: 8px 16px; font-size: 13px; font-weight: 500; cursor: pointer; transition: background 0.15s; }
.btn-secondary:hover { background: #e2e8f0; } .btn-danger { background: #ef4444; color: #fff; border: none; border-radius: 8px; padding: 8px 16px; font-size: 13px; font-weight: 500; cursor: pointer; transition: background 0.15s; }
.btn-danger:hover { background: #dc2626; }
.health-dot { width: 14px; height: 14px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.health-dot.editable { cursor: pointer; } .health-dot.editable:hover { opacity: 0.8; transform: scale(1.15); transition: transform 0.1s; }
.health-green { background: #22c55e; } .health-yellow { background: #eab308; } .health-red { background: #ef4444; } .health-none { background: #cbd5e1; border: 1px dashed #94a3b8; }
.rel-status-sat { background: #fef9c3; color: #854d0e; border: 1px solid #fde68a; border-radius: 6px; padding: 2px 8px; font-size: 11px; font-weight: 600; white-space: nowrap; }
.rel-status-solid { background: #dcfce7; color: #15803d; border: 1px solid #bbf7d0; border-radius: 6px; padding: 2px 8px; font-size: 11px; font-weight: 600; white-space: nowrap; }
.rel-status-vendor { background: #e0f0ff; color: #1e40af; border: 1px solid #bfdbfe; border-radius: 6px; padding: 2px 8px; font-size: 11px; font-weight: 600; white-space: nowrap; }
.rel-status-antag { background: #fee2e2; color: #b91c1c; border: 1px solid #fecaca; border-radius: 6px; padding: 2px 8px; font-size: 11px; font-weight: 600; white-space: nowrap; }
.rel-status-needs { background: #f1f5f9; color: #475569; border: 1px solid #e2e8f0; border-radius: 6px; padding: 2px 8px; font-size: 11px; font-weight: 600; white-space: nowrap; }
.pipe-capillary { background: #e0f0ff; color: #1d4ed8; border-radius: 4px; padding: 1px 7px; font-size: 10px; font-weight: 700; letter-spacing: 0.03em; }
.pipe-inspire { background: #f0fdf4; color: #15803d; border-radius: 4px; padding: 1px 7px; font-size: 10px; font-weight: 700; letter-spacing: 0.03em; }
.archived-badge { background: #f1f5f9; color: #94a3b8; border: 1px solid #e2e8f0; border-radius: 6px; padding: 2px 8px; font-size: 11px; font-weight: 600; }
.toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: #1e293b; color: #f8fafc; border-radius: 10px; padding: 12px 20px; font-size: 13px; font-weight: 500; box-shadow: 0 8px 24px rgba(0,0,0,0.25); z-index: 9999; display: flex; align-items: center; gap: 12px; animation: fadeIn 0.2s ease; }
.nps-bar { height: 8px; border-radius: 4px; background: #6366f1; transition: width 0.4s ease; } .nps-c { font-size: 11px; color: #64748b; } .nps-asc { color: #22c55e; font-size: 11px; font-weight: 600; } .nps-desc { color: #ef4444; font-size: 11px; font-weight: 600; } .nps-prior { color: #94a3b8; font-size: 11px; }
::-webkit-scrollbar { width: 6px; height: 6px; } ::-webkit-scrollbar-track { background: transparent; } ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; } ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
table { border-collapse: collapse; width: 100%; }
th { background: #f8fafc; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #64748b; padding: 10px 12px; text-align: left; border-bottom: 2px solid #e2e8f0; }
td { padding: 10px 12px; border-bottom: 1px solid #f1f5f9; font-size: 13px; vertical-align: middle; } tr:hover td { background: #f8fafc; }
.modal-overlay { position: fixed; inset: 0; background: rgba(15,23,42,0.6); z-index: 1000; display: flex; align-items: center; justify-content: center; animation: fadeIn 0.15s ease; }
.modal-box { background: #fff; border-radius: 16px; padding: 28px; max-width: 520px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.25); max-height: 85vh; overflow-y: auto; }
input[type=text], input[type=number], input[type=date], input[type=email], select, textarea { border: 1px solid #e2e8f0; border-radius: 8px; padding: 8px 12px; font-size: 13px; color: #1e293b; width: 100%; outline: none; transition: border-color 0.15s; }
input:focus, select:focus, textarea:focus { border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99,102,241,0.15); }
</style>
</head>
<body>
<div id="root">
  <div id="loading" style="display:flex;align-items:center;justify-content:center;min-height:100vh;background:#0f172a;flex-direction:column;gap:16px;">
    <div style="width:48px;height:48px;border:4px solid #334155;border-top-color:#6366f1;border-radius:50%;animation:spin 0.8s linear infinite;"></div>
    <div style="color:#94a3b8;font-size:14px;font-family:sans-serif;">Loading Capillary CS Hub…</div>
  </div>
</div>
<script>


// Watchdog: if React hasn't mounted within 20s, show a helpful error
(function() {
  var t = setTimeout(function() {
    var root = document.getElementById('root');
    var loading = document.getElementById('loading');
    if (loading && loading.style.display !== 'none') {
      loading.innerHTML = '<div style="max-width:520px;text-align:center;padding:32px 24px;">' +
        '<div style="font-size:48px;margin-bottom:16px;">⚡</div>' +
        '<div style="font-size:20px;font-weight:700;color:#1e3a5f;margin-bottom:8px;">Capillary CS Hub</div>' +
        '<div style="font-size:14px;color:#ef4444;font-weight:600;margin-bottom:12px;">⚠ Dashboard is taking longer than expected to load</div>' +
        '<div style="font-size:12px;color:#64748b;line-height:1.6;">' +
        'This usually means your browser is still downloading the libraries (React, Babel).<br>' +
        'Please check your internet connection and try refreshing the page (Ctrl+R / Cmd+R).<br><br>' +
        'If the issue persists, try opening the file in Chrome or Edge.' +
        '</div></div>';
    }
  }, 20000);
  // Cancel watchdog once root has content
  var observer = new MutationObserver(function() {
    var root = document.getElementById('root');
    if (root && root.children.length > 0) { clearTimeout(t); observer.disconnect(); }
  });
  document.addEventListener('DOMContentLoaded', function() {
    var root = document.getElementById('root');
    if (root) observer.observe(root, {childList: true});
  });
})();


</script>
<script>


window.DB_KEY_GOALS = 'capillary_crm_goals_v1';

// Store original React components
window.FarmingGoalsFeature = {
  GoalInputCell: function({client, onUpdateClient}) {
    const [editing, setEditing] = React.useState(false);
    const [val, setVal] = React.useState('');
    const goal = Number(client.arrGoal)||0;
    const save = () => { 
      onUpdateClient({...client, arrGoal: Number(val)*1000}); 
      setEditing(false); 
    };
    if(editing) return React.createElement('div', {className: 'flex items-center gap-1 justify-end'},
      React.createElement('span', {className: 'text-gray-400 text-xs'}, '$'),
      React.createElement('input', {
        type: 'number',
        autoFocus: true,
        className: 'border border-blue-300 rounded px-2 py-0.5 text-xs w-24 text-right',
        value: val,
        onChange: e => setVal(e.target.value),
        onKeyDown: e => {if(e.key==='Enter')save();if(e.key==='Escape')setEditing(false);}
      }),
      React.createElement('span', {className: 'text-xs text-gray-400'}, 'K'),
      React.createElement('button', {onClick: save, className: 'text-xs text-blue-500 font-semibold'}, 'OK'),
      React.createElement('button', {onClick: () => setEditing(false), className: 'text-xs text-gray-400'}, 'X')
    );
    return React.createElement('button', {
      onClick: () => {setVal(goal ? String(Math.round(goal/1000)) : ''); setEditing(true);},
      className: 'text-right w-full hover:text-blue-500'
    },
      goal ? React.createElement('span', {className: 'font-semibold text-gray-800'},
        goal >= 1000000 ? '$' + (goal/1000000).toFixed(1) + 'M' : '$' + (goal/1000).toFixed(0) + 'K'
      ) : React.createElement('span', {className: 'text-xs font-medium text-blue-400'}, '+ Set goal')
    );
  }
};

console.log('Farming Goals feature loaded. Use window.FarmingGoalsFeature to access components.');


</script>
<script>
var _unused = (() => {
  const { useState, useEffect, useMemo, useCallback, useRef } = React;
  const RoleCtx = React.createContext({ role: "read_only", canEdit: false, isAdmin: false });
  const useRole = () => React.useContext(RoleCtx);
  class ErrorBoundary extends React.Component {
    constructor(props) {
      super(props);
      this.state = { error: null };
    }
    static getDerivedStateFromError(e) {
      return { error: e };
    }
    componentDidCatch(e, info) {
      console.error("React error:", e, info);
    }
    render() {
      if (this.state.error) {
        return /* @__PURE__ */ React.createElement("div", { style: { padding: "30px", fontFamily: "monospace", background: "#1e1e1e", color: "#f87171", minHeight: "100vh" } }, /* @__PURE__ */ React.createElement("h2", null, "\u26A0 App crashed \u2014 please report this error"), /* @__PURE__ */ React.createElement("pre", { style: { fontSize: "13px", whiteSpace: "pre-wrap" } }, this.state.error && this.state.error.stack || String(this.state.error)));
      }
      return this.props.children;
    }
  }
  (function() {
    const now = /* @__PURE__ */ new Date();
    const names = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    const months = [];
    for (let i = 4; i >= 0; i--) {
      const d = new Date(now.getFullYear(), now.getMonth() - i, 1);
      months.push(`${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}`);
    }
    window.HEALTH_MONTHS = months;
    window.MONTH_LABELS = months.reduce((acc, k) => {
      const [y, m] = k.split("-").map(Number);
      acc[k] = `${names[m - 1]} ${String(y).slice(2)}`;
      return acc;
    }, {});
  })();
  const HEALTH_MONTHS = window.HEALTH_MONTHS;
  const MONTH_LABELS = window.MONTH_LABELS;
  const CORE_PRODUCTS = ["Loyalty+", "Engage+", "Insights+", "Rewards+", "CDP+", "Strategy", "Analytics", "Other"];
  const ENTERPRISE_ARR_THRESHOLD = 1e6;
  const LEGACY_PLATFORMS = ["inspire"];
  const WHITESPACE_HIGH_THRESHOLD = 3;
  const STATUSES = ["Lead", "Enquiry", "Discovery", "Solution Validation", "Negotiation", "Closed-Won", "Closed-Lost"];
  const REL_STATUSES = [{ value: "Client Welcomes a Saturday Text", short: "\u2B50 Saturday Text", cls: "rel-status-sat" }, { value: "Solid Positive Business Relationship", short: "\u2705 Positive", cls: "rel-status-solid" }, { value: "Strictly Business (Vendor)", short: "\u{1F91D} Vendor", cls: "rel-status-vendor" }, { value: "Antagonistic", short: "\u26A0\uFE0F Antagonistic", cls: "rel-status-antag" }, { value: "Needs Established", short: "\u{1F527} Unestablished", cls: "rel-status-needs" }];
  const DB_KEY_CLIENTS = "capillary_crm_clients_v4";
  const DB_KEY_OPPS = "capillary_crm_opps_v4";
  const DB_KEY_RELS = "capillary_crm_rels_v4";
  const DB_KEY_GOALS = "capillary_crm_goals_v1";
  const NPS_DATA = {};
  const SUPABASE_URL = "https://cngzvyrrahqgikhaykbm.supabase.co";
  const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuZ3p2eXJyYWhxZ2lraGF5a2JtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5NzcxNTMsImV4cCI6MjA4NzU1MzE1M30.0JPNge9GpeSK5Yu0Inul0GSKWskGy5vLco4v_34zQ0o";
  const sbClient = window.supabase ? window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON) : null;
  async function loadFromSupabase() {
    if (!sbClient) return null;
    const { data, error } = await sbClient.from("app_state").select("key,value");
    if (error || !data || data.length === 0) return null;
    const state = {};
    data.forEach((row) => {
      state[row.key] = row.value;
    });
    return state;
  }
  async function saveToSupabase(key, value) {
    if (!sbClient) return;
    try {
      await sbClient.from("app_state").upsert({ key, value, updated_at: (/* @__PURE__ */ new Date()).toISOString() });
    } catch (e) {
      console.error("Supabase save failed:", e);
    }
  }
  function sanitizeClient(c) {
    const num = ["arr", "aop", "forecast", "tenure", "members"];
    const out = { ...c };
    num.forEach((k) => {
      if (out[k] !== null && out[k] !== void 0 && out[k] !== "") {
        const n = Number(out[k]);
        out[k] = isNaN(n) ? null : n;
      }
    });
    if (!Array.isArray(out.products)) out.products = [];
    return out;
  }
  function sanitizeOpp(o) {
    const out = { ...o };
    if (out.value !== null && out.value !== void 0 && out.value !== "") {
      const n = Number(out.value);
      out.value = isNaN(n) ? null : n;
    }
    return out;
  }
  function loadDB() {
    try {
      const c = localStorage.getItem(DB_KEY_CLIENTS);
      const o = localStorage.getItem(DB_KEY_OPPS);
      const r = localStorage.getItem(DB_KEY_RELS);
      return {
        clients: (c ? JSON.parse(c) : []).map(sanitizeClient),
        opps: (o ? JSON.parse(o) : []).map(sanitizeOpp),
        rels: r ? JSON.parse(r) : {}
      };
    } catch {
      return { clients: [], opps: [], rels: {} };
    }
  }
  function saveDB(clients, opps, rels) {
    try {
      localStorage.setItem(DB_KEY_CLIENTS, JSON.stringify(clients));
      localStorage.setItem(DB_KEY_OPPS, JSON.stringify(opps));
      localStorage.setItem(DB_KEY_RELS, JSON.stringify(rels));
    } catch (e) {
      console.error("Save failed", e);
    }
  }
  const fmt$ = (v) => v == null ? "\u2014" : "$" + Number(v).toLocaleString("en-US", { maximumFractionDigits: 0 });
  function getCurrentHealth(client) {
    if (!client || !client.healthHistory) return null;
    for (let i = HEALTH_MONTHS.length - 1; i >= 0; i--) {
      const h = client.healthHistory[HEALTH_MONTHS[i]];
      if (h) return h;
    }
    return null;
  }
  function healthColor(h) {
    if (h === "Green") return "#22c55e";
    if (h === "Yellow") return "#eab308";
    if (h === "Red") return "#ef4444";
    return "#94a3b8";
  }
  function relStatusClass(s) {
    if (!s) return "";
    const found = REL_STATUSES.find((r) => r.value === s);
    if (found) return found.cls;
    if (s.includes("Saturday")) return "rel-status-sat";
    if (s.includes("Solid")) return "rel-status-solid";
    if (s.includes("Vendor")) return "rel-status-vendor";
    if (s.includes("Antagonistic")) return "rel-status-antag";
    if (s.includes("Needs") || s.includes("Progress") || s.includes("New Team")) return "rel-status-needs";
    return "rel-status-vendor";
  }
  function relStatusShort(s) {
    if (!s) return "\u2014";
    const found = REL_STATUSES.find((r) => r.value === s);
    if (found) return found.short;
    if (s.includes("Saturday")) return "\u2B50 Saturday Text";
    if (s.includes("Solid")) return "\u2705 Positive";
    if (s.includes("Vendor")) return "\u{1F91D} Vendor";
    if (s.includes("Antagonistic")) return "\u26A0\uFE0F Antagonistic";
    if (s.includes("Needs") || s.includes("Progress") || s.includes("New Team")) return "\u{1F527} Unestablished";
    return s;
  }
  function useSort(defaultKey = "name") {
    const [sortState, setSortState] = useState([defaultKey, "asc"]);
    const toggleSort = (key) => setSortState(([sk, dir]) => sk === key ? [key, dir === "asc" ? "desc" : "asc"] : [key, "asc"]);
    const sortClients = (list) => {
      const [key, dir] = sortState;
      const sorted = [...list].sort((a, b) => {
        let va, vb;
        if (key === "name") {
          va = a.name.toLowerCase();
          vb = b.name.toLowerCase();
        } else if (key === "arr") {
          va = a.arr || a.aop || 0;
          vb = b.arr || b.aop || 0;
        } else if (key === "aop") {
          va = a.aop || 0;
          vb = b.aop || 0;
        } else if (key === "health") {
          const order = { Green: 0, Yellow: 1, Red: 2, null: 3 };
          va = order[getCurrentHealth(a)];
          vb = order[getCurrentHealth(b)];
        } else {
          va = a[key] || "";
          vb = b[key] || "";
        }
        if (va < vb) return dir === "asc" ? -1 : 1;
        if (va > vb) return dir === "asc" ? 1 : -1;
        return 0;
      });
      return sorted;
    };
    return [sortState, toggleSort, sortClients];
  }
  function HealthDot({ health, size = 32, editable = false, onClick }) {
    const cls = health === "Green" ? "health-green" : health === "Yellow" ? "health-yellow" : health === "Red" ? "health-red" : "health-none";
    const label = health ? health[0] : "\u2014";
    return /* @__PURE__ */ React.createElement(
      "div",
      {
        className: `health-dot ${cls} ${editable ? "editable" : ""}`,
        style: { width: size, height: size, fontSize: size * 0.38, display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 700, color: "rgba(255,255,255,0.92)", lineHeight: 1, userSelect: "none" },
        onClick,
        title: health || "Not Set"
      },
      label
    );
  }
  function StatusBadge({ status }) {
    const map = {
      "Lead": "bg-slate-100 text-slate-600",
      "Enquiry": "bg-violet-50 text-violet-700",
      "Discovery": "bg-blue-50 text-blue-700",
      "Solution Validation": "bg-teal-50 text-teal-700",
      "Negotiation": "bg-orange-50 text-orange-700",
      "Closed-Won": "bg-green-50 text-green-700",
      "Closed-Lost": "bg-red-50 text-red-500"
    };
    return /* @__PURE__ */ React.createElement("span", { className: `rounded-lg px-2.5 py-1 text-xs font-semibold ${map[status] || "bg-gray-100 text-gray-500"}` }, status || "\u2014");
  }
  function PlatformBadge({ platform }) {
    return platform === "inspire" ? /* @__PURE__ */ React.createElement("span", { className: "bg-blue-100 text-blue-700 rounded-lg px-2.5 py-1 text-xs font-bold" }, "\u2726 Inspire") : /* @__PURE__ */ React.createElement("span", { className: "bg-purple-100 text-purple-700 rounded-lg px-2.5 py-1 text-xs font-bold" }, "\u25C8 Capillary");
  }
  function PipelineBadge({ pipeline }) {
    return pipeline === "inspire" ? /* @__PURE__ */ React.createElement("span", { className: "pipe-inspire" }, "Inspire") : /* @__PURE__ */ React.createElement("span", { className: "pipe-capillary" }, "Cap.");
  }
  function SortHeader({ label, sortKey, sortState, onSort, className = "" }) {
    const [currentKey, dir] = sortState;
    const active = currentKey === sortKey;
    const arrow = active ? dir === "asc" ? "\u2191" : "\u2193" : "\u2195";
    return /* @__PURE__ */ React.createElement(
      "th",
      {
        className: `sortable text-xs font-semibold text-gray-500 uppercase tracking-wide px-4 py-3 text-left ${className}`,
        onClick: () => onSort(sortKey)
      },
      label,
      " ",
      /* @__PURE__ */ React.createElement("span", { className: active ? "text-blue-500" : "text-gray-300" }, arrow)
    );
  }
  function CommentsSection({ comments = [], onAdd }) {
    const { canEdit } = useRole();
    const [text, setText] = useState("");
    const handleAdd = () => {
      if (text.trim()) {
        onAdd(text.trim());
        setText("");
      }
    };
    return /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm mb-3" }, "Activity Log"), /* @__PURE__ */ React.createElement("div", { className: "space-y-3 mb-4" }, comments.length === 0 && /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-xs text-center py-4" }, "No activity yet."), [...comments].reverse().map((c) => /* @__PURE__ */ React.createElement("div", { key: c.id, className: "flex gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "w-7 h-7 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold shrink-0" }, (c.author || "Y")[0]), /* @__PURE__ */ React.createElement("div", { className: "flex-1 bg-gray-50 rounded-xl px-3 py-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 mb-1" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-700" }, c.author || "You"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, c.date || "")), /* @__PURE__ */ React.createElement("p", { className: "text-sm text-gray-700" }, c.text))))), canEdit && /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, /* @__PURE__ */ React.createElement(
      "input",
      {
        value: text,
        onChange: (e) => setText(e.target.value),
        onKeyDown: (e) => e.key === "Enter" && !e.shiftKey && handleAdd(),
        placeholder: "Add a note\u2026",
        className: "flex-1 text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
      }
    ), /* @__PURE__ */ React.createElement("button", { onClick: handleAdd, className: "btn-primary px-4 py-2 text-xs" }, "Add")));
  }
  function RelationshipMapping({ clientName, relData, onUpdate }) {
    const { canEdit } = useRole();
    const contacts = (relData || []).map(
      (c, i) => c.id ? c : { ...c, id: `rel_${clientName.replace(/\s+/g, "_").toLowerCase()}_${i}` }
    );
    const [editing, setEditing] = useState(null);
    const [editForm, setEditForm] = useState({});
    const [showAdd, setShowAdd] = useState(false);
    const [addForm, setAddForm] = useState({ clientContact: "", clientTitle: "", clientEmail: "", healthStatus: "Needs Established", capPrimary: "", capSecondary: "", comments: "" });
    const startEdit = (c) => {
      setEditing(c.id);
      setEditForm({ ...c });
    };
    const saveEdit = () => {
      onUpdate(contacts.map((c) => c.id === editing ? editForm : c));
      setEditing(null);
    };
    const deleteContact = (id) => {
      onUpdate(contacts.filter((c) => c.id !== id));
    };
    const addContact = () => {
      const newC = { ...addForm, id: "rel_" + Date.now() };
      onUpdate([...contacts, newC]);
      setAddForm({ clientContact: "", clientTitle: "", clientEmail: "", healthStatus: "Needs Established", capPrimary: "", capSecondary: "", comments: "" });
      setShowAdd(false);
    };
    const inp = (obj, setObj, key, placeholder, type = "text") => /* @__PURE__ */ React.createElement(
      "input",
      {
        type,
        value: obj[key] || "",
        onChange: (e) => setObj({ ...obj, [key]: e.target.value }),
        placeholder,
        className: "text-xs border border-gray-200 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-1 focus:ring-blue-400"
      }
    );
    const normalizeStatus = (v) => {
      if (!v) return "";
      const exact = REL_STATUSES.find((r) => r.value === v);
      if (exact) return v;
      if (v.includes("Saturday")) return "Client Welcomes a Saturday Text";
      if (v.includes("Solid")) return "Solid Positive Business Relationship";
      if (v.includes("Vendor")) return "Strictly Business (Vendor)";
      if (v.includes("Antagonistic")) return "Antagonistic";
      if (v.includes("Needs") || v.includes("Progress") || v.includes("Building")) return "Needs Established";
      return "";
    };
    const sel = (obj, setObj, key) => /* @__PURE__ */ React.createElement(
      "select",
      {
        value: normalizeStatus(obj[key]) || "",
        onChange: (e) => setObj({ ...obj, [key]: e.target.value }),
        className: "text-xs border border-gray-200 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-1 focus:ring-blue-400"
      },
      /* @__PURE__ */ React.createElement("option", { value: "" }, "\u2014 Select status \u2014"),
      REL_STATUSES.map((r) => /* @__PURE__ */ React.createElement("option", { key: r.value, value: r.value }, r.value))
    );
    return /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-4" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700" }, "Relationship Mapping (", contacts.length, ")"), canEdit && /* @__PURE__ */ React.createElement("button", { onClick: () => setShowAdd(!showAdd), className: "btn-primary px-3 py-1.5 text-xs" }, "+ Add Contact")), showAdd && /* @__PURE__ */ React.createElement("div", { className: "mb-4 p-4 bg-blue-50 border border-blue-100 rounded-xl" }, /* @__PURE__ */ React.createElement("div", { className: "font-semibold text-xs text-blue-700 mb-3 uppercase tracking-wide" }, "New Contact"), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-3 mb-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Client Name"), inp(addForm, setAddForm, "clientContact", "Name")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Title / Role"), inp(addForm, setAddForm, "clientTitle", "Title")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Email"), inp(addForm, setAddForm, "clientEmail", "email@company.com", "email"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-3 mb-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Relationship Status"), sel(addForm, setAddForm, "healthStatus")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Capillary Primary"), inp(addForm, setAddForm, "capPrimary", "Primary contact")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Capillary Secondary"), inp(addForm, setAddForm, "capSecondary", "Secondary contact"))), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Notes"), inp(addForm, setAddForm, "comments", "Notes / context")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, /* @__PURE__ */ React.createElement("button", { onClick: addContact, className: "btn-primary text-xs px-4 py-1.5" }, "Save Contact"), /* @__PURE__ */ React.createElement("button", { onClick: () => setShowAdd(false), className: "btn-secondary text-xs px-4 py-1.5" }, "Cancel"))), contacts.length === 0 && !showAdd ? /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm text-center py-8" }, 'No relationship contacts yet. Click "+ Add Contact" to begin.') : /* @__PURE__ */ React.createElement("div", { className: "overflow-x-auto" }, /* @__PURE__ */ React.createElement("table", { className: "w-full text-xs" }, /* @__PURE__ */ React.createElement("thead", null, /* @__PURE__ */ React.createElement("tr", { className: "border-b border-gray-100" }, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-40" }, "Client Contact"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-36" }, "Title / Role"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-40" }, "Email"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-36" }, "Rel. Status"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-32" }, "Cap. Primary"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-32" }, "Cap. Secondary"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500" }, "Notes"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-3 font-semibold text-gray-500 w-20" }, "Actions"))), /* @__PURE__ */ React.createElement("tbody", null, contacts.map((c) => editing === c.id ? /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "bg-blue-50" }, /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, inp(editForm, setEditForm, "clientContact", "Name")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, inp(editForm, setEditForm, "clientTitle", "Title")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, inp(editForm, setEditForm, "clientEmail", "email", "email")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, sel(editForm, setEditForm, "healthStatus")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, inp(editForm, setEditForm, "capPrimary", "Primary")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, inp(editForm, setEditForm, "capSecondary", "Secondary")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, inp(editForm, setEditForm, "comments", "Notes")), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex gap-1" }, /* @__PURE__ */ React.createElement("button", { onClick: saveEdit, className: "text-blue-600 hover:text-blue-800 font-semibold" }, "\u2713"), /* @__PURE__ */ React.createElement("button", { onClick: () => setEditing(null), className: "text-gray-400 hover:text-gray-600 ml-1" }, "\u2715")))) : /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "border-b border-gray-50 hover:bg-gray-50" }, /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5 font-medium text-gray-800" }, c.clientContact || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5 text-gray-600" }, c.clientTitle || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5 text-gray-500" }, c.clientEmail ? /* @__PURE__ */ React.createElement("a", { href: "mailto:" + c.clientEmail, className: "text-blue-600 hover:underline" }, c.clientEmail) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5" }, /* @__PURE__ */ React.createElement("span", { className: `rel-badge ${relStatusClass(c.healthStatus)}` }, relStatusShort(c.healthStatus))), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5 text-gray-700 font-medium" }, c.capPrimary || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5 text-gray-600" }, c.capSecondary || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5 text-gray-500 max-w-xs truncate", title: c.comments }, c.comments || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-3 py-2.5" }, /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, canEdit && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("button", { onClick: () => startEdit(c), className: "text-gray-400 hover:text-blue-600 transition-colors", title: "Edit" }, "\u270F\uFE0F"), /* @__PURE__ */ React.createElement("button", { onClick: () => deleteContact(c.id), className: "text-gray-300 hover:text-red-500 transition-colors", title: "Delete" }, "\u{1F5D1}"))))))))));
  }
  function daysUntil(dateStr) {
    if (!dateStr) return null;
    const d = new Date(dateStr);
    if (isNaN(d.getTime())) return null;
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    return Math.ceil((d - today) / 864e5);
  }
  function renewalUrgency(dateStr) {
    const days = daysUntil(dateStr);
    if (days === null) return "none";
    if (days < 0) return "overdue";
    if (days <= 90) return "critical";
    if (days <= 180) return "upcoming";
    return "ok";
  }
  function maxConsecutiveRed(client) {
    let max = 0, cur = 0;
    for (const m of HEALTH_MONTHS) {
      if ((client.healthHistory || {})[m] === "Red") {
        cur++;
        max = Math.max(max, cur);
      } else cur = 0;
    }
    return max;
  }
  function isAtRisk(client) {
    const health = getCurrentHealth(client);
    const consec = maxConsecutiveRed(client);
    const days = daysUntil(client.nextRenewal);
    if (consec >= 2) return { reason: "Chronic Red Health", type: "chronic" };
    if (days !== null && days <= 90 && (health === "Red" || health === "Yellow"))
      return { reason: days < 0 ? "Renewal Overdue" : `Renewal in ${days}d`, type: days < 0 ? "overdue" : "renewal" };
    return null;
  }
  function RiskSnapshot({ clients, onSelectClient, onGoToRenewals }) {
    const [expanded, setExpanded] = React.useState(null);
    const toggle = (bucket) => setExpanded((prev) => prev === bucket ? null : bucket);
    const redClients = clients.filter((c) => getCurrentHealth(c) === "Red");
    const yellowClients = clients.filter((c) => getCurrentHealth(c) === "Yellow");
    const redARR = redClients.reduce((a, c) => a + (Number(c.arr) || Number(c.aop) || 0), 0);
    const yellowARR = yellowClients.reduce((a, c) => a + (Number(c.arr) || Number(c.aop) || 0), 0);
    const atRiskList = clients.map((c) => ({ c, risk: isAtRisk(c), arr: Number(c.arr) || Number(c.aop) || 0, health: getCurrentHealth(c) })).filter((x) => x.risk).sort((a, b) => {
      var _a, _b;
      const hOrder = { "Red": 0, "Yellow": 1, "Green": 2 };
      const hDiff = ((_a = hOrder[a.health]) != null ? _a : 9) - ((_b = hOrder[b.health]) != null ? _b : 9);
      if (hDiff !== 0) return hDiff;
      return b.arr - a.arr;
    }).slice(0, 8);
    const overdueCount = clients.filter((c) => renewalUrgency(c.nextRenewal) === "overdue").length;
    const criticalCount = clients.filter((c) => renewalUrgency(c.nextRenewal) === "critical").length;
    const ClientDropdown = ({ list, colorClass }) => /* @__PURE__ */ React.createElement("div", { className: "mt-3 pt-3 border-t border-white/60 space-y-1 max-h-56 overflow-y-auto" }, list.map((c) => /* @__PURE__ */ React.createElement(
      "div",
      {
        key: c.id,
        className: "flex items-center gap-2.5 px-2 py-1.5 rounded-lg bg-white/70 hover:bg-white cursor-pointer transition-colors",
        onClick: (e) => {
          e.stopPropagation();
          onSelectClient(c.id);
        }
      },
      /* @__PURE__ */ React.createElement(HealthDot, { health: getCurrentHealth(c), size: 16 }),
      /* @__PURE__ */ React.createElement("span", { className: "font-medium text-gray-800 text-xs flex-1 truncate" }, c.name),
      (c.arr || c.aop) && /* @__PURE__ */ React.createElement("span", { className: `text-xs font-semibold shrink-0 ${colorClass}` }, fmt$(c.arr || c.aop)),
      /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 text-xs shrink-0" }, c.execSponsor || ""),
      /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 text-xs shrink-0" }, "\u2192")
    )));
    return /* @__PURE__ */ React.createElement("div", { className: "space-y-4" }, /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mb-4" }, /* @__PURE__ */ React.createElement("span", { className: "text-lg" }, "\u{1F6A8}"), /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-800" }, "Revenue at Risk"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 ml-1" }, "based on current health \xB7 click a card to expand")), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-4 items-start" }, /* @__PURE__ */ React.createElement(
      "div",
      {
        onClick: () => toggle("red"),
        className: `rounded-xl p-4 border-l-4 border-red-500 bg-red-50 cursor-pointer transition-all hover:shadow-md select-none ${expanded === "red" ? "ring-2 ring-red-200" : ""}`
      },
      /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-1" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-red-600" }, "\u{1F534} Confirmed At Risk"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-red-400 font-bold" }, expanded === "red" ? "\u25B2" : "\u25BC")),
      /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-red-700" }, fmt$(redARR)),
      /* @__PURE__ */ React.createElement("div", { className: "text-xs text-red-500 mt-1" }, redClients.length, " client", redClients.length !== 1 ? "s" : "", " in Red health"),
      expanded === "red" && /* @__PURE__ */ React.createElement(ClientDropdown, { list: redClients, colorClass: "text-red-600" })
    ), /* @__PURE__ */ React.createElement(
      "div",
      {
        onClick: () => toggle("yellow"),
        className: `rounded-xl p-4 border-l-4 border-yellow-400 bg-yellow-50 cursor-pointer transition-all hover:shadow-md select-none ${expanded === "yellow" ? "ring-2 ring-yellow-200" : ""}`
      },
      /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-1" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-yellow-700" }, "\u{1F7E1} Watch List"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-yellow-500 font-bold" }, expanded === "yellow" ? "\u25B2" : "\u25BC")),
      /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-yellow-700" }, fmt$(yellowARR)),
      /* @__PURE__ */ React.createElement("div", { className: "text-xs text-yellow-600 mt-1" }, yellowClients.length, " client", yellowClients.length !== 1 ? "s" : "", " in Yellow health"),
      expanded === "yellow" && /* @__PURE__ */ React.createElement(ClientDropdown, { list: yellowClients, colorClass: "text-yellow-700" })
    ), /* @__PURE__ */ React.createElement(
      "div",
      {
        onClick: onGoToRenewals,
        className: "rounded-xl p-4 border-l-4 border-orange-400 bg-orange-50 cursor-pointer transition-all hover:shadow-md select-none group"
      },
      /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-1" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-orange-700" }, "\u{1F4C5} Renewal Exposure"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-orange-400 font-bold group-hover:translate-x-0.5 transition-transform" }, "\u2192")),
      /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-orange-700" }, overdueCount + criticalCount),
      /* @__PURE__ */ React.createElement("div", { className: "text-xs text-orange-600 mt-1" }, overdueCount, " overdue \xB7 ", criticalCount, " within 90 days"),
      /* @__PURE__ */ React.createElement("div", { className: "text-xs text-orange-400 mt-2 font-semibold" }, "View Renewal Timeline \u2192")
    ))), atRiskList.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-lg" }, "\u26A0\uFE0F"), /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-800" }, "At-Risk Alerts")), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, atRiskList.length, " client", atRiskList.length !== 1 ? "s" : "", " flagged")), /* @__PURE__ */ React.createElement("div", { className: "space-y-2" }, atRiskList.map(({ c, risk }) => {
      const health = getCurrentHealth(c);
      const bad = risk.type === "chronic" || risk.type === "overdue";
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          key: c.id,
          className: `flex items-center gap-3 p-3 rounded-xl cursor-pointer hover:opacity-80 transition-opacity border ${bad ? "bg-red-50 border-red-100" : "bg-orange-50 border-orange-100"}`,
          onClick: () => onSelectClient(c.id)
        },
        /* @__PURE__ */ React.createElement(HealthDot, { health, size: 20 }),
        /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "font-semibold text-gray-800 text-sm" }, c.name), /* @__PURE__ */ React.createElement("div", { className: `text-xs mt-0.5 ${bad ? "text-red-600" : "text-orange-600"}` }, risk.reason)),
        /* @__PURE__ */ React.createElement("div", { className: "text-right shrink-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-700" }, c.arr || c.aop ? fmt$(c.arr || c.aop) : ""), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, c.execSponsor || "")),
        /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 text-xs" }, "\u2192")
      );
    }))));
  }
  function HomeView({ clients, opps, onSelectClient, platformFilter, onSetPlatformFilter, onGoToRenewals, teamGoals, onGoToGoals, onGoToWhitespace }) {
    const activeClients = clients.filter((c) => !c.archived);
    const filtered = activeClients.filter((c) => platformFilter === "all" || c.platform === platformFilter);
    const insClients = activeClients.filter((c) => c.platform === "inspire");
    const capClients = activeClients.filter((c) => c.platform === "capillary");
    const filtARR = filtered.reduce((a, c) => a + (Number(c.arr) || 0), 0);
    const filtAOP = filtered.reduce((a, c) => a + (Number(c.aop) || 0), 0);
    const filtWon = opps.filter((o) => {
      if (o.status !== "Closed-Won") return false;
      if (platformFilter === "all") return true;
      return platformFilter === "inspire" ? o.pipeline === "inspire" : o.pipeline !== "inspire";
    }).reduce((a, o) => a + (o.value || 0), 0);
    const totalARR = insClients.reduce((a, c) => a + (Number(c.arr) || 0), 0);
    const totalAOP = capClients.reduce((a, c) => a + (Number(c.aop) || 0), 0);
    const greenCount = filtered.filter((c) => getCurrentHealth(c) === "Green").length;
    const yellowCount = filtered.filter((c) => getCurrentHealth(c) === "Yellow").length;
    const redCount = filtered.filter((c) => getCurrentHealth(c) === "Red").length;
    const noCount = filtered.filter((c) => !getCurrentHealth(c)).length;
    const activeOpps = opps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status));
    const insOpps = opps.filter((o) => o.pipeline === "inspire");
    const capOpps = opps.filter((o) => o.pipeline !== "inspire");
    const insVal = insOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).reduce((a, o) => a + (o.value || 0), 0);
    const capVal = capOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).reduce((a, o) => a + (o.value || 0), 0);
    const byStatus = STATUSES.reduce((acc, s) => {
      acc[s] = opps.filter((o) => o.status === s).length;
      return acc;
    }, {});
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-2xl font-bold text-gray-900" }, "Overview ", /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 text-base font-normal" }, "FY26")), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "Americas \xB7 ", activeClients.length, " active clients")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, ["all", "inspire", "capillary"].map((p) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: p,
        onClick: () => onSetPlatformFilter(p),
        className: `px-4 py-2 rounded-xl text-sm font-semibold transition-all ${platformFilter === p ? "bg-blue-500 text-white" : "bg-white text-gray-600 hover:bg-gray-50 shadow-sm border border-gray-100"}`
      },
      p === "all" ? "All" : p === "inspire" ? "\u2726 Inspire" : "\u25C8 Capillary"
    )))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-4 gap-4" }, /* @__PURE__ */ React.createElement("div", { className: "card text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-gray-900" }, filtered.length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-1" }, platformFilter === "all" ? "Active Clients" : platformFilter === "inspire" ? "\u2726 Inspire Clients" : "\u25C8 Capillary Clients")), /* @__PURE__ */ React.createElement("div", { className: "card text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold", style: { color: "#2080BD" } }, fmt$(filtARR)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-1" }, platformFilter === "all" ? "Total ARR" : platformFilter === "inspire" ? "Inspire ARR" : "Capillary ARR")), /* @__PURE__ */ React.createElement("div", { className: "card text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-purple-700" }, fmt$(filtAOP)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-1" }, platformFilter === "all" ? "Total AOP" : platformFilter === "inspire" ? "Inspire AOP" : "Capillary AOP")), /* @__PURE__ */ React.createElement("div", { className: "card text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-green-600" }, fmt$(filtWon)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-1" }, platformFilter === "all" ? "Pipeline Won FY26" : platformFilter === "inspire" ? "Inspire Won FY26" : "Capillary Won FY26"))), (() => {
      const activeC = clients.filter((c) => !c.archived);
      const cliARR = (c) => Number(c.platform === "inspire" ? c.arr : c.aop) || 0;
      const totalARR2 = activeC.reduce((a, c) => a + cliARR(c), 0);
      const coreARR = activeC.filter((c) => !LEGACY_PLATFORMS.includes(c.platform)).reduce((a, c) => a + cliARR(c), 0);
      const legacyARR = activeC.filter((c) => LEGACY_PLATFORMS.includes(c.platform)).reduce((a, c) => a + cliARR(c), 0);
      const corePct = totalARR2 > 0 ? Math.round(coreARR / totalARR2 * 100) : 0;
      const legacyPct = totalARR2 > 0 ? Math.round(legacyARR / totalARR2 * 100) : 0;
      const entClients = activeC.filter((c) => !LEGACY_PLATFORMS.includes(c.platform) && cliARR(c) >= ENTERPRISE_ARR_THRESHOLD);
      const avgProds = entClients.length > 0 ? (entClients.reduce((a, c) => a + (c.products || []).length, 0) / entClients.length).toFixed(1) : "\u2014";
      const migCands = activeC.filter((c) => {
        if (!LEGACY_PLATFORMS.includes(c.platform)) return false;
        if (!c.nextRenewal) return true;
        const d = new Date(c.nextRenewal);
        if (isNaN(d)) return true;
        return (d - Date.now()) / 864e5 <= 548;
      }).length;
      const highWS = activeC.filter((c) => !LEGACY_PLATFORMS.includes(c.platform) && CORE_PRODUCTS.length - (c.products || []).length >= WHITESPACE_HIGH_THRESHOLD).length;
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          className: "card cursor-pointer hover:shadow-md transition-shadow border border-gray-100",
          onClick: onGoToWhitespace,
          style: { borderLeft: "3px solid #2080BD" }
        },
        /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-3" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Platform Penetration & Expansion Opportunities"), /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold", style: { color: "#2080BD" } }, "View Details \u2192")),
        /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-5 gap-4" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold", style: { color: "#16a34a" } }, corePct, "%"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Core SaaS ARR")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold", style: { color: "#dc2626" } }, legacyPct, "%"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Legacy ARR")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-gray-800" }, avgProds), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Avg P&S / Ent.")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-amber-600" }, migCands), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Migration Candidates")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-purple-600" }, highWS), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "High Expansion Accts")))
      );
    })(), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-800 mb-4" }, "Pipeline Summary \u2014 FY26"), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-4 mb-4" }, /* @__PURE__ */ React.createElement("div", { className: "bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-600 font-semibold mb-1" }, "Total Active Pipeline"), /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-blue-700" }, fmt$(insVal + capVal)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-500 mt-1" }, activeOpps.length, " opportunities")), /* @__PURE__ */ React.createElement("div", { className: "bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-600 font-semibold mb-1" }, "\u2726 Inspire Pipeline"), /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-blue-700" }, fmt$(insVal)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-500 mt-1" }, insOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).length, " opportunities")), /* @__PURE__ */ React.createElement("div", { className: "bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-purple-600 font-semibold mb-1" }, "\u25C8 Capillary Pipeline"), /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-purple-700" }, fmt$(capVal)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-purple-500 mt-1" }, capOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).length, " opportunities"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-7 gap-2" }, STATUSES.map((s) => /* @__PURE__ */ React.createElement("div", { key: s, className: "text-center p-2 rounded-lg bg-gray-50" }, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-gray-800" }, byStatus[s] || 0), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, s.replace("Closed-", "")))))), /* @__PURE__ */ React.createElement(RiskSnapshot, { clients: filtered, onSelectClient, onGoToRenewals }), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-3" }, /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-800 text-sm" }, "Client Health Summary"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, filtered.length, " active clients")), (() => {
      const total = greenCount + yellowCount + redCount + noCount || 1;
      return /* @__PURE__ */ React.createElement("div", { className: "h-3 rounded-full overflow-hidden flex mb-3", style: { background: "#f1f5f9" } }, greenCount > 0 && /* @__PURE__ */ React.createElement("div", { style: { width: greenCount / total * 100 + "%", background: "#22c55e" } }), yellowCount > 0 && /* @__PURE__ */ React.createElement("div", { style: { width: yellowCount / total * 100 + "%", background: "#eab308" } }), redCount > 0 && /* @__PURE__ */ React.createElement("div", { style: { width: redCount / total * 100 + "%", background: "#ef4444" } }), noCount > 0 && /* @__PURE__ */ React.createElement("div", { style: { width: noCount / total * 100 + "%", background: "#e2e8f0" } }));
    })(), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-4 gap-3" }, [
      { label: "Green", count: greenCount, pct: filtered.length ? Math.round(greenCount / filtered.length * 100) : 0, dot: "bg-green-500", txt: "text-green-700", bg: "bg-green-50" },
      { label: "Yellow", count: yellowCount, pct: filtered.length ? Math.round(yellowCount / filtered.length * 100) : 0, dot: "bg-yellow-400", txt: "text-yellow-700", bg: "bg-yellow-50" },
      { label: "Red", count: redCount, pct: filtered.length ? Math.round(redCount / filtered.length * 100) : 0, dot: "bg-red-500", txt: "text-red-700", bg: "bg-red-50" },
      { label: "No Data", count: noCount, pct: filtered.length ? Math.round(noCount / filtered.length * 100) : 0, dot: "bg-gray-300", txt: "text-gray-500", bg: "bg-gray-50" }
    ].map(({ label, count, pct, dot, txt, bg }) => /* @__PURE__ */ React.createElement("div", { key: label, className: `rounded-xl p-3 ${bg} text-center` }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-center gap-1.5 mb-1" }, /* @__PURE__ */ React.createElement("span", { className: `w-2.5 h-2.5 rounded-full inline-block ${dot}` }), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-500 font-medium" }, label)), /* @__PURE__ */ React.createElement("div", { className: `text-2xl font-bold ${txt}` }, count), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, pct, "%"))))));
  }
  function RenewalsView({ clients, onSelectClient }) {
    const [urgFilter, setUrgFilter] = React.useState("all");
    const active = clients.filter((c) => !c.archived);
    const withDates = active.filter((c) => c.nextRenewal).map((c) => ({ ...c, _days: daysUntil(c.nextRenewal), _urg: renewalUrgency(c.nextRenewal) })).sort((a, b) => {
      var _a, _b;
      return ((_a = a._days) != null ? _a : 9999) - ((_b = b._days) != null ? _b : 9999);
    });
    const noDates = active.filter((c) => !c.nextRenewal);
    const urgConfig = {
      overdue: { label: "Overdue", bg: "bg-red-100", text: "text-red-700", dot: "bg-red-500" },
      critical: { label: "< 90 days", bg: "bg-orange-100", text: "text-orange-700", dot: "bg-orange-400" },
      upcoming: { label: "90\u2013180 days", bg: "bg-yellow-100", text: "text-yellow-700", dot: "bg-yellow-400" },
      ok: { label: "180+ days", bg: "bg-green-100", text: "text-green-700", dot: "bg-green-500" },
      none: { label: "No date", bg: "bg-gray-100", text: "text-gray-500", dot: "bg-gray-300" }
    };
    const counts = {
      overdue: withDates.filter((c) => c._urg === "overdue").length,
      critical: withDates.filter((c) => c._urg === "critical").length,
      upcoming: withDates.filter((c) => c._urg === "upcoming").length,
      ok: withDates.filter((c) => c._urg === "ok").length
    };
    const overdueARR = withDates.filter((c) => c._urg === "overdue").reduce((a, c) => a + (Number(c.arr) || Number(c.aop) || 0), 0);
    const criticalARR = withDates.filter((c) => c._urg === "critical").reduce((a, c) => a + (Number(c.arr) || Number(c.aop) || 0), 0);
    const filtered = urgFilter === "all" ? withDates : withDates.filter((c) => c._urg === urgFilter);
    const showNoDates = urgFilter === "all";
    const UrgBadge = ({ urg }) => {
      const cfg = urgConfig[urg] || urgConfig.none;
      return /* @__PURE__ */ React.createElement("span", { className: `rel-badge ${cfg.bg} ${cfg.text}` }, cfg.label);
    };
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-2xl font-bold text-gray-900" }, "Renewal Timeline"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, active.length, " active clients \xB7 ", withDates.length, " with renewal dates")), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-4 gap-4" }, /* @__PURE__ */ React.createElement("div", { className: "card text-center border-l-4 border-red-500" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-red-600" }, counts.overdue), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Overdue"), overdueARR > 0 && /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-red-500 mt-1" }, fmt$(overdueARR), " ARR")), /* @__PURE__ */ React.createElement("div", { className: "card text-center border-l-4 border-orange-400" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-orange-600" }, counts.critical), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Within 90 days"), criticalARR > 0 && /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-orange-500 mt-1" }, fmt$(criticalARR), " ARR")), /* @__PURE__ */ React.createElement("div", { className: "card text-center border-l-4 border-yellow-400" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-yellow-600" }, counts.upcoming), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "90\u2013180 days")), /* @__PURE__ */ React.createElement("div", { className: "card text-center border-l-4 border-green-500" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-green-600" }, counts.ok), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "180+ days out"))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 flex-wrap" }, ["all", "overdue", "critical", "upcoming", "ok"].map((u) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: u,
        onClick: () => setUrgFilter(u),
        className: `px-4 py-1.5 rounded-xl text-xs font-semibold transition-all ${urgFilter === u ? "bg-blue-500 text-white" : "bg-white text-gray-600 shadow-sm border border-gray-100 hover:bg-gray-50"}`
      },
      u === "all" ? `All (${withDates.length})` : u === "overdue" ? `Overdue (${counts.overdue})` : u === "critical" ? `< 90d (${counts.critical})` : u === "upcoming" ? `90\u2013180d (${counts.upcoming})` : `180d+ (${counts.ok})`
    ))), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "overflow-x-auto" }, /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "Platform"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "ARR"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "Exec Sponsor"), /* @__PURE__ */ React.createElement("th", { className: "text-center py-3 px-4 font-semibold text-gray-500 text-xs" }, "Health"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "Renewal Date"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "Days Until"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 font-semibold text-gray-500 text-xs" }, "Status"))), /* @__PURE__ */ React.createElement("tbody", null, filtered.map((c) => {
      const cfg = urgConfig[c._urg] || urgConfig.none;
      const rowBg = c._urg === "overdue" ? "bg-red-50" : c._urg === "critical" ? "bg-orange-50" : "";
      return /* @__PURE__ */ React.createElement("tr", { key: c.id, className: `border-b border-gray-50 hover:bg-blue-50 cursor-pointer transition-colors ${rowBg}`, onClick: () => onSelectClient(c.id) }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 font-semibold text-gray-800" }, c.name), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement(PlatformBadge, { platform: c.platform })), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 font-semibold text-gray-700" }, c.arr || c.aop ? fmt$(c.arr || c.aop) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-500" }, c.execSponsor || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-center" }, /* @__PURE__ */ React.createElement(HealthDot, { health: getCurrentHealth(c), size: 22 }))), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-600" }, c.nextRenewal || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: `py-3 px-4 font-bold ${c._urg === "overdue" ? "text-red-600" : c._urg === "critical" ? "text-orange-600" : c._urg === "upcoming" ? "text-yellow-600" : "text-green-600"}` }, c._days === null ? "\u2014" : c._days < 0 ? `${Math.abs(c._days)}d overdue` : `${c._days}d`), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement(UrgBadge, { urg: c._urg })));
    }), showNoDates && noDates.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("td", { colSpan: 8, className: "py-2 px-4 text-xs text-gray-400 font-semibold uppercase tracking-wide bg-gray-50" }, "No Renewal Date Set (", noDates.length, ")")), noDates.map((c) => /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer opacity-60", onClick: () => onSelectClient(c.id) }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 font-semibold text-gray-800" }, c.name), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement(PlatformBadge, { platform: c.platform })), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 font-semibold text-gray-700" }, c.arr || c.aop ? fmt$(c.arr || c.aop) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-500" }, c.execSponsor || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-center" }, /* @__PURE__ */ React.createElement(HealthDot, { health: getCurrentHealth(c), size: 22 }))), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-400" }, "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-400" }, "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement("span", { className: "rel-badge bg-gray-100 text-gray-400" }, "No date"))))))))));
  }
  function ClientsView({ clients, opps, onSelectClient, platformFilter, onSetPlatformFilter }) {
    const [sortState, toggleSort, sortClients] = useSort("name");
    const activeClients = clients.filter((c) => !c.archived);
    const filtered = sortClients(activeClients.filter((c) => platformFilter === "all" || c.platform === platformFilter));
    const QTRS_ORD = ["JFM '26", "OND '25", "JAS '25", "AMJ '25", "JFM '25", "OND '24", "JAS '24", "AMJ '24", "JFM '24", "OND '23", "JAS '23", "AMJ '23"];
    const getLatestNPS = (c) => {
      var _a, _b, _c, _d;
      const key = Object.keys(NPS_DATA).find((k) => k === c.name || k.toLowerCase() === c.name.toLowerCase() || c.name.toLowerCase().includes(k.toLowerCase()) || k.toLowerCase().includes(c.name.toLowerCase()));
      if (key && NPS_DATA[key].currentNPS != null) return NPS_DATA[key].currentNPS;
      if ((_a = c.npsHistory) == null ? void 0 : _a.length) {
        const s = [...c.npsHistory].sort((a, b) => QTRS_ORD.indexOf(a.quarter) - QTRS_ORD.indexOf(b.quarter));
        return (_c = (_b = s[0]) == null ? void 0 : _b.nps) != null ? _c : null;
      }
      return (_d = c.nps) != null ? _d : null;
    };
    return /* @__PURE__ */ React.createElement("div", { className: "p-6" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-5" }, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "Clients"), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, ["all", "inspire", "capillary"].map((p) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: p,
        onClick: () => onSetPlatformFilter(p),
        className: `px-3 py-1.5 rounded-xl text-xs font-semibold transition-all ${platformFilter === p ? "bg-blue-500 text-white" : "bg-white text-gray-600 shadow-sm border border-gray-100"}`
      },
      p === "all" ? "All" : p === "inspire" ? "\u2726 Inspire" : "\u25C8 Capillary"
    )))), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement(SortHeader, { label: "Client", sortKey: "name", sortState, onSort: toggleSort }), /* @__PURE__ */ React.createElement("th", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide px-4 py-3 text-left" }, "Platform"), /* @__PURE__ */ React.createElement(SortHeader, { label: "ARR", sortKey: "arr", sortState, onSort: toggleSort }), /* @__PURE__ */ React.createElement(SortHeader, { label: "Health", sortKey: "health", sortState, onSort: toggleSort }), HEALTH_MONTHS.map((m) => /* @__PURE__ */ React.createElement("th", { key: m, className: "text-xs font-semibold text-gray-500 uppercase px-3 py-3 text-center" }, MONTH_LABELS[m])), /* @__PURE__ */ React.createElement("th", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide px-4 py-3 text-left" }, "Acct Lead"), /* @__PURE__ */ React.createElement("th", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide px-4 py-3 text-left" }, "NPS"), /* @__PURE__ */ React.createElement("th", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide px-4 py-3 text-left" }, "Opps"))), /* @__PURE__ */ React.createElement("tbody", null, filtered.map((c) => {
      const h = getCurrentHealth(c);
      const clientOpps = opps.filter((o) => o.clientId === c.id && !["Closed-Won", "Closed-Lost"].includes(o.status));
      return /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer transition-colors", onClick: () => onSelectClient(c.id) }, /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3 font-semibold text-gray-800" }, c.name), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3" }, /* @__PURE__ */ React.createElement(PlatformBadge, { platform: c.platform })), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3 font-semibold text-gray-700" }, c.platform === "inspire" ? fmt$(c.arr) : fmt$(c.aop)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3" }, /* @__PURE__ */ React.createElement(HealthDot, { health: h, size: 24 })), HEALTH_MONTHS.map((m) => {
        var _a;
        return /* @__PURE__ */ React.createElement("td", { key: m, className: "px-3 py-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-center" }, /* @__PURE__ */ React.createElement(HealthDot, { health: ((_a = c.healthHistory) == null ? void 0 : _a[m]) || null, size: 20 })));
      }), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3 text-gray-500 text-xs" }, c.execSponsor || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3" }, (() => {
        const n = getLatestNPS(c);
        return n != null ? /* @__PURE__ */ React.createElement("span", { className: `font-bold text-sm ${n >= 50 ? "text-green-600" : n >= 0 ? "text-yellow-600" : "text-red-600"}` }, n) : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\u2014");
      })()), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-3 text-gray-600 text-xs" }, clientOpps.length));
    })))));
  }
  function MEDDICCPanel({ client, onUpdateClient }) {
    const FIELDS = [
      { key: "metrics", label: "Value Drivers", icon: "\u{1F4CA}", desc: "What KPIs and business outcomes does this account use to measure success with Capillary?" },
      { key: "economicBuyer", label: "Key Stakeholders", icon: "\u{1F4BC}", desc: "Who holds budget authority and final decision-making power for Capillary investments at this account?" },
      { key: "decisionCriteria", label: "Strategic Priorities", icon: "\u{1F4CB}", desc: "What are this account's overarching criteria for evaluating and renewing vendor relationships?" },
      { key: "decisionProcess", label: "Buying Process", icon: "\u{1F5FA}\uFE0F", desc: "How does this organization evaluate, approve, and sign off on technology renewals and expansions?" },
      { key: "identifyPain", label: "Business Challenges", icon: "\u{1F3AF}", desc: "What are the core business pressures and challenges driving this account's strategic priorities?" },
      { key: "champion", label: "Internal Champions", icon: "\u{1F3C6}", desc: "Who are your advocates within this account \u2014 people with influence who will go to bat for Capillary?" },
      { key: "competition", label: "Competitive Landscape", icon: "\u2694\uFE0F", desc: "What other platforms or vendors are present, in evaluation, or have history with this account?" }
    ];
    const [fields, setFields] = React.useState(client.meddicc || {});
    React.useEffect(() => {
      setFields(client.meddicc || {});
    }, [client.id]);
    const filledCount = FIELDS.filter((f) => fields[f.key] && fields[f.key].trim()).length;
    const handleBlur = (key, val) => {
      const updated = { ...client.meddicc || {}, [key]: val };
      onUpdateClient({ ...client, meddicc: updated });
    };
    return /* @__PURE__ */ React.createElement("div", { className: "space-y-4" }, /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between flex-wrap gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "w-10 h-10 rounded-xl flex items-center justify-center text-xl shrink-0", style: { background: "linear-gradient(135deg,#2080BD,#4fa3d1)" } }, "\u{1F3AF}"), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h3", { className: "font-bold text-gray-900 text-base" }, "Account Intelligence"), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-400 mt-0.5" }, "Account-level strategic context \xB7 ", /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "MEDDICC"), " \u2014 ", client.name))), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex gap-1" }, FIELDS.map((f) => /* @__PURE__ */ React.createElement(
      "div",
      {
        key: f.key,
        title: f.label,
        className: `w-3 h-3 rounded-full transition-all ${fields[f.key] && fields[f.key].trim() ? "bg-blue-500" : "bg-gray-200"}`
      }
    ))), /* @__PURE__ */ React.createElement("span", { className: "text-sm font-semibold text-gray-600 ml-1" }, filledCount, "/", FIELDS.length)))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-1 gap-3" }, FIELDS.map((f) => {
      const filled = fields[f.key] && fields[f.key].trim();
      return /* @__PURE__ */ React.createElement("div", { key: f.key, className: "card p-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between gap-2 mb-1.5" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-base leading-none" }, f.icon), /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-sm text-gray-800" }, f.label)), filled && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-green-600 font-semibold shrink-0" }, "\u2713 Added")), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-400 mb-2.5 ml-6" }, f.desc), /* @__PURE__ */ React.createElement(
        "textarea",
        {
          rows: 3,
          className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y bg-gray-50 focus:bg-white transition-colors",
          placeholder: "Add " + f.label + " notes\u2026",
          value: fields[f.key] || "",
          onChange: (e) => setFields({ ...fields, [f.key]: e.target.value }),
          onBlur: (e) => handleBlur(f.key, e.target.value)
        }
      ));
    })));
  }
  function ClientDetailView({ client, opps, rels, onBack, onUpdateClient, onUpdateRels, onSelectOpp, onAddOpp, onRemoveOpp, onArchive }) {
    const { canEdit } = useRole();
    const [editing, setEditing] = useState(false);
    const [form, setForm] = useState({ ...client });
    const [healthEdit, setHealthEdit] = useState(false);
    const [oppFilter, setOppFilter] = useState("all");
    const [showClosedClient, setShowClosedClient] = useState(false);
    const [pipelineFilter, setPipelineFilter] = useState("all");
    const [activeTab, setActiveTab] = useState("overview");
    useEffect(() => {
      setForm({ ...client });
      setEditing(false);
      setActiveTab("overview");
    }, [client.id]);
    const cycleHealth = (m) => {
      const cycle = { null: "Green", Green: "Yellow", Yellow: "Red", Red: null };
      const updated = { ...form, healthHistory: { ...form.healthHistory, [m]: cycle[form.healthHistory[m] || null] } };
      setForm(updated);
      onUpdateClient(updated);
    };
    const clientOpps = opps.filter((o) => o.clientId === client.id);
    const filteredOpps = clientOpps.filter((o) => {
      if (oppFilter !== "all" && o.status !== oppFilter) return false;
      if (pipelineFilter !== "all" && (o.pipeline || "capillary") !== pipelineFilter) return false;
      return true;
    });
    const wonValue = clientOpps.filter((o) => o.status === "Closed-Won").reduce((a, o) => a + (o.value || 0), 0);
    const activeValue = clientOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).reduce((a, o) => a + (o.value || 0), 0);
    const insOpps = clientOpps.filter((o) => o.pipeline === "inspire");
    const capOpps = clientOpps.filter((o) => o.pipeline !== "inspire");
    const inp = (key, type = "text") => /* @__PURE__ */ React.createElement(
      "input",
      {
        type,
        className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: form[key] || "",
        onChange: (e) => setForm({ ...form, [key]: type === "number" ? Number(e.target.value) || null : e.target.value })
      }
    );
    const row = (label, value, editEl) => /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 py-2.5 border-b border-gray-50" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 w-32 shrink-0 mt-1" }, label), editing && editEl ? editEl : /* @__PURE__ */ React.createElement("span", { className: "text-sm text-gray-800" }, value || "\u2014"));
    const saveEdit = () => {
      const numFields = ["arr", "aop", "forecast", "tenure", "members"];
      const cleaned = { ...form };
      numFields.forEach((k) => {
        if (cleaned[k] !== null && cleaned[k] !== void 0 && cleaned[k] !== "") {
          const n = Number(cleaned[k]);
          cleaned[k] = isNaN(n) ? null : n;
        }
      });
      onUpdateClient(cleaned);
      setEditing(false);
    };
    const clientRels = rels[client.name] || [];
    const handleRelsUpdate = (newRels) => onUpdateRels(client.name, newRels);
    const activeOppCount = clientOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).length;
    const tabs = [{ id: "overview", label: "Overview" }, { id: "relationships", label: "Relationships" }, { id: "opportunities", label: `Opportunities (${activeOppCount})` }, { id: "activity", label: "Activity" }, { id: "meddicc", label: "Account Intel" }];
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("button", { onClick: onBack, className: "text-sm font-semibold flex items-center gap-1", style: { color: "#2080BD" } }, "\u2190 Back to Clients"), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between gap-4 flex-wrap" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start gap-4" }, /* @__PURE__ */ React.createElement(HealthDot, { health: getCurrentHealth(client), size: 52 }), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3 flex-wrap" }, /* @__PURE__ */ React.createElement("h1", { className: "text-2xl font-bold text-gray-900" }, client.name), /* @__PURE__ */ React.createElement(PlatformBadge, { platform: client.platform }), client.archived && /* @__PURE__ */ React.createElement("span", { className: "archived-badge" }, "Archived")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-5 mt-2 flex-wrap" }, client.arr != null && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "ARR"), /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold", style: { color: "#2080BD" } }, fmt$(client.arr))), client.aop != null && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "AOP"), /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-purple-700" }, fmt$(client.aop))), client.forecast != null && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Forecast"), /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-gray-800" }, fmt$(client.forecast)))))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 flex-wrap" }, canEdit && (editing ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("button", { onClick: saveEdit, className: "btn-primary text-sm" }, "Save"), /* @__PURE__ */ React.createElement("button", { onClick: () => {
      setForm({ ...client });
      setEditing(false);
    }, className: "btn-secondary text-sm" }, "Cancel")) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("button", { onClick: () => setEditing(true), className: "btn-secondary text-sm" }, "\u270F\uFE0F Edit"), /* @__PURE__ */ React.createElement("button", { onClick: onArchive, className: "btn-secondary text-sm text-amber-700" }, client.archived ? "\u21A9 Unarchive" : "\u{1F4E6} Archive")))))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 border-b border-gray-200" }, tabs.map((t) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: t.id,
        onClick: () => setActiveTab(t.id),
        className: `px-4 py-2.5 text-sm font-semibold border-b-2 transition-colors ${activeTab === t.id ? "border-blue-500 text-blue-600" : "border-transparent text-gray-500 hover:text-gray-700"}`
      },
      t.label
    ))), activeTab === "overview" && /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-5" }, /* @__PURE__ */ React.createElement("div", { className: "card col-span-1" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm mb-1" }, "Account Details"), row("Account Lead", client.execSponsor, inp("execSponsor")), row(
      "Platform",
      client.platform === "capillary" ? "Core SaaS" : client.platform === "inspire" ? "Legacy" : "Other",
      editing ? /* @__PURE__ */ React.createElement(
        "select",
        {
          className: "text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-300 w-full",
          value: form.platform || "capillary",
          onChange: (e) => setForm({ ...form, platform: e.target.value })
        },
        /* @__PURE__ */ React.createElement("option", { value: "capillary" }, "Core SaaS"),
        /* @__PURE__ */ React.createElement("option", { value: "inspire" }, "Legacy"),
        /* @__PURE__ */ React.createElement("option", { value: "other" }, "Other")
      ) : null
    ), row("Geography", client.geography, inp("geography")), row("Contracted", client.contracted, inp("contracted")), row("Contract Length", client.contractLength, inp("contractLength")), row("Last Renewal", client.lastRenewal, inp("lastRenewal", "date")), row("Next Renewal", client.nextRenewal, inp("nextRenewal", "date")), row("ARR", fmt$(client.arr), inp("arr", "number")), row("AOP", fmt$(client.aop), inp("aop", "number")), row("Forecast", fmt$(client.forecast), inp("forecast", "number")), client.archived && row("Archived Date", client.archivedDate, inp("archivedDate", "date")), client.archived && row("Last Engagement", client.lastEngagement, inp("lastEngagement", "date")), /* @__PURE__ */ React.createElement("div", { className: "pt-2" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-1.5 font-semibold" }, "Products & Services Attached"), /* @__PURE__ */ React.createElement("div", { className: "flex flex-wrap gap-2" }, CORE_PRODUCTS.map((p) => {
      const owned = (form.products || []).includes(p);
      const toggle = () => {
        const next = owned ? (form.products || []).filter((x) => x !== p) : [...form.products || [], p];
        const updated = { ...form, products: next };
        setForm(updated);
        onUpdateClient(updated);
      };
      return /* @__PURE__ */ React.createElement(
        "button",
        {
          key: p,
          onClick: toggle,
          className: "px-3 py-1.5 rounded-lg text-xs font-semibold border transition-all",
          style: owned ? { background: "#2080BD", color: "#fff", borderColor: "#2080BD" } : { background: "#f8fafc", color: "#94a3b8", borderColor: "#e2e8f0" }
        },
        owned ? "\u2713 " : "",
        p
      );
    })), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-300 mt-1.5" }, "Click to toggle \u2014 used for expansion analysis")), /* @__PURE__ */ React.createElement("div", { className: "pt-2" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-1" }, "Notes"), editing ? /* @__PURE__ */ React.createElement("textarea", { className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full", rows: 3, value: form.notes || "", onChange: (e) => setForm({ ...form, notes: e.target.value }) }) : /* @__PURE__ */ React.createElement("p", { className: "text-sm text-gray-700 whitespace-pre-wrap" }, client.notes || "\u2014"))), /* @__PURE__ */ React.createElement("div", { className: "card col-span-2 space-y-5" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-3" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm" }, "Monthly Health Ratings"), canEdit && /* @__PURE__ */ React.createElement("button", { onClick: () => setHealthEdit(!healthEdit), className: `text-xs px-3 py-1.5 rounded-lg font-semibold transition-all ${healthEdit ? "bg-blue-500 text-white" : "bg-gray-100 text-gray-600 hover:bg-gray-200"}` }, healthEdit ? "Done Editing" : "Edit Health")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-6 flex-wrap" }, HEALTH_MONTHS.map((m) => {
      const h = form.healthHistory[m] || null;
      return /* @__PURE__ */ React.createElement("div", { key: m, className: "text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-2" }, MONTH_LABELS[m]), /* @__PURE__ */ React.createElement(HealthDot, { health: h, size: 46, editable: healthEdit, onClick: healthEdit ? () => cycleHealth(m) : void 0 }), /* @__PURE__ */ React.createElement("div", { className: "text-xs mt-1.5 font-semibold", style: { color: h ? healthColor(h) : "#94a3b8" } }, h || "N/A"));
    })), healthEdit && /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-400 mt-3" }, "Click to cycle: Not Set \u2192 Green \u2192 Yellow \u2192 Red")), (() => {
      const allMonths = Object.keys(form.healthHistory || {}).filter((k) => form.healthHistory[k]).sort();
      if (allMonths.length === 0) return null;
      const colorMap = { Green: "#22c55e", Yellow: "#eab308", Red: "#ef4444" };
      const mnNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
      const lbl = (k) => {
        const [y, m] = k.split("-").map(Number);
        return `${mnNames[m - 1]} '${String(y).slice(2)}`;
      };
      const years = [...new Set(allMonths.map((k) => k.split("-")[0]))];
      return /* @__PURE__ */ React.createElement("div", { className: "border-t border-gray-100 pt-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-3" }, /* @__PURE__ */ React.createElement("h4", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Full Health History \xB7 ", allMonths.length, " months"), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3 text-xs text-gray-400" }, ["Green", "Yellow", "Red"].map((h) => /* @__PURE__ */ React.createElement("span", { key: h, className: "flex items-center gap-1" }, /* @__PURE__ */ React.createElement("span", { style: { display: "inline-block", width: 9, height: 9, background: colorMap[h], borderRadius: 2 } }), h)), /* @__PURE__ */ React.createElement("span", { className: "flex items-center gap-1" }, /* @__PURE__ */ React.createElement("span", { style: { display: "inline-block", width: 9, height: 9, background: "#e2e8f0", borderRadius: 2 } }), "No data"))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 flex-wrap" }, allMonths.map((m) => {
        const h = form.healthHistory[m];
        const col = colorMap[h] || "#e2e8f0";
        const isRecent = HEALTH_MONTHS.includes(m);
        return /* @__PURE__ */ React.createElement("div", { key: m, className: "relative group flex flex-col items-center" }, /* @__PURE__ */ React.createElement("div", { style: { width: 26, height: 26, background: col, borderRadius: 4, border: isRecent ? "2px solid #94a3b8" : "2px solid transparent", cursor: "default" } }), /* @__PURE__ */ React.createElement("div", { className: "absolute bottom-full left-1/2 -translate-x-1/2 mb-1.5 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none z-20 shadow-lg" }, lbl(m), ": ", /* @__PURE__ */ React.createElement("span", { style: { color: col === "#e2e8f0" ? "#9ca3af" : col } }, h || "No data")));
      })), /* @__PURE__ */ React.createElement("div", { className: "flex gap-0 mt-1.5 text-xs text-gray-400" }, allMonths.map((m, i) => {
        const yr = m.split("-")[0];
        const firstOfYear = allMonths.findIndex((x) => x.startsWith(yr)) === i;
        return /* @__PURE__ */ React.createElement("div", { key: m, style: { width: 27, flexShrink: 0, textAlign: "left" } }, firstOfYear && /* @__PURE__ */ React.createElement("span", { className: "font-semibold", style: { color: "#64748b" } }, yr.slice(2)));
      })), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-300 mt-1" }, "Outlined blocks = current 5-month window"));
    })(), /* @__PURE__ */ React.createElement("div", { className: "border-t border-gray-100 pt-4" }, /* @__PURE__ */ React.createElement("h4", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3" }, "Pipeline Snapshot"), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-4 gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "bg-blue-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-blue-700" }, clientOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-500 mt-0.5" }, "Active Opps")), /* @__PURE__ */ React.createElement("div", { className: "bg-green-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-green-700" }, fmt$(wonValue)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-green-500 mt-0.5" }, "Won FY26")), insOpps.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "bg-blue-50 rounded-xl p-3 text-center", style: { borderTop: "2px solid #3b82f6" } }, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-blue-700" }, insOpps.length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-500 mt-0.5" }, "Inspire Opps")), capOpps.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "bg-purple-50 rounded-xl p-3 text-center", style: { borderTop: "2px solid #8b5cf6" } }, /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold text-purple-700" }, capOpps.length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-purple-500 mt-0.5" }, "Cap. Opps")))))), activeTab === "relationships" && /* @__PURE__ */ React.createElement(RelationshipMapping, { clientName: client.name, relData: clientRels, onUpdate: handleRelsUpdate }), activeTab === "opportunities" && (() => {
      const CLOSED = ["Closed-Won", "Closed-Lost"];
      const activeFiltered = filteredOpps.filter((o) => !CLOSED.includes(o.status));
      const closedFiltered = filteredOpps.filter((o) => CLOSED.includes(o.status));
      const OppRow = ({ o }) => /* @__PURE__ */ React.createElement("div", { key: o.id, className: "flex items-center gap-3 p-3 rounded-xl border border-gray-100 hover:border-blue-200 hover:bg-blue-50 cursor-pointer transition-all", onClick: () => onSelectOpp(o.id) }, /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 flex-wrap" }, /* @__PURE__ */ React.createElement("span", { className: "font-medium text-gray-800 text-sm" }, o.name), /* @__PURE__ */ React.createElement(PipelineBadge, { pipeline: o.pipeline || "capillary" })), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3 text-xs text-gray-400 mt-0.5 flex-wrap" }, /* @__PURE__ */ React.createElement("span", null, o.category), o.owner && /* @__PURE__ */ React.createElement("span", null, "\u{1F464} ", o.owner), o.retainerType && /* @__PURE__ */ React.createElement("span", null, o.retainerType), o.targetQtr && o.targetQtr !== "nan" && /* @__PURE__ */ React.createElement("span", null, "Q", o.targetQtr), o.probability && /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-indigo-500" }, o.probability))), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3 shrink-0" }, /* @__PURE__ */ React.createElement("div", { className: "font-semibold text-gray-800 text-sm" }, fmt$(o.value)), /* @__PURE__ */ React.createElement(StatusBadge, { status: o.status }), canEdit && /* @__PURE__ */ React.createElement("button", { onClick: (e) => {
        e.stopPropagation();
        onRemoveOpp(o.id, o.name);
      }, className: "text-gray-200 hover:text-red-500 transition-colors text-xl opacity-60 hover:opacity-100 ml-1" }, "\xD7")));
      return /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-4 flex-wrap gap-2" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700" }, "Opportunities (", activeFiltered.length, closedFiltered.length > 0 ? ` + ${closedFiltered.length} closed` : "", ")"), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 flex-wrap" }, insOpps.length > 0 && capOpps.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 bg-gray-100 rounded-xl p-1" }, ["all", "inspire", "capillary"].map((p) => /* @__PURE__ */ React.createElement(
        "button",
        {
          key: p,
          onClick: () => setPipelineFilter(p),
          className: `px-2.5 py-1 rounded-lg text-xs font-semibold transition-all ${pipelineFilter === p ? "bg-blue-500 text-white" : "text-gray-600"}`
        },
        p === "all" ? "All" : p === "inspire" ? "\u2726 Inspire" : "\u25C8 Cap"
      ))), /* @__PURE__ */ React.createElement("select", { value: oppFilter, onChange: (e) => setOppFilter(e.target.value), className: "text-xs border border-gray-200 rounded-xl px-3 py-1.5 bg-white focus:outline-none" }, /* @__PURE__ */ React.createElement("option", { value: "all" }, "All Stages"), STATUSES.map((s) => /* @__PURE__ */ React.createElement("option", { key: s }, s))), canEdit && /* @__PURE__ */ React.createElement("button", { onClick: onAddOpp, className: "btn-primary text-xs px-3 py-1.5" }, "+ Add"))), activeFiltered.length === 0 && closedFiltered.length === 0 ? /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm text-center py-8" }, "No opportunities.") : /* @__PURE__ */ React.createElement("div", { className: "space-y-2" }, activeFiltered.map((o) => /* @__PURE__ */ React.createElement(OppRow, { key: o.id, o })), closedFiltered.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(
        "button",
        {
          onClick: () => setShowClosedClient((v) => !v),
          className: "w-full flex items-center gap-2 py-2 px-3 rounded-xl text-xs font-semibold text-gray-400 hover:text-gray-600 hover:bg-gray-50 transition-all mt-1"
        },
        /* @__PURE__ */ React.createElement("span", null, showClosedClient ? "\u25BC" : "\u25B6"),
        /* @__PURE__ */ React.createElement("span", null, showClosedClient ? "Hide" : "Show", " ", closedFiltered.length, " closed deal", closedFiltered.length !== 1 ? "s" : ""),
        /* @__PURE__ */ React.createElement("span", { className: "ml-auto" }, fmt$(closedFiltered.filter((o) => o.status === "Closed-Won").reduce((a, o) => a + (o.value || 0), 0)), " won")
      ), showClosedClient && /* @__PURE__ */ React.createElement("div", { className: "space-y-2 opacity-75" }, closedFiltered.map((o) => /* @__PURE__ */ React.createElement(OppRow, { key: o.id, o }))))));
    })(), activeTab === "activity" && /* @__PURE__ */ React.createElement(CommentsSection, { comments: client.comments || [], onAdd: (text) => onUpdateClient({ ...client, comments: [...client.comments || [], { id: Date.now(), text, author: "You", date: (/* @__PURE__ */ new Date()).toLocaleDateString() }] }) }), activeTab === "meddicc" && /* @__PURE__ */ React.createElement(MEDDICCPanel, { client, onUpdateClient }));
  }
  function OppMEDDICCSection({ opp, onUpdateOpp }) {
    const FIELDS = [
      { key: "metrics", label: "Metrics", icon: "\u{1F4CA}", desc: "What measurable outcome does this deal deliver for the client?" },
      { key: "economicBuyer", label: "Economic Buyer", icon: "\u{1F4BC}", desc: "Who has budget authority for this specific deal?" },
      { key: "decisionCriteria", label: "Decision Criteria", icon: "\u{1F4CB}", desc: "What criteria will be used to evaluate and approve this opportunity?" },
      { key: "decisionProcess", label: "Decision Process", icon: "\u{1F5FA}\uFE0F", desc: "What approval steps are needed to close this deal?" },
      { key: "identifyPain", label: "Identify Pain", icon: "\u{1F3AF}", desc: "What specific pain or problem is this opportunity solving?" },
      { key: "champion", label: "Champion", icon: "\u{1F3C6}", desc: "Who is championing this deal on the client side?" },
      { key: "competition", label: "Competition", icon: "\u2694\uFE0F", desc: "Is there competitive pressure on this deal? Who and how?" }
    ];
    const [fields, setFields] = React.useState(opp.meddicc || {});
    React.useEffect(() => {
      setFields(opp.meddicc || {});
    }, [opp.id]);
    const filledCount = FIELDS.filter((f) => fields[f.key] && fields[f.key].trim()).length;
    const handleBlur = (key, val) => {
      onUpdateOpp({ ...opp, meddicc: { ...opp.meddicc || {}, [key]: val }, lastUpdated: (/* @__PURE__ */ new Date()).toLocaleDateString() });
    };
    return /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-5 flex-wrap gap-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-lg" }, "\u{1F3AF}"), /* @__PURE__ */ React.createElement("h3", { className: "font-bold text-gray-900" }, "MEDDICC Qualification")), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, FIELDS.map((f) => /* @__PURE__ */ React.createElement(
      "div",
      {
        key: f.key,
        title: f.label,
        className: `w-2.5 h-2.5 rounded-full transition-all ${fields[f.key] && fields[f.key].trim() ? "bg-blue-500" : "bg-gray-200"}`
      }
    )), /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 ml-1" }, filledCount, "/", FIELDS.length, " completed"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-3" }, FIELDS.map((f, i) => {
      const filled = fields[f.key] && fields[f.key].trim();
      return /* @__PURE__ */ React.createElement("div", { key: f.key, className: i === FIELDS.length - 1 ? "col-span-2" : "" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5 mb-1" }, /* @__PURE__ */ React.createElement("span", { className: "text-sm" }, f.icon), /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-700" }, f.label), filled && /* @__PURE__ */ React.createElement("span", { className: "ml-auto text-xs text-green-600 font-semibold" }, "\u2713")), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-400 mb-1.5" }, f.desc), /* @__PURE__ */ React.createElement(
        "textarea",
        {
          rows: 2,
          className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y bg-gray-50 focus:bg-white transition-colors",
          placeholder: "Add " + f.label + " notes\u2026",
          value: fields[f.key] || "",
          onChange: (e) => setFields({ ...fields, [f.key]: e.target.value }),
          onBlur: (e) => handleBlur(f.key, e.target.value)
        }
      ));
    })));
  }
  function OppDetailView({ opp, client, onBack, onUpdateOpp, backView }) {
    const { canEdit } = useRole();
    const [editing, setEditing] = useState(false);
    const [form, setForm] = useState({ ...opp });
    useEffect(() => {
      setForm({ ...opp });
      setEditing(false);
    }, [opp.id]);
    const inp = (key, type = "text", placeholder = "") => /* @__PURE__ */ React.createElement(
      "input",
      {
        type,
        className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: form[key] || "",
        placeholder,
        onChange: (e) => setForm({ ...form, [key]: e.target.value })
      }
    );
    const row = (label, value, editEl) => /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 py-2.5 border-b border-gray-50" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 w-36 shrink-0 mt-1" }, label), editing && editEl ? editEl : /* @__PURE__ */ React.createElement("span", { className: "text-sm text-gray-800" }, value || "\u2014"));
    const saveEdit = () => {
      onUpdateOpp({ ...form, lastUpdated: (/* @__PURE__ */ new Date()).toLocaleDateString() });
      setEditing(false);
    };
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("button", { onClick: onBack, className: "text-sm font-semibold flex items-center gap-1", style: { color: "#2080BD" } }, "\u2190 ", backView === "allOpps" ? "Back to All Opportunities" : "Back to " + ((client == null ? void 0 : client.name) || "Client")), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between gap-4 flex-wrap" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3 flex-wrap mb-2" }, /* @__PURE__ */ React.createElement("h1", { className: "text-2xl font-bold text-gray-900" }, opp.name), /* @__PURE__ */ React.createElement(PipelineBadge, { pipeline: opp.pipeline || "capillary" }), /* @__PURE__ */ React.createElement(StatusBadge, { status: opp.status })), /* @__PURE__ */ React.createElement("p", { className: "text-gray-500 text-sm" }, (client == null ? void 0 : client.name) || "\u2014", " \xB7 ", opp.category)), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, canEdit && (editing ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("button", { onClick: saveEdit, className: "btn-primary text-sm" }, "Save"), /* @__PURE__ */ React.createElement("button", { onClick: () => {
      setForm({ ...opp });
      setEditing(false);
    }, className: "btn-secondary text-sm" }, "Cancel")) : /* @__PURE__ */ React.createElement("button", { onClick: () => setEditing(true), className: "btn-secondary text-sm" }, "\u270F\uFE0F Edit"))))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-5" }, /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm mb-3" }, "Opportunity Details"), row("Value", fmt$(opp.value), inp("value", "number")), row(
      "Status",
      opp.status,
      /* @__PURE__ */ React.createElement("select", { value: form.status || "", onChange: (e) => setForm({ ...form, status: e.target.value }), className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full focus:outline-none focus:ring-1 focus:ring-blue-400" }, STATUSES.map((s) => /* @__PURE__ */ React.createElement("option", { key: s }, s)))
    ), row("Owner", opp.owner, inp("owner")), row("Category", opp.category, inp("category")), row("Type", opp.retainerType, inp("retainerType")), row("Target Qtr", opp.targetQtr, inp("targetQtr")), row(
      "Probability",
      opp.probability || "\u2014",
      /* @__PURE__ */ React.createElement("select", { value: form.probability || "", onChange: (e) => setForm({ ...form, probability: e.target.value }), className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full focus:outline-none focus:ring-1 focus:ring-blue-400" }, /* @__PURE__ */ React.createElement("option", { value: "" }, "\u2014 Select \u2014"), ["0%", "<25%", "25%", "50%", "75%", "100%"].map((p) => /* @__PURE__ */ React.createElement("option", { key: p }, p)))
    ), row("Closing Fortnight", opp.closingFortnight, inp("closingFortnight")), row("Tag", opp.tag, inp("tag")), row("Last Updated", opp.lastUpdated)), /* @__PURE__ */ React.createElement("div", { className: "card space-y-4" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2" }, "Insights"), editing ? /* @__PURE__ */ React.createElement("textarea", { className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full", rows: 4, value: form.insights || "", onChange: (e) => setForm({ ...form, insights: e.target.value }) }) : /* @__PURE__ */ React.createElement("p", { className: "text-sm text-gray-700 whitespace-pre-wrap" }, opp.insights || "\u2014")), (opp.pipeline === "inspire" || opp.actionPlan) && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2" }, "Action Plan"), editing ? /* @__PURE__ */ React.createElement("textarea", { className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full", rows: 3, value: form.actionPlan || "", onChange: (e) => setForm({ ...form, actionPlan: e.target.value }) }) : /* @__PURE__ */ React.createElement("p", { className: "text-sm text-gray-700 whitespace-pre-wrap" }, opp.actionPlan || "\u2014")), (opp.pipeline === "inspire" || opp.supportNeeded) && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2" }, "Support Needed"), editing ? /* @__PURE__ */ React.createElement("textarea", { className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 w-full", rows: 2, value: form.supportNeeded || "", onChange: (e) => setForm({ ...form, supportNeeded: e.target.value }) }) : /* @__PURE__ */ React.createElement("p", { className: "text-sm text-gray-700 whitespace-pre-wrap" }, opp.supportNeeded || "\u2014")))), /* @__PURE__ */ React.createElement(OppMEDDICCSection, { opp, onUpdateOpp }));
  }
  function AccountLeadView({ clients, opps, onSelectClient }) {
    const activeClients = clients.filter((c) => !c.archived);
    const leads = useMemo(() => {
      const map = {};
      activeClients.forEach((c) => {
        const lead2 = c.execSponsor || "Unassigned";
        if (!map[lead2]) map[lead2] = { name: lead2, clients: [], totalARR: 0, totalAOP: 0, green: 0, yellow: 0, red: 0, noData: 0, npsScores: [], activeOpps: 0, wonValue: 0 };
        map[lead2].clients.push(c);
        map[lead2].totalARR += c.arr || 0;
        map[lead2].totalAOP += c.aop || 0;
        const h = getCurrentHealth(c);
        if (h === "Green") map[lead2].green++;
        else if (h === "Yellow") map[lead2].yellow++;
        else if (h === "Red") map[lead2].red++;
        else map[lead2].noData++;
        if (c.nps != null) map[lead2].npsScores.push(c.nps);
        const cOpps = opps.filter((o) => o.clientId === c.id);
        map[lead2].activeOpps += cOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).length;
        map[lead2].wonValue += cOpps.filter((o) => o.status === "Closed-Won").reduce((a, o) => a + (o.value || 0), 0);
      });
      return Object.values(map).sort((a, b) => b.clients.length - a.clients.length);
    }, [activeClients, opps]);
    const [selectedLead, setSelectedLead] = useState(null);
    const lead = leads.find((l) => l.name === selectedLead);
    if (selectedLead && lead) {
      return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("button", { onClick: () => setSelectedLead(null), className: "text-sm font-semibold flex items-center gap-1", style: { color: "#2080BD" } }, "\u2190 All Account Leads"), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-4" }, /* @__PURE__ */ React.createElement("div", { className: "w-14 h-14 rounded-2xl flex items-center justify-center text-white text-xl font-bold", style: { background: "linear-gradient(135deg,#2080BD,#4fa3d1)" } }, lead.name[0]), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-2xl font-bold text-gray-900" }, lead.name), /* @__PURE__ */ React.createElement("p", { className: "text-gray-500 text-sm" }, lead.clients.length, " clients \xB7 Account Lead"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-5 gap-4 mt-5" }, /* @__PURE__ */ React.createElement("div", { className: "bg-blue-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold", style: { color: "#2080BD" } }, lead.clients.length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Clients")), /* @__PURE__ */ React.createElement("div", { className: "bg-green-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-green-600" }, lead.green), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Green")), /* @__PURE__ */ React.createElement("div", { className: "bg-yellow-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-yellow-600" }, lead.yellow), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Yellow")), /* @__PURE__ */ React.createElement("div", { className: "bg-red-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-red-600" }, lead.red), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Red")), /* @__PURE__ */ React.createElement("div", { className: "bg-gray-50 rounded-xl p-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-gray-500" }, lead.activeOpps), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5" }, "Active Opps")))), (() => {
        const clientIds = new Set(lead.clients.map((c) => c.id));
        const leadOpps = opps.filter((o) => clientIds.has(o.clientId));
        const activeLeadOpps = leadOpps.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status)).sort((a, b) => (b.value || 0) - (a.value || 0));
        const wonOpps = leadOpps.filter((o) => o.status === "Closed-Won").sort((a, b) => (b.value || 0) - (a.value || 0));
        const wonTotal = wonOpps.reduce((a, o) => a + (o.value || 0), 0);
        const atRisk = lead.clients.map((c) => ({ c, health: getCurrentHealth(c) })).filter((x) => x.health === "Red" || x.health === "Yellow").sort((a, b) => {
          if (a.health === "Red" && b.health !== "Red") return -1;
          if (b.health === "Red" && a.health !== "Red") return 1;
          return (b.c.arr || b.c.aop || 0) - (a.c.arr || a.c.aop || 0);
        });
        return /* @__PURE__ */ React.createElement("div", { className: "grid gap-4", style: { gridTemplateColumns: "1fr 1fr 1fr", alignItems: "start" } }, /* @__PURE__ */ React.createElement("div", { className: "card", style: { padding: "16px", minWidth: 0 } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mb-3" }, /* @__PURE__ */ React.createElement("span", { className: "text-base" }, "\u26A0\uFE0F"), /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm" }, "Needs Attention"), atRisk.length > 0 && /* @__PURE__ */ React.createElement("span", { className: "ml-auto text-xs font-semibold bg-red-50 text-red-600 rounded-full px-2 py-0.5" }, atRisk.length)), atRisk.length === 0 ? /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 text-center py-4" }, "\u{1F389} All accounts healthy") : /* @__PURE__ */ React.createElement("div", { className: "space-y-2" }, atRisk.map(({ c, health }) => /* @__PURE__ */ React.createElement("div", { key: c.id, className: "flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors", onClick: () => onSelectClient(c.id) }, /* @__PURE__ */ React.createElement(HealthDot, { health, size: 10 }), /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-800", style: { wordBreak: "break-word" } }, c.name), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, c.platform === "inspire" ? fmt$(c.arr) : fmt$(c.aop))), /* @__PURE__ */ React.createElement("span", { className: `text-xs font-bold shrink-0 px-1.5 py-0.5 rounded-md ${health === "Red" ? "bg-red-50 text-red-600" : "bg-yellow-50 text-yellow-600"}` }, health))))), /* @__PURE__ */ React.createElement("div", { className: "card", style: { padding: "16px", minWidth: 0 } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mb-3" }, /* @__PURE__ */ React.createElement("span", { className: "text-base" }, "\u{1F4CA}"), /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm" }, "Active Pipeline"), activeLeadOpps.length > 0 && /* @__PURE__ */ React.createElement("span", { className: "ml-auto text-xs font-semibold text-gray-500" }, fmt$(activeLeadOpps.reduce((a, o) => a + (o.value || 0), 0)))), activeLeadOpps.length === 0 ? /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 text-center py-4" }, "No active opportunities") : /* @__PURE__ */ React.createElement("div", { className: "space-y-2" }, activeLeadOpps.map((o) => {
          const cl = lead.clients.find((c) => c.id === o.clientId);
          const stageCol = { "Lead": "#64748b", "Enquiry": "#7c3aed", "Discovery": "#3b82f6", "Solution Validation": "#0d9488", "Negotiation": "#f97316" }[o.status] || "#94a3b8";
          return /* @__PURE__ */ React.createElement("div", { key: o.id, className: "p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors", onClick: () => onSelectClient(o.clientId) }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between gap-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-800 leading-snug", style: { wordBreak: "break-word" } }, o.name), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, (cl == null ? void 0 : cl.name) || "\u2014")), o.value > 0 && /* @__PURE__ */ React.createElement("div", { className: "text-xs font-bold shrink-0", style: { color: "#2080BD" } }, fmt$(o.value))), /* @__PURE__ */ React.createElement("div", { className: "mt-1" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold px-1.5 py-0.5 rounded-md", style: { background: `${stageCol}18`, color: stageCol } }, o.status)));
        }))), /* @__PURE__ */ React.createElement("div", { className: "card", style: { padding: "16px", minWidth: 0, background: wonOpps.length > 0 ? "linear-gradient(135deg,#f0fdf4,#fff)" : void 0 } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mb-1" }, /* @__PURE__ */ React.createElement("span", { className: "text-base" }, "\u{1F3C6}"), /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 text-sm" }, "Wins")), wonOpps.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold text-green-600 mb-3" }, fmt$(wonTotal)), wonOpps.length === 0 ? /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 text-center py-4" }, "No closed-won deals yet") : /* @__PURE__ */ React.createElement("div", { className: "space-y-2" }, wonOpps.map((o) => {
          const cl = lead.clients.find((c) => c.id === o.clientId);
          return /* @__PURE__ */ React.createElement("div", { key: o.id, className: "flex items-start gap-2 p-2 rounded-lg hover:bg-green-50 cursor-pointer transition-colors", onClick: () => onSelectClient(o.clientId) }, /* @__PURE__ */ React.createElement("span", { className: "text-green-500 text-sm mt-0.5 shrink-0" }, "\u2713"), /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-800 leading-snug", style: { wordBreak: "break-word" } }, o.name), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, (cl == null ? void 0 : cl.name) || "\u2014")), o.value > 0 && /* @__PURE__ */ React.createElement("div", { className: "text-xs font-bold text-green-600 shrink-0" }, fmt$(o.value)));
        }))));
      })(), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 mb-3" }, "Client Portfolio"), /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", null, /* @__PURE__ */ React.createElement("tr", { className: "border-b border-gray-100" }, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2 px-3 text-xs font-semibold text-gray-500" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2 px-3 text-xs font-semibold text-gray-500" }, "Platform"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2 px-3 text-xs font-semibold text-gray-500" }, "ARR/AOP"), HEALTH_MONTHS.map((m) => /* @__PURE__ */ React.createElement("th", { key: m, className: "text-center py-2 px-2 text-xs font-semibold text-gray-500" }, MONTH_LABELS[m])), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2 px-3 text-xs font-semibold text-gray-500" }, "NPS"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2 px-3 text-xs font-semibold text-gray-500" }, "Opps"))), /* @__PURE__ */ React.createElement("tbody", null, lead.clients.map((c) => {
        const cOpps = opps.filter((o) => o.clientId === c.id && !["Closed-Won", "Closed-Lost"].includes(o.status));
        return /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer", onClick: () => onSelectClient(c.id) }, /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 font-semibold text-gray-800" }, c.name), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3" }, /* @__PURE__ */ React.createElement(PlatformBadge, { platform: c.platform })), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 font-medium" }, c.platform === "inspire" ? fmt$(c.arr) : fmt$(c.aop)), HEALTH_MONTHS.map((m) => {
          var _a;
          return /* @__PURE__ */ React.createElement("td", { key: m, className: "py-2.5 px-2 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-center" }, /* @__PURE__ */ React.createElement(HealthDot, { health: ((_a = c.healthHistory) == null ? void 0 : _a[m]) || null, size: 20 })));
        }), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3" }, c.nps != null ? /* @__PURE__ */ React.createElement("span", { className: `font-bold ${c.nps >= 50 ? "text-green-600" : c.nps >= 0 ? "text-yellow-600" : "text-red-600"}` }, c.nps) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-gray-500" }, cOpps.length));
      })))));
    }
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "Account Leads"), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-4" }, leads.map((lead2) => {
      const avgNPS = lead2.npsScores.length ? Math.round(lead2.npsScores.reduce((a, b) => a + b, 0) / lead2.npsScores.length) : null;
      const total = lead2.clients.length;
      const gPct = total ? Math.round(lead2.green / total * 100) : 0;
      const yPct = total ? Math.round(lead2.yellow / total * 100) : 0;
      const rPct = total ? Math.round(lead2.red / total * 100) : 0;
      return /* @__PURE__ */ React.createElement("div", { key: lead2.name, className: "card cursor-pointer hover:shadow-md transition-shadow border-2 border-transparent hover:border-blue-200", onClick: () => setSelectedLead(lead2.name) }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3 mb-4" }, /* @__PURE__ */ React.createElement("div", { className: "w-11 h-11 rounded-xl flex items-center justify-center text-white text-lg font-bold shrink-0", style: { background: "linear-gradient(135deg,#2080BD,#4fa3d1)" } }, lead2.name[0]), /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "font-bold text-gray-900" }, lead2.name), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, lead2.clients.length, " clients \xB7 ", lead2.activeOpps, " active opps")), avgNPS != null && /* @__PURE__ */ React.createElement("div", { className: "text-right" }, /* @__PURE__ */ React.createElement("div", { className: `text-lg font-bold ${avgNPS >= 50 ? "text-green-600" : avgNPS >= 0 ? "text-yellow-600" : "text-red-600"}` }, avgNPS), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "avg NPS"))), /* @__PURE__ */ React.createElement("div", { className: "h-2 rounded-full overflow-hidden flex", style: { background: "#e2e8f0" } }, gPct > 0 && /* @__PURE__ */ React.createElement("div", { className: "nps-bar bg-green-500", style: { width: gPct + "%" } }), yPct > 0 && /* @__PURE__ */ React.createElement("div", { className: "nps-bar bg-yellow-400", style: { width: yPct + "%" } }), rPct > 0 && /* @__PURE__ */ React.createElement("div", { className: "nps-bar bg-red-500", style: { width: rPct + "%" } })), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3 mt-2 text-xs text-gray-500" }, lead2.green > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-green-600 font-semibold" }, "\u25CF ", lead2.green, " Green"), lead2.yellow > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-yellow-600 font-semibold" }, "\u25CF ", lead2.yellow, " Yellow"), lead2.red > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-red-600 font-semibold" }, "\u25CF ", lead2.red, " Red"), lead2.noData > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-gray-400" }, "\u25CF ", lead2.noData, " No data")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-4 mt-3 text-xs border-t border-gray-50 pt-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400" }, "ARR:"), " ", /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-700" }, fmt$(lead2.totalARR))), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400" }, "AOP:"), " ", /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-700" }, fmt$(lead2.totalAOP))), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400" }, "Won:"), " ", /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-green-600" }, fmt$(lead2.wonValue)))));
    })));
  }
  function TrendArrow({ popChange }) {
    if (!popChange) return null;
    const pc = popChange.toLowerCase();
    if (pc.includes("improved")) return /* @__PURE__ */ React.createElement("span", { style: { color: "#22c55e", fontWeight: "bold", marginLeft: "4px" } }, "\u2191 Improved");
    if (pc.includes("declin")) return /* @__PURE__ */ React.createElement("span", { style: { color: "#ef4444", fontWeight: "bold", marginLeft: "4px" } }, "\u2193 Declined");
    if (pc.includes("no change")) return /* @__PURE__ */ React.createElement("span", { style: { color: "#94a3b8", marginLeft: "4px" } }, "\u2192 No Change");
    return /* @__PURE__ */ React.createElement("span", { style: { color: "#94a3b8", marginLeft: "4px", fontSize: "11px" } }, popChange);
  }
  function SparkLine({ history, width = 110, height = 30 }) {
    if (!history || history.length < 2) return /* @__PURE__ */ React.createElement("span", { style: { color: "#d1d5db", fontSize: "11px" } }, "\u2014");
    const vals = history.map((h) => h.nps);
    const min = Math.min(...vals, -100), max = Math.max(...vals, 100), range = max - min || 1;
    const npsCol = (v) => v >= 50 ? "#22c55e" : v >= 0 ? "#eab308" : "#ef4444";
    const pts = vals.map((v, i) => ({ x: i / (vals.length - 1) * width, y: height - (v - min) / range * height, col: npsCol(v) }));
    return /* @__PURE__ */ React.createElement("svg", { width, height, style: { overflow: "visible" } }, pts.slice(1).map((pt, i) => /* @__PURE__ */ React.createElement("line", { key: i, x1: pts[i].x, y1: pts[i].y, x2: pt.x, y2: pt.y, stroke: pt.col, strokeWidth: "2", strokeLinecap: "round" })), pts.map((pt, i) => /* @__PURE__ */ React.createElement("circle", { key: i, cx: pt.x, cy: pt.y, r: "2.5", fill: pt.col })));
  }
  function AddNPSModal({ clients, qtrs, onClose, onSave }) {
    var _a;
    const sorted = [...clients].sort((a, b) => a.name.localeCompare(b.name));
    const [clientId, setClientId] = React.useState(((_a = sorted[0]) == null ? void 0 : _a.id) || "");
    const [quarter, setQuarter] = React.useState(qtrs[0] || "");
    const [customQtr, setCustomQtr] = React.useState("");
    const [useCustom, setUseCustom] = React.useState(false);
    const [nps, setNps] = React.useState("");
    const [npsManual, setNpsManual] = React.useState(false);
    const [promoters, setPromoters] = React.useState("");
    const [passives, setPassives] = React.useState("");
    const [detractors, setDetractors] = React.useState("");
    const [error, setError] = React.useState("");
    const QTR_LABELS = {
      "NDJ '25": "Nov-Dec-Jan '25 (Q4 FY26)",
      "SON '25": "Sep-Oct-Nov '25 (Q3 FY26)",
      "JAS '25": "Jul-Aug-Sep '25 (Q2 FY26)",
      "AMJ '25": "Apr-May-Jun '25 (Q1 FY26)",
      "JFM '25": "Jan-Feb-Mar '25 (Q4 FY25)",
      "OND '24": "Oct-Nov-Dec '24 (Q3 FY25)",
      "JAS '24": "Jul-Aug-Sep '24 (Q2 FY25)",
      "AMJ '24": "Apr-May-Jun '24 (Q1 FY25)",
      "JFM '24": "Jan-Feb-Mar '24 (Q4 FY24)",
      "OND '23": "Oct-Nov-Dec '23 (Q3 FY24)",
      "JAS '23": "Jul-Aug-Sep '23 (Q2 FY24)",
      "AMJ '23": "Apr-May-Jun '23 (Q1 FY24)"
    };
    const calcNPS = () => {
      const p = Number(promoters) || 0, pa = Number(passives) || 0, d = Number(detractors) || 0;
      const total = p + pa + d;
      if (total === 0) return null;
      return Math.round((p - d) / total * 100);
    };
    React.useEffect(() => {
      if (npsManual) return;
      const p = Number(promoters) || 0, pa = Number(passives) || 0, d = Number(detractors) || 0;
      const total = p + pa + d;
      if (total === 0) {
        setNps("");
        return;
      }
      setNps(String(Math.round((p - d) / total * 100)));
    }, [promoters, passives, detractors]);
    const handleSave = () => {
      const finalQtr = useCustom ? customQtr.trim() : quarter;
      if (!finalQtr) {
        setError("Please select or enter a quarter.");
        return;
      }
      const client = clients.find((c) => c.id === clientId);
      if (!client) {
        setError("Please select a client.");
        return;
      }
      let finalNPS = nps !== "" ? Number(nps) : calcNPS();
      if (finalNPS == null) {
        setError("Enter an NPS score, or enter Promoters/Passives/Detractors to compute it.");
        return;
      }
      if (finalNPS < -100 || finalNPS > 100) {
        setError("NPS must be between -100 and 100.");
        return;
      }
      const entry = {
        quarter: finalQtr,
        quarterFull: QTR_LABELS[finalQtr] || finalQtr,
        nps: finalNPS,
        promoters: Number(promoters) || 0,
        passives: Number(passives) || 0,
        detractors: Number(detractors) || 0
      };
      onSave(client, entry);
    };
    const computed = calcNPS();
    const displayNPS = nps !== "" ? Number(nps) : computed;
    return /* @__PURE__ */ React.createElement("div", { className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" }, /* @__PURE__ */ React.createElement("div", { className: "bg-white rounded-2xl shadow-2xl w-full max-w-md" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between px-6 py-4 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-900 text-base" }, "Add NPS Score"), /* @__PURE__ */ React.createElement("button", { onClick: onClose, className: "text-gray-400 hover:text-gray-600 text-xl leading-none" }, "\xD7")), /* @__PURE__ */ React.createElement("div", { className: "px-6 py-4 space-y-4" }, error && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-red-600 bg-red-50 rounded-lg px-3 py-2" }, error), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "block text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide" }, "Client"), /* @__PURE__ */ React.createElement(
      "select",
      {
        value: clientId,
        onChange: (e) => setClientId(e.target.value),
        className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400"
      },
      sorted.map((c) => /* @__PURE__ */ React.createElement("option", { key: c.id, value: c.id }, c.name))
    )), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "block text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide" }, "Quarter"), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, !useCustom ? /* @__PURE__ */ React.createElement(
      "select",
      {
        value: quarter,
        onChange: (e) => setQuarter(e.target.value),
        className: "flex-1 text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400"
      },
      qtrs.map((q) => /* @__PURE__ */ React.createElement("option", { key: q, value: q }, q, QTR_LABELS[q] ? " \u2014 " + QTR_LABELS[q] : ""))
    ) : /* @__PURE__ */ React.createElement(
      "input",
      {
        value: customQtr,
        onChange: (e) => setCustomQtr(e.target.value),
        placeholder: "e.g. FMA '26",
        className: "flex-1 text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400"
      }
    ), /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: () => {
          setUseCustom(!useCustom);
          setCustomQtr("");
        },
        className: "text-xs text-blue-500 hover:text-blue-700 shrink-0 font-semibold"
      },
      useCustom ? "Use list" : "Custom"
    ))), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "block text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide" }, "NPS Score ", /* @__PURE__ */ React.createElement("span", { className: "font-normal text-gray-400 normal-case" }, "(or compute from responses below)")), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3" }, /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "number",
        min: "-100",
        max: "100",
        value: nps,
        onChange: (e) => {
          setNpsManual(true);
          setNps(e.target.value);
        },
        placeholder: "e.g. 50",
        className: "w-36 text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400"
      }
    ), displayNPS != null && /* @__PURE__ */ React.createElement("span", { className: "text-2xl font-bold " + (displayNPS >= 50 ? "text-green-600" : displayNPS >= 0 ? "text-yellow-600" : "text-red-600") }, displayNPS), npsManual && computed != null && /* @__PURE__ */ React.createElement(
      "button",
      {
        type: "button",
        onClick: () => {
          setNpsManual(false);
          setNps(String(computed));
        },
        className: "text-xs text-blue-500 hover:text-blue-700"
      },
      "\u21BA Auto"
    ))), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "block text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide" }, "Responses ", /* @__PURE__ */ React.createElement("span", { className: "font-normal text-gray-400 normal-case" }, "(optional)")), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-2" }, [
      ["Promoters", "promoters", promoters, setPromoters, "text-green-600"],
      ["Passives", "passives", passives, setPassives, "text-yellow-600"],
      ["Detractors", "detractors", detractors, setDetractors, "text-red-600"]
    ].map(([label, key, val, setter, col]) => /* @__PURE__ */ React.createElement("div", { key }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold mb-1 " + col }, label), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "number",
        min: "0",
        value: val,
        onChange: (e) => setter(e.target.value),
        placeholder: "0",
        className: "w-full text-sm border border-gray-200 rounded-xl px-2 py-1.5 text-center focus:outline-none focus:ring-1 focus:ring-blue-400"
      }
    )))), (Number(promoters) || Number(passives) || Number(detractors)) > 0 && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-1.5" }, Number(promoters) || 0, "P + ", Number(passives) || 0, "Pa + ", Number(detractors) || 0, "D = ", (Number(promoters) || 0) + (Number(passives) || 0) + (Number(detractors) || 0), " responses", computed != null && /* @__PURE__ */ React.createElement(React.Fragment, null, " \xB7 Auto NPS: ", /* @__PURE__ */ React.createElement("span", { className: "font-bold " + (computed >= 50 ? "text-green-600" : computed >= 0 ? "text-yellow-600" : "text-red-600") }, computed))))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3 px-6 pb-5" }, /* @__PURE__ */ React.createElement("button", { onClick: onClose, className: "btn-secondary flex-1 py-2.5" }, "Cancel"), /* @__PURE__ */ React.createElement("button", { onClick: handleSave, className: "btn-primary flex-1 py-2.5" }, "Save Score"))));
  }
  function ActionItemsPanel({ client, quarter, onUpdateClient }) {
    var _a;
    const [adding, setAdding] = React.useState(false);
    const [form, setForm] = React.useState({ title: "", assignee: "", dueDate: "" });
    const actions = ((_a = client == null ? void 0 : client.npsActions) == null ? void 0 : _a[quarter]) || [];
    const save = (items) => {
      if (!client || !onUpdateClient) return;
      onUpdateClient({ ...client, npsActions: { ...client.npsActions || {}, [quarter]: items } });
    };
    const toggle = (id) => save(actions.map((a) => a.id === id ? { ...a, completed: !a.completed } : a));
    const remove = (id) => save(actions.filter((a) => a.id !== id));
    const addItem = () => {
      if (!form.title.trim()) return;
      save([...actions, { id: "ai_" + Date.now(), title: form.title.trim(), assignee: form.assignee.trim(), dueDate: form.dueDate, completed: false }]);
      setForm({ title: "", assignee: "", dueDate: "" });
      setAdding(false);
    };
    const isOverdue = (a) => !a.completed && a.dueDate && new Date(a.dueDate) < /* @__PURE__ */ new Date();
    return /* @__PURE__ */ React.createElement("div", { className: "mt-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Action Items"), /* @__PURE__ */ React.createElement("button", { onClick: () => setAdding((v) => !v), className: "text-xs px-2 py-1 rounded-lg border border-gray-200 text-gray-500 hover:bg-gray-50" }, adding ? "\u2715 Cancel" : "\uFF0B Add")), adding && /* @__PURE__ */ React.createElement("div", { className: "mb-3 p-3 bg-gray-50 rounded-xl space-y-2" }, /* @__PURE__ */ React.createElement(
      "input",
      {
        className: "w-full text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 focus:outline-none focus:ring-1 focus:ring-blue-400",
        placeholder: "Action item title...",
        value: form.title,
        onChange: (e) => setForm((f) => ({ ...f, title: e.target.value })),
        onKeyDown: (e) => e.key === "Enter" && addItem()
      }
    ), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, /* @__PURE__ */ React.createElement(
      "input",
      {
        className: "flex-1 text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 focus:outline-none focus:ring-1 focus:ring-blue-400",
        placeholder: "Assignee",
        value: form.assignee,
        onChange: (e) => setForm((f) => ({ ...f, assignee: e.target.value }))
      }
    ), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "date",
        className: "text-sm border border-gray-200 rounded-lg px-2.5 py-1.5 focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: form.dueDate,
        onChange: (e) => setForm((f) => ({ ...f, dueDate: e.target.value }))
      }
    )), /* @__PURE__ */ React.createElement("button", { onClick: addItem, className: "btn-primary text-xs px-3 py-1.5 w-full" }, "Save Action Item")), actions.length === 0 && !adding && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-300 text-center py-2" }, "No action items yet"), /* @__PURE__ */ React.createElement("div", { className: "space-y-2" }, actions.map((a) => /* @__PURE__ */ React.createElement("div", { key: a.id, className: `flex items-start gap-2.5 p-2.5 rounded-xl border ${a.completed ? "border-gray-100 bg-gray-50 opacity-60" : isOverdue(a) ? "border-red-100 bg-red-50" : "border-gray-100 bg-white"}` }, /* @__PURE__ */ React.createElement("input", { type: "checkbox", className: "mt-0.5 cursor-pointer", checked: a.completed, onChange: () => toggle(a.id) }), /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: `text-sm font-medium leading-snug ${a.completed ? "line-through text-gray-400" : "text-gray-700"}` }, a.title), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 mt-0.5 flex-wrap" }, a.assignee && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "\u{1F464} ", a.assignee), a.dueDate && /* @__PURE__ */ React.createElement("span", { className: `text-xs ${isOverdue(a) ? "text-red-500 font-semibold" : "text-gray-400"}` }, "\u{1F4C5} ", a.dueDate, isOverdue(a) ? " (overdue)" : ""))), /* @__PURE__ */ React.createElement("button", { onClick: () => remove(a.id), className: "text-gray-200 hover:text-red-400 text-xs leading-none mt-0.5 shrink-0" }, "\u2715")))));
  }
  class NPSErrorBoundary extends React.Component {
    constructor(p) {
      super(p);
      this.state = { error: null };
    }
    static getDerivedStateFromError(e) {
      return { error: e };
    }
    componentDidCatch(error, info) {
      console.error("NPSView error:", error, info);
    }
    render() {
      if (this.state.error) return /* @__PURE__ */ React.createElement("div", { className: "p-8 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-red-500 font-semibold mb-2" }, "NPS View Error"), /* @__PURE__ */ React.createElement("div", { className: "text-sm text-gray-500" }, this.state.error.message));
      return this.props.children;
    }
  }
  function EditNPSModal({ clientData, origQtr, entry, qtrs, qlbl, onSave, onClose }) {
    var _a, _b, _c, _d;
    const [quarter, setQuarter] = React.useState(origQtr);
    const [nps, setNps] = React.useState(String((_a = entry.nps) != null ? _a : ""));
    const [promoters, setPromoters] = React.useState(String((_b = entry.promoters) != null ? _b : ""));
    const [passives, setPassives] = React.useState(String((_c = entry.passives) != null ? _c : ""));
    const [detractors, setDetractors] = React.useState(String((_d = entry.detractors) != null ? _d : ""));
    const handleSave = () => {
      const npsVal = parseInt(nps);
      if (isNaN(npsVal)) return;
      onSave({ clientData, origQtr, newQtr: quarter, nps: npsVal, promoters: parseInt(promoters) || 0, passives: parseInt(passives) || 0, detractors: parseInt(detractors) || 0 });
    };
    return /* @__PURE__ */ React.createElement("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.45)", zIndex: 1e3, display: "flex", alignItems: "center", justifyContent: "center" }, onClick: onClose }, /* @__PURE__ */ React.createElement("div", { style: { background: "#fff", borderRadius: 16, padding: 24, width: 360, boxShadow: "0 20px 60px rgba(0,0,0,0.2)" }, onClick: (e) => e.stopPropagation() }, /* @__PURE__ */ React.createElement("h3", { className: "font-bold text-gray-900 mb-1" }, "Edit NPS Entry"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-4" }, clientData.clientName), /* @__PURE__ */ React.createElement("div", { className: "space-y-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Quarter"), /* @__PURE__ */ React.createElement(
      "select",
      {
        className: "w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: quarter,
        onChange: (e) => setQuarter(e.target.value)
      },
      qtrs.map((q) => /* @__PURE__ */ React.createElement("option", { key: q, value: q }, qlbl[q] || q))
    )), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "NPS Score (-100 to 100)"), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "number",
        min: "-100",
        max: "100",
        className: "w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: nps,
        onChange: (e) => setNps(e.target.value)
      }
    )), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-2" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Promoters"), /* @__PURE__ */ React.createElement("input", { type: "number", min: "0", className: "w-full border border-gray-200 rounded-lg px-2.5 py-2 text-sm focus:outline-none", value: promoters, onChange: (e) => setPromoters(e.target.value) })), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Passives"), /* @__PURE__ */ React.createElement("input", { type: "number", min: "0", className: "w-full border border-gray-200 rounded-lg px-2.5 py-2 text-sm focus:outline-none", value: passives, onChange: (e) => setPassives(e.target.value) })), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Detractors"), /* @__PURE__ */ React.createElement("input", { type: "number", min: "0", className: "w-full border border-gray-200 rounded-lg px-2.5 py-2 text-sm focus:outline-none", value: detractors, onChange: (e) => setDetractors(e.target.value) })))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 mt-5" }, /* @__PURE__ */ React.createElement("button", { onClick: onClose, className: "flex-1 px-4 py-2 border border-gray-200 rounded-xl text-sm text-gray-600 hover:bg-gray-50" }, "Cancel"), /* @__PURE__ */ React.createElement("button", { onClick: handleSave, className: "flex-1 btn-primary px-4 py-2 text-sm" }, "Save Changes"))));
  }
  function NPSView({ clients, onSelectClient, onUpdateClient, platformFilter = "all", onSetPlatformFilter }) {
    var _a;
    const { canEdit } = useRole();
    const [selectedBrand, setSelectedBrand] = useState(null);
    const [filterCategory, setFilterCategory] = useState(null);
    const [npsClientSort, setNpsClientSort] = useState("nps-desc");
    const [selectedQtr, setSelectedQtr] = useState(null);
    const [qtrNotes, setQtrNotes] = useState("");
    const [npsOverviewTab, setNpsOverviewTab] = useState("scores");
    const [showAddNPS, setShowAddNPS] = useState(false);
    const [editingModal, setEditingModal] = useState(null);
    const activeClients = clients.filter((c) => !c.archived && (platformFilter === "all" || c.platform === platformFilter));
    const QTRS = ["JFM '26", "OND '25", "JAS '25", "AMJ '25", "JFM '25", "OND '24", "JAS '24", "AMJ '24", "JFM '24", "OND '23", "JAS '23", "AMJ '23"];
    const QLBL = { "JFM '26": "JFM'26", "OND '25": "OND'25", "JAS '25": "JAS'25", "AMJ '25": "AMJ'25", "JFM '25": "JFM'25", "OND '24": "OND'24", "JAS '24": "JAS'24", "AMJ '24": "AMJ'24", "JFM '24": "JFM'24", "OND '23": "OND'23", "JAS '23": "JAS'23", "AMJ '23": "AMJ'23" };
    const qtrRank = (q) => {
      const i = QTRS.indexOf(q);
      return i === -1 ? 999 : i;
    };
    const npsClients = useMemo(() => {
      const result = [];
      const seen = /* @__PURE__ */ new Set();
      Object.entries(NPS_DATA).forEach(([clientName, data]) => {
        const allClient = clients.find((c) => c.name === clientName || c.name.toLowerCase() === clientName.toLowerCase());
        if (allClient && allClient.archived) return;
        const client = activeClients.find((c) => c.name === clientName) || activeClients.find((c) => c.name.toLowerCase() === clientName.toLowerCase()) || activeClients.find((c) => c.name.toLowerCase().includes(clientName.toLowerCase()) || clientName.toLowerCase().includes(c.name.toLowerCase()));
        const manual = (client == null ? void 0 : client.npsHistory) || [];
        const manualQtrs = new Set(manual.map((e) => e.quarter));
        const merged = [...manual, ...data.history.filter((h) => !manualQtrs.has(h.quarter))].filter((h) => h.nps != null && !h._deleted).sort((a, b) => qtrRank(a.quarter) - qtrRank(b.quarter));
        const currentNPS = merged.length > 0 ? merged[0].nps : null;
        const prevNPS = merged.length > 1 ? merged[1].nps : null;
        const popChange = prevNPS == null ? data.popChange || "" : currentNPS > prevNPS ? "Improved" : currentNPS < prevNPS ? "Declined" : "No Change";
        const currentResponses = merged.length > 0 ? (merged[0].promoters || 0) + (merged[0].passives || 0) + (merged[0].detractors || 0) || data.currentResponses : data.currentResponses;
        result.push({ clientName, client, ...data, currentNPS, popChange, history: merged, currentResponses });
        seen.add(clientName);
        if (client) seen.add(client.name);
      });
      activeClients.forEach((c) => {
        if (seen.has(c.name)) return;
        const manual = c.npsHistory || [];
        const sorted = [...manual].filter((h) => h.nps != null && !h._deleted).sort((a, b) => qtrRank(a.quarter) - qtrRank(b.quarter));
        const legacy = c.nps != null && sorted.length === 0 ? [{ quarter: "AMJ '25", quarterFull: "Q1 FY26", nps: c.nps, promoters: 0, passives: 0, detractors: 0 }] : [];
        const history = sorted.length > 0 ? sorted : legacy;
        const currentNPS = history.length > 0 ? history[0].nps : null;
        const prevNPS = history.length > 1 ? history[1].nps : null;
        const popChange = prevNPS == null ? "" : currentNPS > prevNPS ? "Improved" : currentNPS < prevNPS ? "Declined" : "No Change";
        const currentResponses = history.length > 0 ? (history[0].promoters || 0) + (history[0].passives || 0) + (history[0].detractors || 0) : 0;
        result.push({ clientName: c.name, client: c, currentNPS, popChange, state: "", history, currentResponses });
      });
      return result.sort((a, b) => {
        if (a.currentNPS == null && b.currentNPS != null) return 1;
        if (a.currentNPS != null && b.currentNPS == null) return -1;
        if (a.currentNPS == null && b.currentNPS == null) return (a.clientName || "").localeCompare(b.clientName || "");
        return b.currentNPS - a.currentNPS;
      });
    }, [activeClients, clients]);
    const visibleNpsClients = platformFilter === "all" ? npsClients : npsClients.filter((d) => d.client != null);
    const withNPS = visibleNpsClients.filter((d) => d.currentNPS != null);
    const avgNPS = withNPS.length ? Math.round(withNPS.reduce((a, d) => a + d.currentNPS, 0) / withNPS.length) : null;
    const promoters = withNPS.filter((d) => d.currentNPS >= 50).length;
    const passives = withNPS.filter((d) => d.currentNPS >= 0 && d.currentNPS < 50).length;
    const detractors = withNPS.filter((d) => d.currentNPS < 0).length;
    const mostRecentQtr = QTRS.find((q) => visibleNpsClients.some((d) => {
      var _a2;
      return (_a2 = d.history) == null ? void 0 : _a2.some((h) => h.quarter === q);
    })) || null;
    const sortedClients = useMemo(() => {
      const arr = [...visibleNpsClients];
      if (npsClientSort === "az") return arr.sort((a, b) => (a.clientName || "").localeCompare(b.clientName || ""));
      if (npsClientSort === "za") return arr.sort((a, b) => (b.clientName || "").localeCompare(a.clientName || ""));
      if (npsClientSort === "seg") return arr.sort((a, b) => (a.state || "").localeCompare(b.state || ""));
      if (npsClientSort === "nps-asc") return arr.sort((a, b) => {
        if (a.currentNPS == null) return 1;
        if (b.currentNPS == null) return -1;
        return a.currentNPS - b.currentNPS;
      });
      return arr.sort((a, b) => {
        if (a.currentNPS == null) return 1;
        if (b.currentNPS == null) return -1;
        return b.currentNPS - a.currentNPS;
      });
    }, [visibleNpsClients, npsClientSort]);
    const handleSaveEdit = ({ clientData, origQtr, newQtr, nps: npsVal, promoters: p, passives: pa, detractors: d }) => {
      if (!clientData.client || !onUpdateClient) {
        setEditingModal(null);
        return;
      }
      let history = [...clientData.client.npsHistory || []];
      history = history.filter((e) => e.quarter !== origQtr);
      if (origQtr !== newQtr) {
        history = [...history, { quarter: origQtr, nps: null, _deleted: true }];
      }
      history = [...history, { quarter: newQtr, nps: npsVal, promoters: p || 0, passives: pa || 0, detractors: d || 0 }];
      onUpdateClient({ ...clientData.client, npsHistory: history });
      setEditingModal(null);
    };
    const brandDetail = selectedBrand ? visibleNpsClients.find((d) => d.clientName === selectedBrand) || npsClients.find((d) => d.clientName === selectedBrand) : null;
    React.useEffect(() => {
      setSelectedQtr(null);
      setQtrNotes("");
    }, [selectedBrand]);
    React.useEffect(() => {
      var _a2, _b;
      if (selectedQtr && (brandDetail == null ? void 0 : brandDetail.client)) {
        setQtrNotes(((_a2 = brandDetail.client.npsNotes) == null ? void 0 : _a2[selectedQtr]) || ((_b = brandDetail.client.npsQuarterNotes) == null ? void 0 : _b[selectedQtr]) || "");
      } else {
        setQtrNotes("");
      }
    }, [selectedQtr, selectedBrand]);
    const saveQtrNotes = () => {
      if (!(brandDetail == null ? void 0 : brandDetail.client) || !onUpdateClient || !selectedQtr) return;
      onUpdateClient({ ...brandDetail.client, npsNotes: { ...brandDetail.client.npsNotes || {}, [selectedQtr]: qtrNotes } });
    };
    if (filterCategory) {
      const list = filterCategory === "promoters" ? withNPS.filter((d) => d.currentNPS >= 50) : filterCategory === "passives" ? withNPS.filter((d) => d.currentNPS >= 0 && d.currentNPS < 50) : withNPS.filter((d) => d.currentNPS < 0);
      const label = filterCategory === "promoters" ? "Promoters (NPS \u2265 50)" : filterCategory === "passives" ? "Passives (NPS 0\u201349)" : "Detractors (NPS < 0)";
      const col = filterCategory === "promoters" ? "text-green-600" : filterCategory === "passives" ? "text-yellow-600" : "text-red-600";
      return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-4" }, /* @__PURE__ */ React.createElement("button", { onClick: () => setFilterCategory(null), className: "text-sm font-semibold flex items-center gap-1", style: { color: "#2080BD" } }, "\u2190 NPS Overview"), /* @__PURE__ */ React.createElement("h2", { className: `text-xl font-bold ${col}` }, label), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "NPS"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "vs Prior"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Quarter"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Responses"))), /* @__PURE__ */ React.createElement("tbody", null, list.map((d) => {
        const npsCol = d.currentNPS >= 50 ? "text-green-600" : d.currentNPS >= 0 ? "text-yellow-600" : "text-red-600";
        const prior = d.history && d.history.length > 1 ? d.history[1].nps : null;
        const diff = prior != null ? d.currentNPS - prior : null;
        return /* @__PURE__ */ React.createElement("tr", { key: d.clientName, className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer", onClick: () => {
          setFilterCategory(null);
          setSelectedBrand(d.clientName);
        } }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement("div", { className: "font-semibold text-gray-800" }, d.clientName), d.client && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, d.client.execSponsor)), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement("span", { className: `text-lg font-bold ${npsCol}` }, d.currentNPS)), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, diff != null ? /* @__PURE__ */ React.createElement("span", { className: `text-sm font-semibold ${diff > 0 ? "text-green-600" : diff < 0 ? "text-red-500" : "text-gray-400"}` }, diff > 0 ? "\u2191" : diff < 0 ? "\u2193" : "\u2192", " ", diff > 0 ? "+" : "", diff) : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-xs text-gray-500" }, d.history && d.history[0] ? d.history[0].quarter : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-xs text-gray-500" }, d.currentResponses || "\u2014"));
      })))));
    }
    if (brandDetail) {
      const hist = [...brandDetail.history || []].reverse();
      const allV = hist.map((h) => h.nps);
      const cMin = Math.min(...allV, -100), cMax = Math.max(...allV, 100), cRange = cMax - cMin || 1;
      const W = 520, H = 55;
      const hasNotes = (q) => {
        var _a2, _b, _c, _d;
        return !!(((_b = (_a2 = brandDetail.client) == null ? void 0 : _a2.npsNotes) == null ? void 0 : _b[q]) || ((_d = (_c = brandDetail.client) == null ? void 0 : _c.npsQuarterNotes) == null ? void 0 : _d[q]));
      };
      const getEntrySource = (h) => {
        var _a2;
        const manual = ((_a2 = brandDetail.client) == null ? void 0 : _a2.npsHistory) || [];
        return manual.find((e) => e.quarter === h.quarter) ? "manual" : "seed";
      };
      return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-3" }, editingModal && /* @__PURE__ */ React.createElement(
        EditNPSModal,
        {
          clientData: editingModal.clientData,
          origQtr: editingModal.origQtr,
          entry: editingModal.entry,
          qtrs: QTRS,
          qlbl: QLBL,
          onSave: handleSaveEdit,
          onClose: () => setEditingModal(null)
        }
      ), /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between" }, /* @__PURE__ */ React.createElement("button", { onClick: () => setSelectedBrand(null), className: "text-sm font-semibold flex items-center gap-1", style: { color: "#2080BD" } }, "\u2190 All NPS"), brandDetail.client && /* @__PURE__ */ React.createElement("button", { onClick: () => onSelectClient(brandDetail.client.id), className: "btn-primary text-xs px-3 py-1.5" }, "Open Profile \u2192")), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3" }, /* @__PURE__ */ React.createElement("div", { style: { width: 38, height: 38, borderRadius: 11, background: "linear-gradient(135deg,#2080BD,#4fa3d1)", display: "flex", alignItems: "center", justifyContent: "center", color: "#fff", fontSize: 16, fontWeight: 900, flexShrink: 0 } }, brandDetail.clientName[0]), /* @__PURE__ */ React.createElement("div", { className: "flex-1" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 flex-wrap" }, /* @__PURE__ */ React.createElement("h1", { className: "text-lg font-bold text-gray-900" }, brandDetail.clientName), brandDetail.client && /* @__PURE__ */ React.createElement(PlatformBadge, { platform: brandDetail.client.platform }), brandDetail.state && /* @__PURE__ */ React.createElement("span", { className: "bg-gray-100 text-gray-500 rounded-lg px-2 py-0.5 text-xs font-semibold" }, brandDetail.state)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 flex items-center gap-3 flex-wrap mt-0.5" }, /* @__PURE__ */ React.createElement("span", null, "Current NPS: ", /* @__PURE__ */ React.createElement("span", { className: `font-bold text-sm ${brandDetail.currentNPS >= 50 ? "text-green-600" : brandDetail.currentNPS >= 0 ? "text-yellow-600" : "text-red-600"}` }, (_a = brandDetail.currentNPS) != null ? _a : "\u2014")), brandDetail.popChange && /* @__PURE__ */ React.createElement(TrendArrow, { popChange: brandDetail.popChange }), brandDetail.currentResponses > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-gray-400" }, brandDetail.currentResponses, " responses")))), hist.length >= 2 && /* @__PURE__ */ React.createElement("div", { className: "card", style: { padding: "12px 16px 8px" } }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wide mb-1" }, "NPS Trend \u2014 ", hist.length, " Quarters"), /* @__PURE__ */ React.createElement("svg", { width: "100%", viewBox: "0 0 " + (W + 40) + " " + (H + 26), style: { overflow: "visible", display: "block" } }, /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement("linearGradient", { id: "ng3", x1: "0", y1: "0", x2: "0", y2: "1" }, /* @__PURE__ */ React.createElement("stop", { offset: "0%", stopColor: "#2080BD", stopOpacity: "0.13" }), /* @__PURE__ */ React.createElement("stop", { offset: "100%", stopColor: "#2080BD", stopOpacity: "0.01" }))), cMin < 0 && cMax > 0 && /* @__PURE__ */ React.createElement("line", { x1: "20", y1: H - (0 - cMin) / cRange * H, x2: W + 20, y2: H - (0 - cMin) / cRange * H, stroke: "#e2e8f0", strokeWidth: "1", strokeDasharray: "4,3" }), (() => {
        const npsCol = (v) => v >= 50 ? "#22c55e" : v >= 0 ? "#eab308" : "#ef4444";
        const pts2 = hist.map((h, i) => ({ x: 20 + i / (hist.length - 1) * W, y: H - (h.nps - cMin) / cRange * H, col: npsCol(h.nps) }));
        return /* @__PURE__ */ React.createElement(React.Fragment, null, pts2.slice(1).map((pt, i) => /* @__PURE__ */ React.createElement("line", { key: i, x1: pts2[i].x, y1: pts2[i].y, x2: pt.x, y2: pt.y, stroke: pt.col, strokeWidth: "2.5", strokeLinecap: "round" })));
      })(), hist.map((h, i) => {
        const x = 20 + i / (hist.length - 1) * W;
        const y = H - (h.nps - cMin) / cRange * H;
        const col = h.nps >= 50 ? "#22c55e" : h.nps >= 0 ? "#eab308" : "#ef4444";
        const isActive = selectedQtr === h.quarter;
        return /* @__PURE__ */ React.createElement("g", { key: i, style: { cursor: "pointer" }, onClick: () => setSelectedQtr(selectedQtr === h.quarter ? null : h.quarter) }, /* @__PURE__ */ React.createElement("circle", { cx: x, cy: y, r: isActive ? 6 : 4, fill: col, stroke: isActive ? "#1e293b" : "#fff", strokeWidth: isActive ? 2 : 1.5 }), /* @__PURE__ */ React.createElement("text", { x, y: y - 9, textAnchor: "middle", fontSize: "10", fontWeight: "bold", fill: col }, h.nps), /* @__PURE__ */ React.createElement("text", { x, y: H + 16, textAnchor: "middle", fontSize: "9", fill: isActive ? "#1e293b" : "#94a3b8", fontWeight: isActive ? "bold" : "normal" }, QLBL[h.quarter] || h.quarter), hasNotes(h.quarter) && /* @__PURE__ */ React.createElement("circle", { cx: x, cy: H + 22, r: "2", fill: "#2080BD" }));
      }))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 overflow-x-auto pb-1" }, hist.slice().reverse().map((h) => {
        const isActive = selectedQtr === h.quarter;
        const noteExists = hasNotes(h.quarter);
        const base = h.nps >= 50 ? "border-green-200 bg-green-50 text-green-700" : h.nps >= 0 ? "border-yellow-200 bg-yellow-50 text-yellow-700" : "border-red-200 bg-red-50 text-red-700";
        return /* @__PURE__ */ React.createElement("div", { key: h.quarter, className: `relative rounded-xl px-3 py-2 text-center border-2 shrink-0 transition-all ${isActive ? h.nps >= 50 ? "border-green-500 bg-green-100 text-green-800" : h.nps >= 0 ? "border-yellow-400 bg-yellow-100 text-yellow-800" : "border-red-400 bg-red-100 text-red-800" : base}`, style: { minWidth: 66 } }, canEdit && /* @__PURE__ */ React.createElement(
          "button",
          {
            className: "absolute top-1 right-1 text-gray-300 hover:text-blue-400 text-xs leading-none",
            style: { fontSize: 10, padding: "1px 3px" },
            title: "Edit this entry",
            onClick: (e) => {
              e.stopPropagation();
              setEditingModal({ clientData: brandDetail, origQtr: h.quarter, entry: h });
            }
          },
          "\u270E"
        ), /* @__PURE__ */ React.createElement("div", { className: "text-xs font-medium opacity-70 leading-tight cursor-pointer", onClick: () => setSelectedQtr(selectedQtr === h.quarter ? null : h.quarter) }, h.quarter), /* @__PURE__ */ React.createElement("div", { className: "text-lg font-bold leading-tight cursor-pointer", onClick: () => setSelectedQtr(selectedQtr === h.quarter ? null : h.quarter) }, h.nps), h.promoters || h.passives || h.detractors ? /* @__PURE__ */ React.createElement("div", { className: "text-xs opacity-50 leading-tight" }, h.promoters, "P\xB7", h.passives, "N\xB7", h.detractors, "D") : null, noteExists && /* @__PURE__ */ React.createElement("div", { className: "text-xs mt-0.5", style: { color: "#2080BD" } }, "\u25CF notes"));
      })), selectedQtr ? /* @__PURE__ */ React.createElement("div", { className: "card", style: { padding: "14px 16px" } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-3" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-600 uppercase tracking-wide" }, "Quarter Notes \u2014 ", selectedQtr), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-300" }, "Auto-saves on blur")), /* @__PURE__ */ React.createElement(
        "textarea",
        {
          className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2.5 focus:outline-none focus:ring-1 focus:ring-blue-400 resize-none text-gray-700 leading-relaxed",
          rows: 4,
          placeholder: "Context, root cause, what changed this quarter...",
          value: qtrNotes,
          onChange: (e) => setQtrNotes(e.target.value),
          onBlur: saveQtrNotes
        }
      ), /* @__PURE__ */ React.createElement(
        ActionItemsPanel,
        {
          client: brandDetail.client,
          quarter: selectedQtr,
          onUpdateClient
        }
      )) : /* @__PURE__ */ React.createElement("div", { className: "text-center py-3 text-xs text-gray-400" }, "\u2191 Select a quarter to view notes and action items"));
    }
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, editingModal && /* @__PURE__ */ React.createElement(
      EditNPSModal,
      {
        clientData: editingModal.clientData,
        origQtr: editingModal.origQtr,
        entry: editingModal.entry,
        qtrs: QTRS,
        qlbl: QLBL,
        onSave: handleSaveEdit,
        onClose: () => setEditingModal(null)
      }
    ), showAddNPS && /* @__PURE__ */ React.createElement(AddNPSModal, { clients: activeClients, qtrs: QTRS, onClose: () => setShowAddNPS(false), onSave: (clientObj, entry) => {
      const updated = { ...clientObj, npsHistory: [...(clientObj.npsHistory || []).filter((e) => e.quarter !== entry.quarter), entry] };
      onUpdateClient(updated);
      setShowAddNPS(false);
    } }), /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between flex-wrap gap-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "NPS Overview"), mostRecentQtr && /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "Most recent survey: ", mostRecentQtr)), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 flex-wrap" }, /* @__PURE__ */ React.createElement("div", { className: "flex rounded-xl overflow-hidden border border-gray-200" }, ["all", "inspire", "capillary"].map((p) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: p,
        onClick: () => onSetPlatformFilter && onSetPlatformFilter(p),
        className: `px-3 py-1.5 text-xs font-semibold transition-all ${platformFilter === p ? "text-white" : "bg-white text-gray-500 hover:bg-gray-50"}`,
        style: platformFilter === p ? { background: "#2080BD" } : {}
      },
      p === "all" ? "All" : p === "inspire" ? "\u2726 Inspire" : "\u25C8 Capillary"
    ))), canEdit && /* @__PURE__ */ React.createElement("button", { onClick: () => setShowAddNPS(true), className: "btn-primary text-sm flex items-center gap-1.5 shrink-0" }, /* @__PURE__ */ React.createElement("span", { style: { fontSize: 16, lineHeight: 1 } }, "\uFF0B"), " Add NPS Score"))), (() => {
      const openCount = activeClients.reduce((n, c) => {
        if (!c.npsActions) return n;
        return n + Object.values(c.npsActions).flat().filter((a) => !a.completed).length;
      }, 0);
      return /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 border-b border-gray-100 -mt-1 pb-0" }, [["scores", "\u{1F4CA} Scores"], ["plans", "\u2705 Action Plans"]].map(([k, l]) => /* @__PURE__ */ React.createElement(
        "button",
        {
          key: k,
          onClick: () => setNpsOverviewTab(k),
          className: `px-4 py-2.5 text-sm font-semibold border-b-2 transition-all flex items-center gap-1.5 ${npsOverviewTab === k ? "border-blue-500 text-blue-600" : "border-transparent text-gray-500 hover:text-gray-700"}`
        },
        l,
        k === "plans" && openCount > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-xs font-bold bg-blue-100 text-blue-600 rounded-full px-1.5 py-0.5 leading-none" }, openCount)
      )));
    })(), npsOverviewTab === "plans" && /* @__PURE__ */ React.createElement(NPSActionPlans, { clients: activeClients, onUpdateClient }), npsOverviewTab === "scores" && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-4 gap-4" }, /* @__PURE__ */ React.createElement("div", { className: "card text-center cursor-pointer hover:shadow-md transition-all", onClick: () => setFilterCategory(null) }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl font-bold mb-1 " + (avgNPS >= 50 ? "text-green-600" : avgNPS >= 0 ? "text-yellow-600" : "text-red-500") }, avgNPS != null ? avgNPS : "\u2014"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Avg NPS", mostRecentQtr ? " \xB7 " + mostRecentQtr : ""), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-300 mt-1" }, withNPS.length, " clients surveyed")), /* @__PURE__ */ React.createElement("div", { className: "card text-center cursor-pointer hover:shadow-md transition-all", onClick: () => setFilterCategory("promoters") }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl font-bold text-green-600 mb-1" }, promoters), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Promoters (\u226550)"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-green-500 mt-1" }, withNPS.length ? Math.round(promoters / withNPS.length * 100) : 0, "%")), /* @__PURE__ */ React.createElement("div", { className: "card text-center cursor-pointer hover:shadow-md transition-all", onClick: () => setFilterCategory("passives") }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl font-bold text-yellow-500 mb-1" }, passives), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Passives (0\u201349)"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-yellow-500 mt-1" }, withNPS.length ? Math.round(passives / withNPS.length * 100) : 0, "%")), /* @__PURE__ */ React.createElement("div", { className: "card text-center cursor-pointer hover:shadow-md transition-all", onClick: () => setFilterCategory("detractors") }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl font-bold text-red-500 mb-1" }, detractors), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, "Detractors (<0)"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-red-400 mt-1" }, withNPS.length ? Math.round(detractors / withNPS.length * 100) : 0, "%"))), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-3" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700" }, "Score Distribution"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, withNPS.reduce((a, d) => a + (d.currentResponses || 0), 0), " total responses")), /* @__PURE__ */ React.createElement("div", { className: "h-3 rounded-full overflow-hidden flex mb-2" }, promoters > 0 && /* @__PURE__ */ React.createElement("div", { className: "bg-green-500", style: { width: promoters / withNPS.length * 100 + "%" } }), passives > 0 && /* @__PURE__ */ React.createElement("div", { className: "bg-yellow-400", style: { width: passives / withNPS.length * 100 + "%" } }), detractors > 0 && /* @__PURE__ */ React.createElement("div", { className: "bg-red-500", style: { width: detractors / withNPS.length * 100 + "%" } })), /* @__PURE__ */ React.createElement("div", { className: "flex gap-4 text-xs text-gray-500" }, /* @__PURE__ */ React.createElement("span", null, /* @__PURE__ */ React.createElement("span", { className: "inline-block w-2.5 h-2.5 rounded-full bg-green-500 mr-1" }), "Promoters ", promoters, " \xB7 ", withNPS.length ? Math.round(promoters / withNPS.length * 100) : 0, "%"), /* @__PURE__ */ React.createElement("span", null, /* @__PURE__ */ React.createElement("span", { className: "inline-block w-2.5 h-2.5 rounded-full bg-yellow-400 mr-1" }), "Passives ", passives, " \xB7 ", withNPS.length ? Math.round(passives / withNPS.length * 100) : 0, "%"), /* @__PURE__ */ React.createElement("span", null, /* @__PURE__ */ React.createElement("span", { className: "inline-block w-2.5 h-2.5 rounded-full bg-red-500 mr-1" }), "Detractors ", detractors, " \xB7 ", withNPS.length ? Math.round(detractors / withNPS.length * 100) : 0, "%"))), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-5 py-4 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between flex-wrap gap-2" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700" }, "By Client", mostRecentQtr ? " \u2014 " + mostRecentQtr : ""), /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 flex-wrap" }, [["nps-desc", "NPS \u2193"], ["nps-asc", "NPS \u2191"], ["az", "A\u2192Z"], ["za", "Z\u2192A"]].map(([k, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: k,
        onClick: () => setNpsClientSort(k),
        className: `text-xs px-2.5 py-1 rounded-lg border transition-all ${npsClientSort === k ? "border-blue-400 text-blue-600 bg-blue-50" : "border-gray-200 text-gray-500 hover:bg-gray-50"}`
      },
      l
    ))))), /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "NPS"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "vs Prior Qtr"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Trend"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Responses"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Health"))), /* @__PURE__ */ React.createElement("tbody", null, sortedClients.filter((d) => d.currentNPS != null).map((d) => {
      const nps = d.currentNPS;
      const npsCol = nps >= 50 ? "text-green-600" : nps >= 0 ? "text-yellow-600" : "text-red-600";
      const priorQtr = d.history && d.history.length > 1 ? d.history[1] : null;
      const diff = nps != null && priorQtr ? nps - priorQtr.nps : null;
      const histRev = d.history ? [...d.history].reverse() : [];
      return /* @__PURE__ */ React.createElement("tr", { key: d.clientName, className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer transition-colors", onClick: () => setSelectedBrand(d.clientName) }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement("div", { className: "font-semibold text-gray-800" }, d.clientName), d.client && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, d.client.execSponsor)), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement("span", { className: "text-lg font-bold " + npsCol }, nps)), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, diff != null ? /* @__PURE__ */ React.createElement("span", { className: "text-sm font-semibold " + (diff > 0 ? "text-green-600" : diff < 0 ? "text-red-500" : "text-gray-400") }, diff > 0 ? "\u2191" : diff < 0 ? "\u2193" : "\u2192", " ", diff > 0 ? "+" : "", diff) : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement(SparkLine, { history: histRev, width: 100, height: 26 })), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-500 text-xs" }, d.currentResponses || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, d.client ? /* @__PURE__ */ React.createElement(HealthDot, { health: getCurrentHealth(d.client), size: 22 }) : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 text-xs" }, "N/A")));
    })))), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("h3", { className: "font-semibold text-gray-700 mb-4" }, "Quarter-over-Quarter \xB7 All History"), /* @__PURE__ */ React.createElement("div", { className: "overflow-x-auto" }, /* @__PURE__ */ React.createElement("table", { className: "text-xs", style: { minWidth: "800px", width: "100%" } }, /* @__PURE__ */ React.createElement("thead", null, /* @__PURE__ */ React.createElement("tr", { className: "border-b border-gray-100" }, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2 px-3 font-semibold text-gray-500 w-36" }, "Client"), QTRS.map((q) => /* @__PURE__ */ React.createElement("th", { key: q, className: "text-center py-2 px-2 font-semibold text-gray-500" }, QLBL[q])))), /* @__PURE__ */ React.createElement("tbody", null, visibleNpsClients.filter((d) => d.history && d.history.length > 1).map((d) => {
      const hmap = {};
      (d.history || []).forEach((h) => {
        hmap[h.quarter] = h.nps;
      });
      return /* @__PURE__ */ React.createElement("tr", { key: d.clientName, className: "border-b border-gray-50 hover:bg-gray-50 cursor-pointer", onClick: () => setSelectedBrand(d.clientName) }, /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 font-semibold text-gray-700" }, d.clientName), QTRS.map((q) => {
        const v = hmap[q];
        return /* @__PURE__ */ React.createElement("td", { key: q, className: "py-2 px-2 text-center" }, v != null ? /* @__PURE__ */ React.createElement("span", { style: { borderRadius: "5px", padding: "1px 7px", fontWeight: "bold", fontSize: "11px", ...v >= 50 ? { background: "#dcfce7", color: "#15803d" } : v >= 0 ? { background: "#fef9c3", color: "#854d0e" } : { background: "#fee2e2", color: "#b91c1c" } } }, v) : /* @__PURE__ */ React.createElement("span", { style: { color: "#d1d5db" } }, "\u2014"));
      }));
    })))))));
  }
  function NPSActionPlans({ clients, onUpdateClient }) {
    const { canEdit } = useRole();
    const [filterStatus, setFilterStatus] = React.useState("all");
    const [filterQtr, setFilterQtr] = React.useState("all");
    const [filterAssignee, setFilterAssignee] = React.useState("all");
    const [search, setSearch] = React.useState("");
    const [groupByClient, setGroupByClient] = React.useState(false);
    const [editingItemId, setEditingItemId] = React.useState(null);
    const [editForm, setEditForm] = React.useState({ title: "", assignee: "", dueDate: "", details: "" });
    const hOrder = { "Red": 0, "Yellow": 1, "Green": 2 };
    const healthBorderCol = (h) => h === "Red" ? "#ef4444" : h === "Yellow" ? "#eab308" : "#22c55e";
    const allItems = React.useMemo(() => {
      const rows = [];
      clients.forEach((client) => {
        if (!client.npsActions) return;
        Object.entries(client.npsActions).forEach(([quarter, items]) => {
          (items || []).forEach((item) => {
            rows.push({ ...item, clientName: client.name, clientId: client.id, quarter, _client: client });
          });
        });
      });
      return rows.sort((a, b) => {
        var _a, _b;
        if (a.completed !== b.completed) return a.completed ? 1 : -1;
        const now = /* @__PURE__ */ new Date();
        const aOver = !a.completed && a.dueDate && new Date(a.dueDate) < now;
        const bOver = !b.completed && b.dueDate && new Date(b.dueDate) < now;
        if (aOver !== bOver) return aOver ? -1 : 1;
        const aH = (_a = hOrder[getCurrentHealth(a._client)]) != null ? _a : 3;
        const bH = (_b = hOrder[getCurrentHealth(b._client)]) != null ? _b : 3;
        if (aH !== bH) return aH - bH;
        if (a.dueDate && b.dueDate) return new Date(a.dueDate) - new Date(b.dueDate);
        if (a.dueDate) return -1;
        if (b.dueDate) return 1;
        return a.clientName.localeCompare(b.clientName);
      });
    }, [clients]);
    const quarters = React.useMemo(() => ["all", ...[...new Set(allItems.map((i) => i.quarter))]], [allItems]);
    const assignees = React.useMemo(() => ["all", ...[...new Set(allItems.map((i) => i.assignee).filter(Boolean))].sort()], [allItems]);
    const filtered = allItems.filter((item) => {
      if (filterStatus === "open" && item.completed) return false;
      if (filterStatus === "done" && !item.completed) return false;
      if (filterQtr !== "all" && item.quarter !== filterQtr) return false;
      if (filterAssignee !== "all" && item.assignee !== filterAssignee) return false;
      if (search && !item.title.toLowerCase().includes(search.toLowerCase()) && !item.clientName.toLowerCase().includes(search.toLowerCase())) return false;
      return true;
    });
    const toggleItem = (item) => {
      if (!canEdit) return;
      const client = item._client;
      const updated = (client.npsActions[item.quarter] || []).map((a) => a.id === item.id ? { ...a, completed: !a.completed } : a);
      onUpdateClient({ ...client, npsActions: { ...client.npsActions, [item.quarter]: updated } });
    };
    const updateItem = (item, changes) => {
      if (!canEdit) return;
      const client = item._client;
      const updated = (client.npsActions[item.quarter] || []).map((a) => a.id === item.id ? { ...a, ...changes } : a);
      onUpdateClient({ ...client, npsActions: { ...client.npsActions, [item.quarter]: updated } });
    };
    const startEdit = (item) => {
      setEditingItemId(item.id + item.quarter);
      setEditForm({ title: item.title || "", assignee: item.assignee || "", dueDate: item.dueDate || "", details: item.details || "" });
    };
    const saveEdit = (item) => {
      if (editForm.title.trim()) {
        updateItem(item, { title: editForm.title.trim(), assignee: editForm.assignee, dueDate: editForm.dueDate, details: editForm.details });
      }
      setEditingItemId(null);
    };
    const openCount = allItems.filter((i) => !i.completed).length;
    const doneCount = allItems.filter((i) => i.completed).length;
    const overdueCount = allItems.filter((i) => !i.completed && i.dueDate && new Date(i.dueDate) < /* @__PURE__ */ new Date()).length;
    const totalCount = allItems.length;
    const pctDone = totalCount > 0 ? Math.round(doneCount / totalCount * 100) : 0;
    const grouped = React.useMemo(() => {
      const map = {};
      filtered.forEach((item) => {
        if (!map[item.clientName]) map[item.clientName] = { client: item._client, items: [] };
        map[item.clientName].items.push(item);
      });
      return Object.values(map).sort((a, b) => {
        var _a, _b;
        const aH = (_a = hOrder[getCurrentHealth(a.client)]) != null ? _a : 3;
        const bH = (_b = hOrder[getCurrentHealth(b.client)]) != null ? _b : 3;
        return aH - bH;
      });
    }, [filtered]);
    const ItemRow = ({ item, showClient = true }) => {
      var _a;
      const isOverdue = !item.completed && item.dueDate && new Date(item.dueDate) < /* @__PURE__ */ new Date();
      const health = getCurrentHealth(item._client);
      const borderCol = healthBorderCol(health);
      const isEditing = editingItemId === item.id + item.quarter;
      if (isEditing) {
        return /* @__PURE__ */ React.createElement(
          "div",
          {
            className: "flex items-start gap-3 px-4 py-3 border-b border-blue-100 bg-blue-50",
            style: { borderLeft: "3px solid #2080BD" }
          },
          /* @__PURE__ */ React.createElement("input", { type: "checkbox", className: "mt-1 cursor-pointer shrink-0", checked: !!item.completed, onChange: () => toggleItem(item), disabled: !canEdit }),
          /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0 space-y-2" },
            /* @__PURE__ */ React.createElement("input", {
              autoFocus: true,
              value: editForm.title,
              onChange: (e) => setEditForm((f) => ({ ...f, title: e.target.value })),
              className: "w-full text-sm border border-blue-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-400 bg-white",
              placeholder: "Action item title"
            }),
            /* @__PURE__ */ React.createElement("textarea", {
              value: editForm.details,
              onChange: (e) => setEditForm((f) => ({ ...f, details: e.target.value })),
              className: "w-full text-xs border border-gray-200 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-400 resize-none bg-white",
              rows: 2,
              placeholder: "Details (optional)"
            }),
            /* @__PURE__ */ React.createElement("div", { className: "flex gap-2 flex-wrap" },
              /* @__PURE__ */ React.createElement("input", {
                value: editForm.assignee,
                onChange: (e) => setEditForm((f) => ({ ...f, assignee: e.target.value })),
                className: "text-xs border border-gray-200 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-400 bg-white",
                placeholder: "Assignee",
                style: { minWidth: "120px", flex: "1" }
              }),
              /* @__PURE__ */ React.createElement("input", {
                type: "date",
                value: editForm.dueDate,
                onChange: (e) => setEditForm((f) => ({ ...f, dueDate: e.target.value })),
                className: "text-xs border border-gray-200 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-400 bg-white"
              })
            ),
            /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" },
              /* @__PURE__ */ React.createElement("button", {
                onClick: () => saveEdit(item),
                className: "text-xs text-white rounded px-3 py-1 font-semibold hover:opacity-90",
                style: { background: "#2080BD" }
              }, "Save"),
              /* @__PURE__ */ React.createElement("button", {
                onClick: () => setEditingItemId(null),
                className: "text-xs bg-white text-gray-500 border border-gray-200 rounded px-3 py-1 hover:bg-gray-50"
              }, "Cancel")
            )
          )
        );
      }
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          className: `flex items-start gap-3 px-4 py-3 border-b border-gray-50 transition-colors ${item.completed ? "" : "hover:bg-blue-50"} ${canEdit ? "cursor-pointer" : ""}`,
          style: { borderLeft: `3px solid ${item.completed ? "#e5e7eb" : borderCol}`, background: item.completed ? "#fafafa" : "" },
          onClick: (e) => { if (e.target.type === "checkbox") return; if (canEdit) startEdit(item); }
        },
        /* @__PURE__ */ React.createElement("input", { type: "checkbox", className: "mt-0.5 cursor-pointer shrink-0", checked: !!item.completed, onChange: (e) => { e.stopPropagation(); toggleItem(item); }, disabled: !canEdit }),
        /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" },
          /* @__PURE__ */ React.createElement(
            "div",
            {
              className: `text-sm font-medium leading-snug ${item.completed ? "line-through text-gray-400" : "text-gray-800"}`,
              style: { wordBreak: "break-word" }
            },
            item.title
          ),
          item.details && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mt-0.5", style: { wordBreak: "break-word" } }, item.details),
          /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3 mt-1 flex-wrap" },
            showClient && /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" },
              /* @__PURE__ */ React.createElement(HealthDot, { health, size: 8 }),
              /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-600" }, item.clientName),
              ((_a = item._client) == null ? void 0 : _a.nps) != null && /* @__PURE__ */ React.createElement("span", { className: `text-xs font-bold ${item._client.nps >= 50 ? "text-green-600" : item._client.nps >= 0 ? "text-yellow-600" : "text-red-500"}` }, "NPS ", item._client.nps)
            ),
            /* @__PURE__ */ React.createElement("span", { className: "text-xs bg-blue-50 text-blue-600 font-semibold rounded-md px-1.5 py-0.5" }, item.quarter),
            item.assignee && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "\u{1F464} ", item.assignee),
            item.dueDate && /* @__PURE__ */ React.createElement("span", { className: `text-xs font-medium ${isOverdue ? "text-red-500" : "text-gray-400"}` }, isOverdue ? "\u26A0\uFE0F Overdue \xB7 " : "\u{1F4C5} ", item.dueDate),
            canEdit && !item.completed && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-blue-400 ml-auto" }, "\u270F\uFE0F")
          )
        )
      );
    };
    return /* @__PURE__ */ React.createElement("div", { className: "space-y-4" }, /* @__PURE__ */ React.createElement("div", { className: "card", style: { padding: "16px" } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-sm font-semibold text-gray-700" }, "Overall Progress"), /* @__PURE__ */ React.createElement("span", { className: "text-sm font-bold text-gray-800" }, doneCount, " / ", totalCount, " complete")), /* @__PURE__ */ React.createElement("div", { className: "h-2.5 rounded-full overflow-hidden", style: { background: "#e2e8f0" } }, /* @__PURE__ */ React.createElement("div", { className: "h-full rounded-full transition-all", style: { width: pctDone + "%", background: "linear-gradient(90deg,#2080BD,#22c55e)" } })), /* @__PURE__ */ React.createElement("div", { className: "flex gap-4 mt-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-sm font-bold text-blue-600" }, openCount), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "Open")), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-sm font-bold text-green-600" }, doneCount), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "Done")), overdueCount > 0 && /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-sm font-bold text-red-500" }, overdueCount), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "Overdue")), /* @__PURE__ */ React.createElement("div", { className: "ml-auto text-xs font-bold text-gray-500" }, pctDone, "%"))), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3 flex-wrap items-center" }, /* @__PURE__ */ React.createElement("div", { className: "flex rounded-lg overflow-hidden border border-gray-200 shrink-0" }, [["open", "Open"], ["done", "Done"], ["all", "All"]].map(([k, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: k,
        onClick: () => setFilterStatus(k),
        className: `px-3 py-1.5 text-xs font-semibold transition-all ${filterStatus === k ? "text-white" : "bg-white text-gray-500 hover:bg-gray-50"}`,
        style: filterStatus === k ? { background: "#2080BD" } : {}
      },
      l
    ))), /* @__PURE__ */ React.createElement(
      "select",
      {
        value: filterQtr,
        onChange: (e) => setFilterQtr(e.target.value),
        className: "text-xs border border-gray-200 rounded-lg px-2.5 py-1.5 text-gray-600 bg-white focus:outline-none focus:ring-1 focus:ring-blue-400"
      },
      quarters.map((q) => /* @__PURE__ */ React.createElement("option", { key: q, value: q }, q === "all" ? "All Quarters" : q))
    ), /* @__PURE__ */ React.createElement(
      "select",
      {
        value: filterAssignee,
        onChange: (e) => setFilterAssignee(e.target.value),
        className: "text-xs border border-gray-200 rounded-lg px-2.5 py-1.5 text-gray-600 bg-white focus:outline-none focus:ring-1 focus:ring-blue-400"
      },
      assignees.map((a) => /* @__PURE__ */ React.createElement("option", { key: a, value: a }, a === "all" ? "All Assignees" : a))
    ), /* @__PURE__ */ React.createElement(
      "input",
      {
        value: search,
        onChange: (e) => setSearch(e.target.value),
        placeholder: "Search client or item...",
        className: "text-xs border border-gray-200 rounded-lg px-2.5 py-1.5 text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-400 flex-1 min-w-32"
      }
    ), /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: () => setGroupByClient((v) => !v),
        className: `px-3 py-1.5 text-xs font-semibold rounded-lg border transition-all ${groupByClient ? "text-white border-blue-400" : "bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,
        style: groupByClient ? { background: "#2080BD" } : {}
      },
      groupByClient ? "\u229E By Client" : "\u229E By Client"
    ), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 shrink-0" }, filtered.length, " item", filtered.length !== 1 ? "s" : "")), filtered.length === 0 ? /* @__PURE__ */ React.createElement("div", { className: "card text-center py-12" }, /* @__PURE__ */ React.createElement("div", { className: "text-3xl mb-3" }, allItems.length === 0 ? "\u{1F4CB}" : "\u{1F50D}"), /* @__PURE__ */ React.createElement("div", { className: "text-sm font-semibold text-gray-600 mb-1" }, allItems.length === 0 ? "No action items yet" : "No items match your filters"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, allItems.length === 0 ? "Open a client's NPS quarter and add items from the notes panel." : "Try adjusting your filters above.")) : groupByClient ? /* @__PURE__ */ React.createElement("div", { className: "space-y-3" }, grouped.map(({ client, items }) => {
      const health = getCurrentHealth(client);
      const clientDone = items.filter((i) => i.completed).length;
      const clientTotal = items.length;
      const clientPct = Math.round(clientDone / clientTotal * 100);
      const borderCol = healthBorderCol(health);
      return /* @__PURE__ */ React.createElement("div", { key: (client == null ? void 0 : client.id) || items[0].clientName, className: "card p-0 overflow-hidden", style: { borderLeft: `4px solid ${borderCol}` } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-3 px-4 py-3 border-b border-gray-100", style: { background: "#f8fafc" } }, /* @__PURE__ */ React.createElement(HealthDot, { health, size: 10 }), /* @__PURE__ */ React.createElement("span", { className: "font-bold text-sm text-gray-800" }, items[0].clientName), (client == null ? void 0 : client.nps) != null && /* @__PURE__ */ React.createElement("span", { className: `text-xs font-bold ${client.nps >= 50 ? "text-green-600" : client.nps >= 0 ? "text-yellow-600" : "text-red-500"}` }, "NPS ", client.nps), /* @__PURE__ */ React.createElement("div", { className: "flex-1 mx-2" }, /* @__PURE__ */ React.createElement("div", { className: "h-1.5 rounded-full overflow-hidden", style: { background: "#e2e8f0" } }, /* @__PURE__ */ React.createElement("div", { className: "h-full rounded-full", style: { width: clientPct + "%", background: clientPct === 100 ? "#22c55e" : "#2080BD" } }))), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 shrink-0" }, clientDone, "/", clientTotal)), items.map((item) => /* @__PURE__ */ React.createElement(ItemRow, { key: item.id, item, showClient: false })));
    })) : /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, filtered.map((item) => /* @__PURE__ */ React.createElement(ItemRow, { key: item.id + item.clientId + item.quarter, item, showClient: true }))));
  }
  function AllOppsView({ clients, opps, onSelectClient, onSelectOpp, onUpdateOpp }) {
    const [pipeline, setPipeline] = useState("all");
    const [showClosed, setShowClosed] = useState(false);
    const [dragOverStage, setDragOverStage] = useState(null);
    const didDragRef = useRef(false);
    const filtered = opps.filter(
      (o) => pipeline === "all" ? true : pipeline === "inspire" ? o.pipeline === "inspire" : o.pipeline !== "inspire"
    );
    const ACTIVE_STAGES = ["Lead", "Enquiry", "Discovery", "Solution Validation", "Negotiation"];
    const CLOSED_STAGES = ["Closed-Won", "Closed-Lost"];
    const STAGE_COLOR = {
      "Lead": "#64748b",
      "Enquiry": "#7c3aed",
      "Discovery": "#3b82f6",
      "Solution Validation": "#0d9488",
      "Negotiation": "#f97316",
      "Closed-Won": "#22c55e",
      "Closed-Lost": "#ef4444"
    };
    const byStatus = [...ACTIVE_STAGES, ...CLOSED_STAGES].reduce((acc, s) => {
      acc[s] = filtered.filter((o) => o.status === s);
      return acc;
    }, {});
    const activeOpps = filtered.filter((o) => !["Closed-Won", "Closed-Lost"].includes(o.status));
    const wonOpps = filtered.filter((o) => o.status === "Closed-Won");
    const activeVal = activeOpps.reduce((a, o) => a + (Number(o.value) || 0), 0);
    const wonVal = wonOpps.reduce((a, o) => a + (Number(o.value) || 0), 0);
    const clientName = (opp) => {
      var _a;
      return ((_a = clients.find((c) => c.id === opp.clientId)) == null ? void 0 : _a.name) || opp.group || "\u2014";
    };
    const shortCat = (cat) => (cat || "").replace("Category 1", "Cat 1").replace("Category 2", "Cat 2").replace("Category 3", "Cat 3").replace(" \u2014 ", " \xB7 ").replace("Inflation / Variables / Renewal Upsell", "Renewal Upsell").replace("Product and Services Upsell", "Product Upsell").replace("New Business Unit / Brand / Market Addition", "New Market").replace("One Time Revenue", "One Time").replace("One time Revenue", "One Time");
    const handleDragStart = (e, opp) => {
      e.dataTransfer.setData("oppId", opp.id);
      e.dataTransfer.effectAllowed = "move";
      didDragRef.current = true;
    };
    const handleDragEnd = () => {
      setDragOverStage(null);
      setTimeout(() => {
        didDragRef.current = false;
      }, 50);
    };
    const handleDrop = (e, stage) => {
      e.preventDefault();
      const oppId = e.dataTransfer.getData("oppId");
      const opp = opps.find((o) => o.id === oppId);
      if (opp && opp.status !== stage && onUpdateOpp) {
        onUpdateOpp({ ...opp, status: stage, lastUpdated: (/* @__PURE__ */ new Date()).toLocaleDateString() });
      }
      setDragOverStage(null);
    };
    const OppCard = ({ opp, dimmed = false }) => {
      const cn = clientName(opp);
      const col = opp.status === "Closed-Won" ? "text-green-600" : opp.status === "Closed-Lost" ? "text-red-400" : "text-blue-600";
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          draggable: true,
          onDragStart: (e) => handleDragStart(e, opp),
          onDragEnd: handleDragEnd,
          className: `card cursor-grab hover:shadow-md hover:scale-[1.01] transition-all ${dimmed ? "opacity-70" : ""}`,
          style: { padding: "9px 11px", userSelect: "none" },
          onClick: () => {
            if (didDragRef.current) return;
            if (onSelectOpp) onSelectOpp(opp.id);
            else {
              const cl = clients.find((c) => c.id === opp.clientId);
              if (cl) onSelectClient(cl.id);
            }
          }
        },
        /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 truncate mb-0.5" }, cn),
        /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-800 leading-snug mb-1.5", style: { display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" } }, opp.name),
        opp.value > 0 && /* @__PURE__ */ React.createElement("div", { className: `text-sm font-bold ${col}` }, fmt$(opp.value)),
        /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mt-1 gap-1" }, opp.category && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 truncate" }, shortCat(opp.category)), opp.owner && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 shrink-0" }, opp.owner)),
        opp.targetQtr && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-300 mt-0.5" }, String(opp.targetQtr).startsWith("FY") ? opp.targetQtr : "Q" + opp.targetQtr)
      );
    };
    const KanbanCol = ({ stage, dimmed }) => {
      const stagOpps = byStatus[stage] || [];
      const stageVal = stagOpps.reduce((a, o) => a + (Number(o.value) || 0), 0);
      const isOver = dragOverStage === stage;
      const dropColor = STAGE_COLOR[stage] || "#2080BD";
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          style: { minWidth: 0 },
          onDragOver: (e) => {
            e.preventDefault();
            e.dataTransfer.dropEffect = "move";
            if (dragOverStage !== stage) setDragOverStage(stage);
          },
          onDragLeave: (e) => {
            if (!e.currentTarget.contains(e.relatedTarget)) setDragOverStage(null);
          },
          onDrop: (e) => handleDrop(e, stage)
        },
        /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-2 px-0.5" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { style: { width: 7, height: 7, borderRadius: "50%", background: STAGE_COLOR[stage], display: "inline-block", flexShrink: 0 } }), /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-600" }, stage), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400 bg-gray-100 rounded-full px-1.5 py-0.5 leading-none" }, stagOpps.length)), stageVal > 0 && /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500" }, fmt$(stageVal))),
        /* @__PURE__ */ React.createElement(
          "div",
          {
            className: "space-y-2",
            style: {
              minHeight: "60px",
              padding: isOver ? "6px" : "0px",
              background: isOver ? `${dropColor}18` : "transparent",
              border: isOver ? `2px dashed ${dropColor}` : "2px solid transparent",
              borderRadius: "12px",
              transition: "all 0.15s ease"
            }
          },
          stagOpps.map((o) => /* @__PURE__ */ React.createElement(OppCard, { key: o.id, opp: o, dimmed })),
          stagOpps.length === 0 && !isOver && /* @__PURE__ */ React.createElement("div", { className: "rounded-xl border-2 border-dashed border-gray-100 py-5 text-center text-xs text-gray-300" }, "Empty"),
          stagOpps.length === 0 && isOver && /* @__PURE__ */ React.createElement("div", { className: "rounded-xl py-5 text-center text-xs font-semibold", style: { color: dropColor } }, "Drop here")
        )
      );
    };
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "All Opportunities"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "Pipeline \xB7 FY26")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, ["all", "inspire", "capillary"].map((p) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: p,
        onClick: () => setPipeline(p),
        className: `px-4 py-2 rounded-xl text-sm font-semibold transition-all ${pipeline === p ? "text-white" : "bg-white text-gray-600 hover:bg-gray-50 shadow-sm border border-gray-100"}`,
        style: pipeline === p ? { background: "#2080BD" } : {}
      },
      p === "all" ? "All" : p === "inspire" ? "\u2726 Inspire" : "\u25C8 Capillary"
    )))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-4 gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "card text-center", style: { padding: "12px" } }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold", style: { color: "#2080BD" } }, fmt$(activeVal)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, "Active Pipeline")), /* @__PURE__ */ React.createElement("div", { className: "card text-center", style: { padding: "12px" } }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-green-600" }, fmt$(wonVal)), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, "Won FY26")), /* @__PURE__ */ React.createElement("div", { className: "card text-center", style: { padding: "12px" } }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-gray-800" }, activeOpps.length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, "Active Opps")), /* @__PURE__ */ React.createElement("div", { className: "card text-center", style: { padding: "12px" } }, /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-gray-800" }, wonOpps.length), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, "Deals Won"))), /* @__PURE__ */ React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(5,1fr)", gap: "12px", alignItems: "start" } }, ACTIVE_STAGES.map((s) => /* @__PURE__ */ React.createElement(KanbanCol, { key: s, stage: s }))), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: () => setShowClosed(!showClosed),
        className: "text-xs font-semibold text-gray-500 flex items-center gap-1.5 hover:text-gray-700 transition-colors"
      },
      /* @__PURE__ */ React.createElement("span", null, showClosed ? "\u25BC" : "\u25B6"),
      "Closed Deals \xB7 ",
      (byStatus["Closed-Won"] || []).length + (byStatus["Closed-Lost"] || []).length,
      " opps",
      /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 font-normal" }, "(", fmt$(wonVal), " won)")
    ), showClosed && /* @__PURE__ */ React.createElement("div", { className: "overflow-x-auto pb-2 mt-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex gap-3", style: { alignItems: "flex-start", minWidth: "max-content" } }, CLOSED_STAGES.map((s) => /* @__PURE__ */ React.createElement(KanbanCol, { key: s, stage: s, dimmed: true }))))));
  }
  function ArchivedView({ clients, onSelectClient, onUnarchive }) {
    const { canEdit } = useRole();
    const archived = clients.filter((c) => c.archived);
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "Archived Clients"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "Churned or inactive accounts \u2014 ", archived.length, " client", archived.length !== 1 ? "s" : "")), archived.length === 0 ? /* @__PURE__ */ React.createElement("div", { className: "card text-center py-12" }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl mb-3" }, "\u{1F4C2}"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-500 font-semibold" }, "No archived clients."), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-1" }, "Archive churned clients from their profile to keep your dashboards clean.")) : /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500" }, "Platform"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500" }, "Archived Date"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500" }, "Last Engagement"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500" }, "Account Lead"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500" }, "Actions"))), /* @__PURE__ */ React.createElement("tbody", null, archived.map((c) => /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "border-b border-gray-50 hover:bg-gray-50" }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 font-semibold text-gray-600 cursor-pointer hover:text-blue-600", onClick: () => onSelectClient(c.id) }, c.name), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement(PlatformBadge, { platform: c.platform })), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-500" }, c.archivedDate || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-500" }, c.lastEngagement || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-gray-500" }, c.execSponsor || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, canEdit && /* @__PURE__ */ React.createElement("button", { onClick: () => onUnarchive(c.id), className: "text-xs font-semibold text-blue-600 hover:text-blue-800 transition-colors" }, "\u21A9 Restore"))))))));
  }
  function ModalWrap({ title, onClose, children }) {
    return /* @__PURE__ */ React.createElement("div", { className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4", onClick: (e) => e.target === e.currentTarget && onClose() }, /* @__PURE__ */ React.createElement("div", { className: "bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between px-6 py-4 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-900" }, title), /* @__PURE__ */ React.createElement("button", { onClick: onClose, className: "text-gray-400 hover:text-gray-600 text-2xl leading-none" }, "\xD7")), /* @__PURE__ */ React.createElement("div", { className: "px-6 py-5" }, children)));
  }
  function AddClientModal({ onAdd, onClose }) {
    const [form, setForm] = useState({ name: "", platform: "inspire", execSponsor: "", geography: "US", arr: null, aop: null, nps: null, notes: "" });
    const inp = (key, label, type = "text") => /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, label), /* @__PURE__ */ React.createElement(
      "input",
      {
        type,
        className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: form[key] || "",
        onChange: (e) => setForm({ ...form, [key]: type === "number" ? Number(e.target.value) || null : e.target.value })
      }
    ));
    const handleAdd = () => {
      if (!form.name.trim()) return;
      const id = "c_new_" + Date.now();
      onAdd({ ...form, id, healthHistory: {}, comments: [], archived: false, archivedDate: null, lastEngagement: null, members: null, tenure: null, contractLength: null, lastRenewal: null, nextRenewal: null, contracted: null, forecast: null, trend: null });
    };
    return /* @__PURE__ */ React.createElement(ModalWrap, { title: "Add New Client", onClose }, inp("name", "Client Name"), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Platform"), /* @__PURE__ */ React.createElement("select", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none", value: form.platform, onChange: (e) => setForm({ ...form, platform: e.target.value }) }, /* @__PURE__ */ React.createElement("option", { value: "inspire" }, "\u2726 Inspire"), /* @__PURE__ */ React.createElement("option", { value: "capillary" }, "\u25C8 Capillary"))), inp("execSponsor", "Account Lead"), inp("geography", "Geography"), inp("arr", "ARR ($)", "number"), inp("aop", "AOP ($)", "number"), /* @__PURE__ */ React.createElement("div", { className: "mb-4" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Notes"), /* @__PURE__ */ React.createElement("textarea", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none", rows: 3, value: form.notes, onChange: (e) => setForm({ ...form, notes: e.target.value }) })), /* @__PURE__ */ React.createElement("button", { onClick: handleAdd, className: "btn-primary w-full py-2.5" }, "Add Client"));
  }
  function AddOppModal({ clients, defaultClientId, onAdd, onClose }) {
    const activeClients = clients.filter((c) => !c.archived);
    const [form, setForm] = useState({ clientId: defaultClientId || "", name: "", category: "", owner: "", retainerType: "One Time", value: null, status: "Discovery", targetQtr: "", probability: "", pipeline: "capillary", insights: "", actionPlan: "", supportNeeded: "" });
    const inp = (key, label, type = "text") => /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, label), /* @__PURE__ */ React.createElement(
      "input",
      {
        type,
        className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: form[key] || "",
        onChange: (e) => setForm({ ...form, [key]: type === "number" ? Number(e.target.value) || null : e.target.value })
      }
    ));
    const handleAdd = () => {
      if (!form.name.trim() || !form.clientId) return;
      onAdd({ ...form, id: "opp_" + Date.now(), lastUpdated: (/* @__PURE__ */ new Date()).toLocaleDateString() });
    };
    return /* @__PURE__ */ React.createElement(ModalWrap, { title: "Add Opportunity", onClose }, /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Client"), /* @__PURE__ */ React.createElement("select", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none", value: form.clientId, onChange: (e) => setForm({ ...form, clientId: e.target.value }) }, /* @__PURE__ */ React.createElement("option", { value: "" }, "Select client\u2026"), activeClients.map((c) => /* @__PURE__ */ React.createElement("option", { key: c.id, value: c.id }, c.name)))), inp("name", "Opportunity Name"), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Category"), /* @__PURE__ */ React.createElement("select", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400", value: form.category, onChange: (e) => setForm({ ...form, category: e.target.value }) }, /* @__PURE__ */ React.createElement("option", { value: "" }, "Select category\u2026"), /* @__PURE__ */ React.createElement("option", { value: "Cat 1 - Inflation / Variables / Renewal Upsell" }, "Cat 1 \u2014 Inflation / Variables / Renewal Upsell"), /* @__PURE__ */ React.createElement("option", { value: "Cat 2 - Product and Services Upsell" }, "Cat 2 \u2014 Product and Services Upsell"), /* @__PURE__ */ React.createElement("option", { value: "Cat 3 - New Business Unit / Brand / Market Addition" }, "Cat 3 \u2014 New Business Unit / Brand / Market Addition"), /* @__PURE__ */ React.createElement("option", { value: "Setup / CR - One Time Revenue" }, "Setup / CR \u2014 One Time Revenue"))), inp("owner", "Owner"), inp("value", "Value ($)", "number"), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Status"), /* @__PURE__ */ React.createElement("select", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none", value: form.status, onChange: (e) => setForm({ ...form, status: e.target.value }) }, STATUSES.map((s) => /* @__PURE__ */ React.createElement("option", { key: s }, s)))), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Pipeline"), /* @__PURE__ */ React.createElement("select", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none", value: form.pipeline, onChange: (e) => setForm({ ...form, pipeline: e.target.value }) }, /* @__PURE__ */ React.createElement("option", { value: "capillary" }, "\u25C8 Capillary"), /* @__PURE__ */ React.createElement("option", { value: "inspire" }, "\u2726 Inspire"))), inp("targetQtr", "Target Quarter"), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Probability"), /* @__PURE__ */ React.createElement("select", { className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400", value: form.probability || "", onChange: (e) => setForm({ ...form, probability: e.target.value }) }, /* @__PURE__ */ React.createElement("option", { value: "" }, "\u2014 Select \u2014"), ["0%", "<25%", "25%", "50%", "75%", "100%"].map((p) => /* @__PURE__ */ React.createElement("option", { key: p }, p)))), /* @__PURE__ */ React.createElement("div", { className: "mb-3" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Insights"), /* @__PURE__ */ React.createElement(
      "textarea",
      {
        rows: 3,
        className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400 resize-y",
        placeholder: "Key insights, context, or background\u2026",
        value: form.insights || "",
        onChange: (e) => setForm({ ...form, insights: e.target.value })
      }
    )), /* @__PURE__ */ React.createElement("button", { onClick: handleAdd, className: "btn-primary w-full py-2.5" }, "Add Opportunity"));
  }
  function ArchiveModal({ client, onConfirm, onCancel }) {
    const [lastEngagement, setLastEngagement] = useState((/* @__PURE__ */ new Date()).toISOString().split("T")[0]);
    return /* @__PURE__ */ React.createElement("div", { className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" }, /* @__PURE__ */ React.createElement("div", { className: "bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6" }, /* @__PURE__ */ React.createElement("div", { className: "text-center mb-5" }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl mb-3" }, "\u{1F4E6}"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-800 font-bold text-lg" }, "Archive ", client.name, "?"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-500 text-sm mt-1" }, "This client will be hidden from main dashboards and moved to Archived Clients.")), /* @__PURE__ */ React.createElement("div", { className: "mb-4" }, /* @__PURE__ */ React.createElement("label", { className: "text-xs font-semibold text-gray-500 block mb-1" }, "Last Date of Engagement"), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "date",
        className: "w-full text-sm border border-gray-200 rounded-xl px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-400",
        value: lastEngagement,
        onChange: (e) => setLastEngagement(e.target.value)
      }
    )), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3" }, /* @__PURE__ */ React.createElement("button", { onClick: onCancel, className: "btn-secondary flex-1 py-2.5" }, "Cancel"), /* @__PURE__ */ React.createElement("button", { onClick: () => onConfirm(lastEngagement), className: "btn-primary flex-1 py-2.5" }, "Archive Client"))));
  }
  function ImportModal({ clients, onImportOpps, onImportHealth, onImportNPS, onClose }) {
    const [tab, setTab] = useState("opps");
    const [result, setResult] = useState(null);
    const fileRef = useRef();
    const TABS = [
      { id: "opps", label: "\u{1F331} Opportunities" },
      { id: "health", label: "\u{1F3E5} Client Health" },
      { id: "nps", label: "\u{1F4CA} NPS Scores" }
    ];
    const handleFile = (e) => {
      const file = e.target.files[0];
      if (!file) return;
      setResult(null);
      const reader = new FileReader();
      reader.onload = (ev) => {
        try {
          const wb = XLSX.read(ev.target.result, { type: "binary" });
          const ws = wb.Sheets[wb.SheetNames[0]];
          const rows = XLSX.utils.sheet_to_json(ws, { defval: "" });
          let msg = "";
          if (tab === "opps") {
            const newOpps = rows.filter((r) => r["Opportunity Name"]).map((r, i) => {
              const client = clients.find((c) => c.name.toLowerCase() === String(r["Client Name"] || "").toLowerCase().trim());
              return {
                id: "opp_imp_" + Date.now() + "_" + i,
                clientId: client ? client.id : "",
                group: r["Client Name"] || "",
                name: r["Opportunity Name"] || "",
                category: r["Category"] || "",
                owner: r["Owner"] || "",
                retainerType: r["Type"] || "",
                value: Number(r["Value ($)"]) || null,
                status: r["Status"] || "Discovery",
                targetQtr: r["Target Quarter"] || "",
                pipeline: String(r["Pipeline"] || "capillary").toLowerCase() === "inspire" ? "inspire" : "capillary",
                insights: r["Insights"] || "",
                actionPlan: r["Action Plan"] || "",
                supportNeeded: r["Support Needed"] || "",
                lastUpdated: (/* @__PURE__ */ new Date()).toLocaleDateString()
              };
            });
            onImportOpps(newOpps);
            msg = `Imported ${newOpps.length} opportunities (${newOpps.filter((o) => o.clientId).length} matched to clients).`;
          } else if (tab === "health") {
            const MONTHS = { "Oct-25": "2025-10", "Nov-25": "2025-11", "Dec-25": "2025-12", "Jan-26": "2026-01", "Feb-26": "2026-02" };
            let updated = 0;
            const updates = {};
            rows.forEach((r) => {
              const name = String(r["Client Name"] || "").trim();
              if (!name) return;
              const client = clients.find((c) => c.name.toLowerCase() === name.toLowerCase());
              if (!client) return;
              const patch = {};
              Object.entries(MONTHS).forEach(([col, key]) => {
                const val = String(r[col] || "").trim();
                if (["Green", "Yellow", "Red"].includes(val)) patch[key] = val;
                else if (val === "" || val.toLowerCase() === "none" || val.toLowerCase() === "n/a") patch[key] = null;
              });
              updates[client.id] = patch;
              updated++;
            });
            onImportHealth(updates);
            msg = `Updated health ratings for ${updated} clients.`;
          } else if (tab === "nps") {
            let updated = 0;
            const updates = {};
            rows.forEach((r) => {
              const name = String(r["Client Name"] || "").trim();
              const score = r["NPS Score"];
              if (!name || score === "") return;
              const client = clients.find((c) => c.name.toLowerCase() === name.toLowerCase());
              if (!client) return;
              updates[client.id] = { nps: Number(score) };
              updated++;
            });
            onImportNPS(updates);
            msg = `Updated NPS scores for ${updated} clients.`;
          }
          setResult({ ok: true, msg });
          e.target.value = "";
        } catch (err) {
          setResult({ ok: false, msg: "Error: " + err.message });
        }
      };
      reader.readAsBinaryString(file);
    };
    return /* @__PURE__ */ React.createElement("div", { className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4", onClick: (e) => e.target === e.currentTarget && onClose() }, /* @__PURE__ */ React.createElement("div", { className: "bg-white rounded-2xl shadow-2xl w-full max-w-lg" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between px-6 py-4 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("h2", { className: "font-bold text-gray-900" }, "Import Data"), /* @__PURE__ */ React.createElement("button", { onClick: onClose, className: "text-gray-400 hover:text-gray-600 text-2xl leading-none" }, "\xD7")), /* @__PURE__ */ React.createElement("div", { className: "px-6 pt-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 bg-gray-100 rounded-xl p-1 mb-5" }, TABS.map((t) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: t.id,
        onClick: () => {
          setTab(t.id);
          setResult(null);
        },
        className: "flex-1 rounded-lg py-2 text-xs font-semibold transition-all " + (tab === t.id ? "bg-white shadow text-gray-800" : "text-gray-500 hover:text-gray-700")
      },
      t.label
    ))), /* @__PURE__ */ React.createElement("div", { className: "mb-4 p-3 bg-gray-50 rounded-xl text-xs text-gray-500 leading-relaxed" }, tab === "opps" && /* @__PURE__ */ React.createElement("div", null, "Required columns: ", /* @__PURE__ */ React.createElement("strong", null, "Client Name, Opportunity Name, Category, Owner, Type, Value ($), Status, Target Quarter, Pipeline, Insights, Action Plan, Support Needed")), tab === "health" && /* @__PURE__ */ React.createElement("div", null, "Required columns: ", /* @__PURE__ */ React.createElement("strong", null, "Client Name, Oct-25, Nov-25, Dec-25, Jan-26, Feb-26"), /* @__PURE__ */ React.createElement("br", null), "Values: ", /* @__PURE__ */ React.createElement("em", null, "Green"), ", ", /* @__PURE__ */ React.createElement("em", null, "Yellow"), ", ", /* @__PURE__ */ React.createElement("em", null, "Red"), ", or leave blank to clear."), tab === "nps" && /* @__PURE__ */ React.createElement("div", null, "Required columns: ", /* @__PURE__ */ React.createElement("strong", null, "Client Name, NPS Score, Quarter, Responses, Promoters, Passives, Detractors"), /* @__PURE__ */ React.createElement("br", null), "NPS Score: number from -100 to 100.")), result && /* @__PURE__ */ React.createElement("div", { className: "mb-4 p-3 rounded-xl text-sm font-medium " + (result.ok ? "bg-green-50 text-green-700" : "bg-red-50 text-red-700") }, result.ok ? "\u2705 " : "\u274C ", result.msg), /* @__PURE__ */ React.createElement("input", { ref: fileRef, type: "file", accept: ".xlsx,.xls,.csv", className: "hidden", onChange: handleFile })), /* @__PURE__ */ React.createElement("div", { className: "px-6 pb-6 flex gap-3" }, /* @__PURE__ */ React.createElement("button", { onClick: () => fileRef.current.click(), className: "btn-primary flex-1 py-2.5 text-sm" }, "\u{1F4C2} Choose File & Import"), /* @__PURE__ */ React.createElement("button", { onClick: onClose, className: "btn-secondary px-4 py-2.5 text-sm" }, "Close"))));
  }
  function Toast({ message, onUndo, onDismiss }) {
    useEffect(() => {
      const t = setTimeout(onDismiss, 5e3);
      return () => clearTimeout(t);
    }, []);
    return /* @__PURE__ */ React.createElement("div", { className: "toast" }, /* @__PURE__ */ React.createElement("span", null, message), onUndo && /* @__PURE__ */ React.createElement("button", { onClick: onUndo, className: "text-blue-400 hover:text-blue-300 font-bold ml-2" }, "Undo"), /* @__PURE__ */ React.createElement("button", { onClick: onDismiss, className: "text-gray-500 hover:text-gray-300 ml-1" }, "\xD7"));
  }
  function WhitespaceView({ clients, onSelectClient, onUpdateClient }) {
    const [sortBy, setSortBy] = React.useState("name");
    const [activeFilter, setActiveFilter] = React.useState("all");
    const allActive = clients.filter((c) => !c.archived);
    const clientARR = (c) => Number(c.platform === "inspire" ? c.arr : c.aop) || 0;
    const fmtV = (v) => !v && v !== 0 ? "\u2014" : v >= 1e6 ? "$" + (v / 1e6).toFixed(2) + "M" : v >= 1e3 ? "$" + (v / 1e3).toFixed(0) + "K" : "$" + Math.round(v);
    const isLegacy = (c) => LEGACY_PLATFORMS.includes(c.platform);
    const isCore = (c) => !LEGACY_PLATFORMS.includes(c.platform);
    const isEnterprise = (c) => clientARR(c) >= ENTERPRISE_ARR_THRESHOLD;
    const ownedProds = (c) => (c.products || []).filter((p) => CORE_PRODUCTS.includes(p));
    const unownedProds = (c) => CORE_PRODUCTS.filter((p) => !(c.products || []).includes(p));
    const whitespace = (c) => CORE_PRODUCTS.length - ownedProds(c).length;
    const isHighWS = (c) => whitespace(c) >= WHITESPACE_HIGH_THRESHOLD;
    const daysUntilRenewal = (dateStr) => {
      if (!dateStr) return null;
      const d = new Date(dateStr);
      if (isNaN(d)) return null;
      return Math.round((d - Date.now()) / 864e5);
    };
    const isMigrationCandidate = (c) => {
      if (!isLegacy(c)) return false;
      const days = daysUntilRenewal(c.nextRenewal);
      return days === null || days <= 548;
    };
    const getSuggestedExpansion = (c) => {
      if (isLegacy(c)) return { label: "Strategic: Migration", color: "#dc2626", bg: "#fef2f2" };
      const owned = ownedProds(c);
      const unowned = unownedProds(c);
      if (owned.length === 0) return { label: "Start with Loyalty+", color: "#7c3aed", bg: "#f5f3ff" };
      if (owned.length >= CORE_PRODUCTS.length) return { label: "Fully Attached", color: "#16a34a", bg: "#f0fdf4" };
      if (!owned.includes("CDP+") && (owned.includes("Insights+") || owned.includes("Engage+")))
        return { label: "High Fit: CDP+", color: "#2080BD", bg: "#eff6ff" };
      const PROD_ORDER = ["Loyalty+", "Engage+", "Insights+", "Rewards+", "CDP+"];
      const nextProd = PROD_ORDER.find((p) => !owned.includes(p));
      if (nextProd) return { label: `Medium Fit: ${nextProd}`, color: "#ca8a04", bg: "#fefce8" };
      return { label: "Review Portfolio", color: "#6b7280", bg: "#f9fafb" };
    };
    const filtered = React.useMemo(() => {
      let list = allActive;
      switch (activeFilter) {
        case "legacy":
          list = list.filter(isLegacy);
          break;
        case "core-lt2":
          list = list.filter((c) => isCore(c) && ownedProds(c).length < 2);
          break;
        case "ent-lt3":
          list = list.filter((c) => isEnterprise(c) && ownedProds(c).length < 3);
          break;
        case "renewal-12":
          list = list.filter((c) => {
            const d = daysUntilRenewal(c.nextRenewal);
            return d !== null && d <= 365;
          });
          break;
        case "high-arr-low":
          list = list.filter((c) => isEnterprise(c) && whitespace(c) >= 2);
          break;
      }
      return list;
    }, [allActive, activeFilter]);
    const sorted = [...filtered].sort((a, b) => {
      var _a, _b;
      if (sortBy === "name") return a.name.localeCompare(b.name);
      if (sortBy === "arr-desc") return clientARR(b) - clientARR(a);
      if (sortBy === "products-asc") return ownedProds(a).length - ownedProds(b).length;
      if (sortBy === "renewal") {
        const da = (_a = daysUntilRenewal(a.nextRenewal)) != null ? _a : 9999;
        const db = (_b = daysUntilRenewal(b.nextRenewal)) != null ? _b : 9999;
        return da - db;
      }
      return whitespace(b) - whitespace(a) || clientARR(b) - clientARR(a);
    });
    const FILTERS = [
      ["all", "All Accounts"],
      ["legacy", "Legacy Only"],
      ["core-lt2", "Core < 2 Products"],
      ["ent-lt3", "Enterprise < 3 Products"],
      ["renewal-12", "Renewal < 12 Months"],
      ["high-arr-low", "High ARR + Low Attach"]
    ];
    const SORTS = [
      ["whitespace-desc", "Expansion Score \u2193"],
      ["arr-desc", "ARR \u2193"],
      ["products-asc", "Products \u2191"],
      ["renewal", "Renewal Soon"],
      ["name", "A\u2192Z"]
    ];
    const totalARR = allActive.reduce((a, c) => a + clientARR(c), 0);
    const coreClients = allActive.filter(isCore);
    const legacyClients = allActive.filter(isLegacy);
    const coreARR = coreClients.reduce((a, c) => a + clientARR(c), 0);
    const legacyARR = legacyClients.reduce((a, c) => a + clientARR(c), 0);
    const migCandidates = allActive.filter(isMigrationCandidate).length;
    const highWSAccts = allActive.filter(isHighWS).length;
    const entClients = coreClients.filter(isEnterprise);
    const avgProds = entClients.length > 0 ? (entClients.reduce((a, c) => a + ownedProds(c).length, 0) / entClients.length).toFixed(1) : "\u2014";
    const corePct = totalARR > 0 ? Math.round(coreARR / totalARR * 100) : 0;
    const legacyPct = totalARR > 0 ? Math.round(legacyARR / totalARR * 100) : 0;
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between flex-wrap gap-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "Expansion Opportunities"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "Platform penetration, product & services attach rates, and expansion targets"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-5 gap-3" }, [
      { label: "Core SaaS ARR", val: corePct + "%", sub: fmtV(coreARR), col: "#16a34a" },
      { label: "Legacy ARR", val: legacyPct + "%", sub: fmtV(legacyARR), col: "#dc2626" },
      { label: "Avg P&S / Enterprise", val: String(avgProds), sub: ">$1M ARR threshold", col: "#2080BD" },
      { label: "Migration Candidates", val: String(migCandidates), sub: "Legacy \xB7 renew <18mo", col: "#ca8a04" },
      { label: "High Expansion Accts", val: String(highWSAccts), sub: "3+ unattached products", col: "#7c3aed" }
    ].map(({ label, val, sub, col }) => /* @__PURE__ */ React.createElement("div", { key: label, className: "card text-center py-3" }, /* @__PURE__ */ React.createElement("div", { className: "text-2xl font-bold", style: { color: col } }, val), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 font-medium mt-0.5" }, label), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-300 mt-0.5" }, sub)))), /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between flex-wrap gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex flex-wrap gap-1.5" }, FILTERS.map(([v, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: v,
        onClick: () => setActiveFilter(v),
        className: "px-3 py-1.5 rounded-lg text-xs font-semibold transition-all",
        style: activeFilter === v ? { background: "#2080BD", color: "#fff" } : { background: "#fff", color: "#6b7280", border: "1px solid #e5e7eb" }
      },
      l
    ))), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "Sort:"), SORTS.map(([v, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: v,
        onClick: () => setSortBy(v),
        className: "text-xs px-2.5 py-1 rounded-full border transition-colors",
        style: sortBy === v ? { background: "#2080BD", color: "#fff", borderColor: "#2080BD" } : { background: "#fff", color: "#6b7280", borderColor: "#e5e7eb" }
      },
      l
    )))), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, sorted.length, " accounts"), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "overflow-x-auto" }, /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-4 text-xs font-semibold text-gray-500", style: { width: "200px", maxWidth: "200px" } }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-3 text-xs font-semibold text-gray-500" }, "Platform"), /* @__PURE__ */ React.createElement("th", { className: "text-center py-3 px-3 text-xs font-semibold text-gray-500" }, "# P&S"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-3 text-xs font-semibold text-gray-500", style: { width: "300px", minWidth: "300px" } }, "Products & Services"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-3 px-3 text-xs font-semibold text-gray-500" }, "ARR"), /* @__PURE__ */ React.createElement("th", { className: "text-center py-3 px-3 text-xs font-semibold text-gray-500" }, "Renewal"), /* @__PURE__ */ React.createElement("th", { className: "text-center py-3 px-3 text-xs font-semibold text-gray-500", style: { width: "80px" } }, "Attach"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-3 px-3 text-xs font-semibold text-gray-500", style: { width: "160px" } }, "Suggested Expansion"))), /* @__PURE__ */ React.createElement("tbody", null, sorted.map((c) => {
      const arr = clientARR(c);
      const owned = ownedProds(c);
      const ws = whitespace(c);
      const expansion = getSuggestedExpansion(c);
      const days = daysUntilRenewal(c.nextRenewal);
      const renewCol = days === null ? "#9ca3af" : days < 0 ? "#dc2626" : days < 180 ? "#dc2626" : days < 365 ? "#ca8a04" : "#16a34a";
      const renewLabel = days === null ? "\u2014" : days < 0 ? "Overdue" : days < 30 ? days + "d" : days < 365 ? Math.round(days / 30) + "mo" : c.nextRenewal;
      return /* @__PURE__ */ React.createElement("tr", { key: c.id, className: "border-b border-gray-50 hover:bg-blue-50 transition-colors" }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4", style: { width: "200px", maxWidth: "200px" } }, /* @__PURE__ */ React.createElement("button", { onClick: () => onSelectClient(c.id), className: "font-semibold text-gray-800 hover:text-blue-600 text-left text-xs block w-full truncate" }, c.name), c.accountTeam && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 truncate" }, c.accountTeam)), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3" }, isLegacy(c) ? /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold px-2 py-0.5 rounded-full bg-orange-50 text-orange-700 border border-orange-100" }, "Legacy") : /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 border border-blue-100" }, "Core SaaS")), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3 text-center" }, /* @__PURE__ */ React.createElement("span", { className: `text-xs font-bold ${owned.length === 0 ? "text-red-500" : owned.length >= CORE_PRODUCTS.length ? "text-green-600" : "text-gray-700"}` }, owned.length, /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 font-normal" }, "/", CORE_PRODUCTS.length))), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3", style: { width: "300px", minWidth: "300px" } }, /* @__PURE__ */ React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(4,1fr)", gap: "3px" } }, CORE_PRODUCTS.map((p) => {
        const has = (c.products || []).includes(p);
        const toggle = (e) => {
          e.stopPropagation();
          const next = has ? (c.products || []).filter((x) => x !== p) : [...c.products || [], p];
          onUpdateClient({ ...c, products: next });
        };
        return /* @__PURE__ */ React.createElement(
          "button",
          {
            key: p,
            onClick: toggle,
            className: "text-xs rounded font-medium border transition-colors",
            style: {
              padding: "2px 0",
              textAlign: "center",
              whiteSpace: "nowrap",
              overflow: "hidden",
              textOverflow: "ellipsis",
              background: has ? "#dbeafe" : "#f8fafc",
              color: has ? "#1d4ed8" : "#d1d5db",
              borderColor: has ? "#bfdbfe" : "#f1f5f9"
            }
          },
          p
        );
      }))), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3 text-right font-semibold text-gray-800" }, arr ? fmtV(arr) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3 text-center" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold", style: { color: renewCol } }, renewLabel)), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-center" }, [...Array(CORE_PRODUCTS.length)].map((_, i) => /* @__PURE__ */ React.createElement(
        "div",
        {
          key: i,
          className: "w-3 h-3 rounded-sm mr-0.5",
          style: { background: i < owned.length ? "#2080BD" : "#e5e7eb" }
        }
      )))), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-3", style: { width: "160px" } }, /* @__PURE__ */ React.createElement(
        "span",
        {
          className: "text-xs font-semibold px-2 py-1 rounded-full whitespace-nowrap",
          style: { background: expansion.bg, color: expansion.color }
        },
        expansion.label
      )));
    }), !sorted.length && /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("td", { colSpan: "8", className: "py-10 text-center text-sm text-gray-400" }, "No accounts match the current filter")))))), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-300" }, "Products & Services data is editable inline above or from each client's detail page. Enterprise threshold: ARR > $1M. Migration candidates: Legacy + renewal within 18 months. High expansion: 3+ unattached products & services."));
  }
  function GoalInputCell({ client, onUpdateClient }) {
    const { canEdit } = useRole();
    const [editing, setEditing] = React.useState(false);
    const [val, setVal] = React.useState("");
    const goal = Number(client.arrGoal) || 0;
    const save = () => {
      onUpdateClient({ ...client, arrGoal: Number(val) * 1e3 });
      setEditing(false);
    };
    if (editing) return /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1 justify-end" }, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 text-xs" }, "$"), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "number",
        autoFocus: true,
        className: "border border-blue-300 rounded px-2 py-0.5 text-xs w-24 text-right focus:outline-none focus:ring-1 focus:ring-blue-300",
        value: val,
        onChange: (e) => setVal(e.target.value),
        onKeyDown: (e) => {
          if (e.key === "Enter") save();
          if (e.key === "Escape") setEditing(false);
        }
      }
    ), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "K"), /* @__PURE__ */ React.createElement("button", { onClick: save, className: "text-xs text-blue-500 font-semibold hover:text-blue-700" }, "\u2713"), /* @__PURE__ */ React.createElement("button", { onClick: () => setEditing(false), className: "text-xs text-gray-400 hover:text-gray-600" }, "\u2715"));
    return canEdit ? /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: () => {
          setVal(goal ? String(Math.round(goal / 1e3)) : "");
          setEditing(true);
        },
        className: "text-right w-full hover:text-blue-500 transition-colors"
      },
      goal ? /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-800" }, goal >= 1e6 ? "$" + (goal / 1e6).toFixed(2) + "M" : "$" + (goal / 1e3).toFixed(0) + "K") : /* @__PURE__ */ React.createElement("span", { className: "text-xs font-medium text-blue-400 hover:text-blue-600" }, "\uFF0B Set goal")
    ) : /* @__PURE__ */ React.createElement("span", { className: "text-right w-full block" }, goal ? /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-800" }, goal >= 1e6 ? "$" + (goal / 1e6).toFixed(2) + "M" : "$" + (goal / 1e3).toFixed(0) + "K") : /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "\u2014"));
  }
  function GoalsView({ clients, onSelectClient, onUpdateClient, platformFilter, onSetPlatformFilter, teamGoals, onUpdateTeamGoals, opps }) {
    const { canEdit } = useRole();
    const [activeView, setActiveView] = React.useState("executive");
    const [filterSegment, setFilterSegment] = React.useState(platformFilter || "all");
    const [filterOwner, setFilterOwner] = React.useState("all");
    const [filterCat, setFilterCat] = React.useState("all");
    const [filterHealth, setFilterHealth] = React.useState("all");
    const [expandedClient, setExpandedClient] = React.useState(null);
    const [peekOpp, setPeekOpp] = React.useState(null);
    const [editingTeamGoal, setEditingTeamGoal] = React.useState(false);
    const [goalInput, setGoalInput] = React.useState("");
    const [sortBy, setSortBy] = React.useState("arr-desc");
    React.useEffect(() => {
      setFilterSegment(platformFilter || "all");
    }, [platformFilter]);
    const clientARR = (c) => Number(c.platform === "inspire" ? c.arr : c.aop) || 0;
    const fmtV = (v) => !v && v !== 0 ? "\u2014" : v >= 1e6 ? "$" + (v / 1e6).toFixed(2) + "M" : v >= 1e3 ? "$" + (v / 1e3).toFixed(0) + "K" : "$" + Math.round(v);
    const pct = (n, d) => d > 0 ? Math.round(n / d * 100) : null;
    const QUAL_STAGES = ["Lead", "Enquiry", "Discovery", "Solution Validation", "Negotiation"];
    const isRecurring = (o) => {
      const cat = (o.category || "").toLowerCase();
      if (cat.includes("setup")) return false;
      if ((o.retainerType || "") === "One Time") return false;
      return true;
    };
    const getCatShort = (o) => {
      const cat = (o.category || "").toLowerCase();
      if (cat.includes("setup") || cat.includes("one time") || (o.retainerType || "") === "One Time") return "One-time";
      if (cat.includes("cat 1") || cat.includes("inflation") || cat.includes("variables")) return "Cat 1";
      if (cat.includes("cat 2") || cat.includes("product") || cat.includes("services upsell")) return "Cat 2";
      if (cat.includes("cat 3") || cat.includes("new business") || cat.includes("brand") || cat.includes("market")) return "Cat 3";
      return "Other";
    };
    const allOpps = opps || [];
    const allActive = clients.filter((c) => !c.archived);
    const filteredClients = useMemo(() => allActive.filter((c) => {
      var _a;
      if (filterSegment !== "all" && c.platform !== filterSegment) return false;
      if (filterOwner !== "all") {
        const owner = (_a = allOpps.find((o) => o.clientId === c.id)) == null ? void 0 : _a.owner;
        if (owner !== filterOwner && c.csm !== filterOwner) return false;
      }
      if (filterHealth !== "all") {
        const h = (getCurrentHealth(c) || "").toLowerCase();
        if (filterHealth === "green" && h !== "green") return false;
        if (filterHealth === "yellow" && h !== "yellow") return false;
        if (filterHealth === "red" && h !== "red") return false;
      }
      return true;
    }), [allActive, filterSegment, filterOwner, filterHealth, allOpps]);
    const filteredOpps = useMemo(() => allOpps.filter((o) => {
      const cl = allActive.find((c) => c.id === o.clientId);
      if (!cl) return false;
      if (filterSegment !== "all" && (o.pipeline || cl.platform) !== filterSegment) return false;
      if (filterOwner !== "all" && o.owner !== filterOwner) return false;
      if (filterCat !== "all") {
        const cs = getCatShort(o);
        if (filterCat === "cat1" && cs !== "Cat 1") return false;
        if (filterCat === "cat2" && cs !== "Cat 2") return false;
        if (filterCat === "cat3" && cs !== "Cat 3") return false;
        if (filterCat === "onetime" && cs !== "One-time") return false;
      }
      return true;
    }), [allOpps, allActive, filterSegment, filterOwner, filterCat]);
    const owners = useMemo(() => {
      const s = /* @__PURE__ */ new Set();
      allOpps.forEach((o) => {
        if (o.owner) s.add(o.owner);
      });
      return Array.from(s).sort();
    }, [allOpps]);
    const teamGoalVal = Number(teamGoals == null ? void 0 : teamGoals.fy26ARR) || 0;
    const currentARR = filteredClients.reduce((a, c) => a + clientARR(c), 0);
    const qualOpps = filteredOpps.filter((o) => QUAL_STAGES.includes(o.status));
    const wonOpps = filteredOpps.filter((o) => o.status === "Closed-Won");
    const bookedRec = wonOpps.filter(isRecurring).reduce((a, o) => a + (Number(o.value) || 0), 0);
    const qualPipeline = qualOpps.reduce((a, o) => a + (Number(o.value) || 0), 0);
    const teamGap = Math.max(teamGoalVal - currentARR, 0);
    const coverage = teamGap > 0 ? qualPipeline / teamGap : qualPipeline > 0 ? 99.9 : 0;
    const attainPct = pct(currentARR, teamGoalVal);
    const arrAtRisk = filteredClients.filter((c) => (getCurrentHealth(c) || "").toLowerCase() === "red").reduce((a, c) => a + clientARR(c), 0);
    const clientMetrics = useMemo(() => filteredClients.map((c) => {
      const arr = clientARR(c);
      const goal = Number(c.arrGoal) || 0;
      const cOpps = allOpps.filter((o) => o.clientId === c.id);
      const cWon = cOpps.filter((o) => o.status === "Closed-Won");
      const cQual = cOpps.filter((o) => QUAL_STAGES.includes(o.status));
      const cBooked = cWon.filter(isRecurring).reduce((a, o) => a + (Number(o.value) || 0), 0);
      const cQP = cQual.reduce((a, o) => a + (Number(o.value) || 0), 0);
      const cGap = goal ? Math.max(goal - arr, 0) : 0;
      const cCov = cGap > 0 ? cQP / cGap : cQP > 0 ? 99.9 : 0;
      const catMix = { cat1: 0, cat2: 0, cat3: 0, onetime: 0 };
      cQual.forEach((o) => {
        const cs = getCatShort(o);
        const v = Number(o.value) || 0;
        if (cs === "Cat 1") catMix.cat1 += v;
        else if (cs === "Cat 2") catMix.cat2 += v;
        else if (cs === "Cat 3") catMix.cat3 += v;
        else catMix.onetime += v;
      });
      return { client: c, arr, goal, booked: cBooked, qualPipeline: cQP, gap: cGap, coverage: cCov, catMix, allOpps: cOpps, wonOpps: cWon, qualOpps: cQual };
    }), [filteredClients, allOpps]);
    const teamMetrics = useMemo(() => {
      const map = {};
      allOpps.forEach((o) => {
        if (!o.owner) return;
        const cl = allActive.find((c) => c.id === o.clientId);
        if (!cl) return;
        if (filterSegment !== "all" && (o.pipeline || cl.platform) !== filterSegment) return;
        if (!map[o.owner]) map[o.owner] = { owner: o.owner, clients: /* @__PURE__ */ new Set(), arr: 0, goal: 0, booked: 0, qualPipeline: 0, won: 0, lost: 0, atRisk: 0 };
        const m = map[o.owner];
        if (!m.clients.has(cl.id)) {
          m.clients.add(cl.id);
          m.arr += clientARR(cl);
          m.goal += Number(cl.arrGoal) || 0;
          if ((getCurrentHealth(cl) || "").toLowerCase() === "red") m.atRisk += clientARR(cl);
        }
        if (o.status === "Closed-Won") {
          m.won++;
          if (isRecurring(o)) m.booked += Number(o.value) || 0;
        }
        if (o.status === "Closed-Lost") m.lost++;
        if (QUAL_STAGES.includes(o.status)) m.qualPipeline += Number(o.value) || 0;
      });
      return Object.values(map).filter((m) => {
        const hasActiveClient = allActive.some((c) => c.execSponsor === m.owner);
        const hasActiveOpp = allOpps.some((o) => o.owner === m.owner && !["Closed-Won", "Closed-Lost"].includes(o.status));
        return hasActiveClient || hasActiveOpp;
      }).sort((a, b) => b.arr - a.arr).map((m) => {
        const gap = Math.max(m.goal - m.arr, 0);
        return { ...m, clients: m.clients.size, gap, coverage: gap > 0 ? m.qualPipeline / gap : m.qualPipeline > 0 ? 99.9 : 0, attain: pct(m.arr, m.goal), winRate: pct(m.won, m.won + m.lost) };
      });
    }, [allOpps, allActive, filterSegment]);
    const execSummary = useMemo(() => {
      const topGaps = [...clientMetrics].filter((m) => m.gap > 0).sort((a, b) => b.gap - a.gap).slice(0, 6);
      const atRiskClients = clientMetrics.filter((m) => (getCurrentHealth(m.client) || "").toLowerCase() === "red").sort((a, b) => b.arr - a.arr);
      const now = Date.now();
      const agingOpps = qualOpps.filter((o) => {
        if (!o.lastUpdated) return true;
        return (now - new Date(o.lastUpdated).getTime()) / 864e5 > 21;
      }).sort((a, b) => (Number(b.value) || 0) - (Number(a.value) || 0)).slice(0, 6);
      const catMix = { cat1: 0, cat2: 0, cat3: 0, onetime: 0 };
      qualOpps.forEach((o) => {
        const cs = getCatShort(o);
        const v = Number(o.value) || 0;
        if (cs === "Cat 1") catMix.cat1 += v;
        else if (cs === "Cat 2") catMix.cat2 += v;
        else if (cs === "Cat 3") catMix.cat3 += v;
        else catMix.onetime += v;
      });
      const stageMap = {};
      QUAL_STAGES.forEach((s) => {
        const v = qualOpps.filter((o) => o.status === s).reduce((a, o) => a + (Number(o.value) || 0), 0);
        if (v > 0) stageMap[s] = v;
      });
      return { topGaps, atRiskClients, agingOpps, catMix, stageMap };
    }, [clientMetrics, qualOpps]);
    const renderFilters = () => /* @__PURE__ */ React.createElement("div", { className: "flex flex-wrap items-center gap-2 p-3 bg-gray-50 rounded-xl border border-gray-100" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1" }, [["all", "All"], ["inspire", "\u2726 Inspire"], ["capillary", "\u25C8 Cap"]].map(([v, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: v,
        onClick: () => {
          setFilterSegment(v);
          if (onSetPlatformFilter) onSetPlatformFilter(v);
        },
        className: "px-3 py-1 rounded-lg text-xs font-semibold transition-all",
        style: filterSegment === v ? { background: "#2080BD", color: "#fff" } : { background: "#fff", color: "#6b7280", border: "1px solid #e5e7eb" }
      },
      l
    ))), /* @__PURE__ */ React.createElement("div", { className: "w-px h-5 bg-gray-200" }), /* @__PURE__ */ React.createElement(
      "select",
      {
        value: filterOwner,
        onChange: (e) => setFilterOwner(e.target.value),
        className: "text-xs border border-gray-200 rounded-lg px-2 py-1 bg-white text-gray-700 focus:outline-none focus:ring-1 focus:ring-blue-300"
      },
      /* @__PURE__ */ React.createElement("option", { value: "all" }, "All Owners"),
      owners.map((o) => /* @__PURE__ */ React.createElement("option", { key: o, value: o }, o))
    ), /* @__PURE__ */ React.createElement(
      "select",
      {
        value: filterCat,
        onChange: (e) => setFilterCat(e.target.value),
        className: "text-xs border border-gray-200 rounded-lg px-2 py-1 bg-white text-gray-700 focus:outline-none focus:ring-1 focus:ring-blue-300"
      },
      /* @__PURE__ */ React.createElement("option", { value: "all" }, "All Categories"),
      /* @__PURE__ */ React.createElement("option", { value: "cat1" }, "Cat 1"),
      /* @__PURE__ */ React.createElement("option", { value: "cat2" }, "Cat 2"),
      /* @__PURE__ */ React.createElement("option", { value: "cat3" }, "Cat 3"),
      /* @__PURE__ */ React.createElement("option", { value: "onetime" }, "One-time")
    ), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1" }, [["all", "All"], ["green", "\u{1F7E2}"], ["yellow", "\u{1F7E1}"], ["red", "\u{1F534}"]].map(([v, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: v,
        onClick: () => setFilterHealth(v),
        className: "px-2.5 py-1 rounded-lg text-xs font-semibold transition-all",
        style: filterHealth === v ? { background: "#2080BD", color: "#fff" } : { background: "#fff", color: "#6b7280", border: "1px solid #e5e7eb" }
      },
      l
    ))), (filterOwner !== "all" || filterCat !== "all" || filterHealth !== "all") && /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: () => {
          setFilterOwner("all");
          setFilterCat("all");
          setFilterHealth("all");
        },
        className: "text-xs text-gray-400 hover:text-red-500 ml-1"
      },
      "\u2715 Clear"
    ), /* @__PURE__ */ React.createElement("div", { className: "ml-auto text-xs text-gray-400" }, filteredClients.length, " clients \xB7 ", filteredOpps.length, " opps"));
    const renderExecutive = () => {
      const barW = Math.min(attainPct || 0, 100);
      const barCol = attainPct >= 100 ? "bg-green-500" : attainPct >= 75 ? "bg-yellow-400" : "bg-blue-500";
      const covPct = Math.min(coverage * 100, 200);
      const covCol = coverage >= 1 ? "text-green-600" : coverage >= 0.5 ? "text-yellow-600" : "text-red-500";
      const { topGaps, atRiskClients, agingOpps, catMix, stageMap } = execSummary;
      const catTotal = catMix.cat1 + catMix.cat2 + catMix.cat3 + catMix.onetime || 1;
      const stageTot = Object.values(stageMap).reduce((a, v) => a + v, 0) || 1;
      const STAGE_COLORS = { "Lead": "#64748b", "Enquiry": "#7c3aed", "Discovery": "#3b82f6", "Solution Validation": "#0d9488", "Negotiation": "#f97316" };
      return /* @__PURE__ */ React.createElement("div", { className: "space-y-4" }, /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-3 md:grid-cols-6" }, [
        { label: "Current ARR", val: fmtV(currentARR), sub: "live", col: "text-gray-900" },
        { label: "FY Goal", val: teamGoalVal ? fmtV(teamGoalVal) : "Not set", sub: "team target", col: "text-gray-900" },
        { label: "Booked Rec.", val: fmtV(bookedRec), sub: "Closed-Won", col: "text-green-600" },
        { label: "$ Gap", val: teamGap > 0 ? fmtV(teamGap) : "\u2713 Achieved", sub: "to goal", col: teamGap > 0 ? "text-red-500" : "text-green-600" },
        { label: "Coverage", val: teamGoalVal ? Math.round(coverage * 100) + "%" : "\u2014", sub: "qual pipe/gap", col: covCol },
        { label: "ARR at Risk", val: arrAtRisk > 0 ? fmtV(arrAtRisk) : "$0", sub: "red health", col: arrAtRisk > 0 ? "text-red-500" : "text-green-600" }
      ].map(({ label, val, sub, col }) => /* @__PURE__ */ React.createElement("div", { key: label, className: "card text-center py-3 px-2" }, /* @__PURE__ */ React.createElement("div", { className: `text-xl font-bold ${col}` }, val), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-0.5" }, label), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-300" }, sub)))), teamGoalVal > 0 && /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between mb-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wide" }, "FY26 ARR Attainment"), canEdit && !editingTeamGoal && /* @__PURE__ */ React.createElement(
        "button",
        {
          onClick: () => {
            setGoalInput(teamGoalVal ? String(Math.round(teamGoalVal / 1e3)) : "");
            setEditingTeamGoal(true);
          },
          className: "text-xs font-semibold hover:opacity-80",
          style: { color: "#2080BD" }
        },
        "\u270E Edit Goal"
      )), editingTeamGoal && /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mb-3 p-2 rounded-xl", style: { background: "#f0f7ff" } }, /* @__PURE__ */ React.createElement("span", { className: "text-sm text-gray-600" }, "FY26 Goal: $"), /* @__PURE__ */ React.createElement(
        "input",
        {
          type: "number",
          autoFocus: true,
          className: "border border-blue-300 rounded-lg px-3 py-1 text-sm w-28 focus:outline-none",
          value: goalInput,
          onChange: (e) => setGoalInput(e.target.value),
          placeholder: "e.g. 12000"
        }
      ), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-500" }, "\xD7 $1K"), /* @__PURE__ */ React.createElement(
        "button",
        {
          onClick: () => {
            onUpdateTeamGoals({ ...teamGoals, fy26ARR: Number(goalInput) * 1e3 });
            setEditingTeamGoal(false);
          },
          className: "btn-primary text-xs px-3 py-1"
        },
        "Save"
      ), /* @__PURE__ */ React.createElement("button", { onClick: () => setEditingTeamGoal(false), className: "text-xs text-gray-400 hover:text-gray-600" }, "Cancel")), /* @__PURE__ */ React.createElement("div", { className: "w-full bg-gray-100 rounded-full h-2.5 overflow-hidden mb-1" }, /* @__PURE__ */ React.createElement("div", { className: "h-2.5 rounded-full transition-all " + barCol, style: { width: barW + "%" } })), /* @__PURE__ */ React.createElement("div", { className: "flex justify-between text-xs text-gray-400" }, /* @__PURE__ */ React.createElement("span", null, fmtV(currentARR), " current"), /* @__PURE__ */ React.createElement("span", { className: "font-semibold" }, barW, "% attained"), /* @__PURE__ */ React.createElement("span", null, fmtV(teamGoalVal), " goal"))), !teamGoalVal && /* @__PURE__ */ React.createElement("div", { className: "card", style: { background: "#f0f7ff", border: "1px solid #bfdbfe" } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between" }, /* @__PURE__ */ React.createElement("span", { className: "text-sm text-blue-700 font-medium" }, "No FY26 team goal set yet"), canEdit && /* @__PURE__ */ React.createElement(
        "button",
        {
          onClick: () => {
            setGoalInput("");
            setEditingTeamGoal(true);
          },
          className: "btn-primary text-xs px-3 py-1"
        },
        "\uFF0B Set Goal"
      )), editingTeamGoal && /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mt-3 p-2 rounded-xl", style: { background: "#e0f0ff" } }, /* @__PURE__ */ React.createElement("span", { className: "text-sm text-gray-600" }, "FY26 Goal: $"), /* @__PURE__ */ React.createElement(
        "input",
        {
          type: "number",
          autoFocus: true,
          className: "border border-blue-300 rounded-lg px-3 py-1 text-sm w-28 focus:outline-none",
          value: goalInput,
          onChange: (e) => setGoalInput(e.target.value),
          placeholder: "e.g. 12000"
        }
      ), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-500" }, "\xD7 $1K"), /* @__PURE__ */ React.createElement(
        "button",
        {
          onClick: () => {
            onUpdateTeamGoals({ ...teamGoals, fy26ARR: Number(goalInput) * 1e3 });
            setEditingTeamGoal(false);
          },
          className: "btn-primary text-xs px-3 py-1"
        },
        "Save"
      ), /* @__PURE__ */ React.createElement("button", { onClick: () => setEditingTeamGoal(false), className: "text-xs text-gray-400 hover:text-gray-600" }, "Cancel"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-4" }, /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wide mb-3" }, "Pipeline Category Mix"), [["Cat 1", catMix.cat1, "#3b82f6"], ["Cat 2", catMix.cat2, "#8b5cf6"], ["Cat 3", catMix.cat3, "#10b981"], ["One-time", catMix.onetime, "#f59e0b"]].map(([l, v, c]) => /* @__PURE__ */ React.createElement("div", { key: l, className: "mb-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-between text-xs mb-0.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-gray-600 font-medium" }, l), /* @__PURE__ */ React.createElement("span", { className: "text-gray-500" }, fmtV(v), " ", /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "(", Math.round(v / catTotal * 100), "%)"))), /* @__PURE__ */ React.createElement("div", { className: "w-full bg-gray-100 rounded-full h-1.5" }, /* @__PURE__ */ React.createElement("div", { className: "h-1.5 rounded-full", style: { width: Math.round(v / catTotal * 100) + "%", background: c } }))))), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold text-gray-400 uppercase tracking-wide mb-3" }, "Pipeline by Stage"), Object.keys(STAGE_COLORS).filter((s) => stageMap[s]).map((s) => /* @__PURE__ */ React.createElement("div", { key: s, className: "mb-2" }, /* @__PURE__ */ React.createElement("div", { className: "flex justify-between text-xs mb-0.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-gray-600 font-medium" }, s), /* @__PURE__ */ React.createElement("span", { className: "text-gray-500" }, fmtV(stageMap[s]), " ", /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "(", Math.round((stageMap[s] || 0) / stageTot * 100), "%)"))), /* @__PURE__ */ React.createElement("div", { className: "w-full bg-gray-100 rounded-full h-1.5" }, /* @__PURE__ */ React.createElement("div", { className: "h-1.5 rounded-full", style: { width: Math.round((stageMap[s] || 0) / stageTot * 100) + "%", background: STAGE_COLORS[s] } })))), !Object.keys(stageMap).length && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-300 py-4 text-center" }, "No active pipeline"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-4" }, /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-4 py-3 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Top Coverage Gaps")), /* @__PURE__ */ React.createElement("table", { className: "w-full text-xs" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left px-4 py-2 text-gray-400 font-semibold" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "ARR"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "Gap"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "Cov."))), /* @__PURE__ */ React.createElement("tbody", null, topGaps.map((m) => /* @__PURE__ */ React.createElement("tr", { key: m.client.id, className: "border-t border-gray-50 hover:bg-blue-50" }, /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2" }, /* @__PURE__ */ React.createElement("button", { onClick: () => onSelectClient(m.client.id), className: "font-semibold text-gray-800 hover:text-blue-600 text-left truncate max-w-28 block" }, m.client.name)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right text-gray-600" }, fmtV(m.arr)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right font-semibold text-red-500" }, fmtV(m.gap)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right font-semibold", style: { color: m.coverage >= 1 ? "#16a34a" : m.coverage >= 0.5 ? "#ca8a04" : "#dc2626" } }, Math.round(m.coverage * 100), "%"))), !topGaps.length && /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("td", { colSpan: "4", className: "px-4 py-6 text-center text-gray-300" }, "All clients have coverage"))))), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-4 py-3 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "\u{1F534} At-Risk ARR")), atRiskClients.length > 0 ? /* @__PURE__ */ React.createElement("table", { className: "w-full text-xs" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left px-4 py-2 text-gray-400 font-semibold" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "ARR"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "Renewal"))), /* @__PURE__ */ React.createElement("tbody", null, atRiskClients.slice(0, 6).map((m) => /* @__PURE__ */ React.createElement("tr", { key: m.client.id, className: "border-t border-gray-50 hover:bg-red-50" }, /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2" }, /* @__PURE__ */ React.createElement("button", { onClick: () => onSelectClient(m.client.id), className: "font-semibold text-gray-800 hover:text-blue-600 text-left truncate max-w-28 block" }, m.client.name)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right font-semibold text-red-500" }, fmtV(m.arr)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right text-gray-400" }, m.client.nextRenewal || "\u2014"))))) : /* @__PURE__ */ React.createElement("div", { className: "px-4 py-6 text-center text-xs text-gray-300" }, "No red-health clients \u{1F389}"))), agingOpps.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-4 py-3 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "\u23F3 Stale Pipeline (21+ days)")), /* @__PURE__ */ React.createElement("table", { className: "w-full text-xs" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left px-4 py-2 text-gray-400 font-semibold" }, "Opp"), /* @__PURE__ */ React.createElement("th", { className: "text-left px-4 py-2 text-gray-400 font-semibold" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-left px-4 py-2 text-gray-400 font-semibold" }, "Stage"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "Value"), /* @__PURE__ */ React.createElement("th", { className: "text-right px-4 py-2 text-gray-400 font-semibold" }, "Last Update"))), /* @__PURE__ */ React.createElement("tbody", null, agingOpps.map((o) => {
        const cl = allActive.find((c) => c.id === o.clientId);
        const days = o.lastUpdated ? Math.round((Date.now() - new Date(o.lastUpdated).getTime()) / 864e5) : null;
        return /* @__PURE__ */ React.createElement("tr", { key: o.id, className: "border-t border-gray-50 hover:bg-yellow-50" }, /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 font-medium text-gray-700 max-w-48 truncate" }, o.name), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-gray-500" }, (cl == null ? void 0 : cl.name) || "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2" }, /* @__PURE__ */ React.createElement(StatusBadge, { status: o.status })), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right font-semibold text-gray-700" }, fmtV(o.value)), /* @__PURE__ */ React.createElement("td", { className: "px-4 py-2 text-right text-gray-400" }, days ? days + "d ago" : "\u2014"));
      })))));
    };
    const [expandedOwner, setExpandedOwner] = React.useState(null);
    const renderTeam = () => /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-5 py-3 border-b border-gray-100 bg-gray-50" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Owner Leaderboard")), /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Owner"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Clients"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Portfolio ARR"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Goal"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Booked Rec."), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Attain%"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Gap"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Pipeline"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Coverage"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Win%"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "At-Risk"))), /* @__PURE__ */ React.createElement("tbody", null, teamMetrics.map((m) => {
      const isExp = expandedOwner === m.owner;
      const ownerClients = clientMetrics.filter((cm) => allOpps.some((o) => o.clientId === cm.client.id && o.owner === m.owner));
      return /* @__PURE__ */ React.createElement(React.Fragment, { key: m.owner }, /* @__PURE__ */ React.createElement("tr", { className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer", onClick: () => setExpandedOwner(isExp ? null : m.owner) }, /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, isExp ? "\u25BC" : "\u25B6"), /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-800" }, m.owner))), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right text-gray-600" }, m.clients), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold text-gray-800" }, fmtV(m.arr)), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right text-gray-600" }, m.goal ? fmtV(m.goal) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold text-green-600" }, fmtV(m.booked)), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right" }, m.attain != null ? /* @__PURE__ */ React.createElement("span", { className: "font-semibold " + (m.attain >= 100 ? "text-green-600" : m.attain >= 75 ? "text-yellow-600" : "text-blue-500") }, m.attain, "%") : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold text-red-500" }, m.gap > 0 ? fmtV(m.gap) : /* @__PURE__ */ React.createElement("span", { className: "text-green-500 text-xs" }, "\u2713")), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right text-gray-600" }, fmtV(m.qualPipeline)), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold", style: { color: m.coverage >= 1 ? "#16a34a" : m.coverage >= 0.5 ? "#ca8a04" : "#dc2626" } }, m.goal ? Math.round(m.coverage * 100) + "%" : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right" }, m.winRate != null ? /* @__PURE__ */ React.createElement("span", { className: "text-gray-600" }, m.winRate, "%") : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold", style: { color: m.atRisk > 0 ? "#dc2626" : "#16a34a" } }, m.atRisk > 0 ? fmtV(m.atRisk) : "$0")), isExp && ownerClients.map((cm) => /* @__PURE__ */ React.createElement("tr", { key: cm.client.id, className: "bg-blue-50 border-b border-blue-100" }, /* @__PURE__ */ React.createElement("td", { className: "py-2 px-4 pl-10" }, /* @__PURE__ */ React.createElement("button", { onClick: () => onSelectClient(cm.client.id), className: "text-xs font-medium text-blue-700 hover:text-blue-900" }, cm.client.name)), /* @__PURE__ */ React.createElement("td", null), /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 text-right text-xs text-gray-600" }, fmtV(cm.arr)), /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 text-right text-xs text-gray-400" }, cm.goal ? fmtV(cm.goal) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 text-right text-xs text-green-600" }, fmtV(cm.booked)), /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 text-right text-xs" }, cm.goal ? /* @__PURE__ */ React.createElement("span", { className: cm.goal && pct(cm.arr, cm.goal) >= 100 ? "text-green-600" : "text-blue-500" }, pct(cm.arr, cm.goal) || 0, "%") : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 text-right text-xs text-red-400" }, cm.gap > 0 ? fmtV(cm.gap) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2 px-3 text-right text-xs text-gray-500" }, fmtV(cm.qualPipeline)), /* @__PURE__ */ React.createElement("td", { colSpan: "3" }))));
    }), !teamMetrics.length && /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("td", { colSpan: "11", className: "py-8 text-center text-sm text-gray-400" }, "No owner data found \u2014 add owners to opportunities")))));
    const renderClients = () => {
      const sortedClients = [...clientMetrics].sort((a, b) => {
        if (sortBy === "name") return a.client.name.localeCompare(b.client.name);
        if (sortBy === "goal") return b.goal - a.goal;
        if (sortBy === "gap") return b.gap - a.gap;
        if (sortBy === "pipeline") return b.qualPipeline - a.qualPipeline;
        if (sortBy === "coverage") return b.coverage - a.coverage;
        return b.arr - a.arr;
      });
      return /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-5 py-3 border-b border-gray-100 flex items-center justify-between flex-wrap gap-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Client ARR & Pipeline"), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5 flex-wrap" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-400" }, "Sort:"), [["arr-desc", "ARR\u2193"], ["goal", "Goal\u2193"], ["gap", "Gap\u2193"], ["pipeline", "Pipeline\u2193"], ["coverage", "Cov\u2193"], ["name", "A\u2192Z"]].map(([v, l]) => /* @__PURE__ */ React.createElement(
        "button",
        {
          key: v,
          onClick: () => setSortBy(v),
          className: "text-xs px-2.5 py-1 rounded-full border transition-colors",
          style: sortBy === v ? { background: "#2080BD", color: "#fff", borderColor: "#2080BD" } : { background: "#fff", color: "#6b7280", borderColor: "#e5e7eb" }
        },
        l
      )))), /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", { className: "bg-gray-50 border-b border-gray-100" }, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4 text-xs font-semibold text-gray-500" }, "Client"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "ARR"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "FY26 Goal"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Booked Rec."), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Qual Pipeline"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Gap"), /* @__PURE__ */ React.createElement("th", { className: "text-right py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Coverage"), /* @__PURE__ */ React.createElement("th", { className: "text-center py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Health"), /* @__PURE__ */ React.createElement("th", { className: "text-center py-2.5 px-3 text-xs font-semibold text-gray-500" }, "Renewal"))), /* @__PURE__ */ React.createElement("tbody", null, sortedClients.map((m) => {
        const { client: c, arr, goal, booked, qualPipeline: qp, gap, coverage: cov, catMix } = m;
        const isExp = expandedClient === c.id;
        const health = getCurrentHealth(c);
        const hDot = health === "Green" ? "\u{1F7E2}" : health === "Yellow" ? "\u{1F7E1}" : health === "Red" ? "\u{1F534}" : "\u26AA";
        const attain = goal ? pct(arr, goal) : null;
        return /* @__PURE__ */ React.createElement(React.Fragment, { key: c.id }, /* @__PURE__ */ React.createElement("tr", { className: "border-b border-gray-50 hover:bg-blue-50 cursor-pointer", onClick: () => setExpandedClient(isExp ? null : c.id) }, /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-1.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-300" }, isExp ? "\u25BC" : "\u25B6"), /* @__PURE__ */ React.createElement("button", { onClick: (e) => {
          e.stopPropagation();
          onSelectClient(c.id);
        }, className: "font-semibold text-gray-800 hover:text-blue-600 text-left" }, c.name), /* @__PURE__ */ React.createElement(PlatformBadge, { platform: c.platform }))), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold text-gray-800" }, arr ? fmtV(arr) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right", onClick: (e) => e.stopPropagation() }, /* @__PURE__ */ React.createElement(GoalInputCell, { client: c, onUpdateClient })), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right font-semibold text-green-600" }, booked ? fmtV(booked) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right text-blue-600 font-medium" }, qp ? fmtV(qp) : "\u2014"), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right" }, goal ? /* @__PURE__ */ React.createElement("span", { className: "font-semibold " + (gap <= 0 ? "text-green-600" : "text-red-500") }, gap <= 0 ? "\u2713 Met" : fmtV(gap)) : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 text-xs" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-right" }, goal ? /* @__PURE__ */ React.createElement("span", { className: "font-semibold", style: { color: cov >= 1 ? "#16a34a" : cov >= 0.5 ? "#ca8a04" : "#dc2626" } }, Math.round(cov * 100), "%") : /* @__PURE__ */ React.createElement("span", { className: "text-gray-300 text-xs" }, "\u2014")), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-center text-base" }, hDot), /* @__PURE__ */ React.createElement("td", { className: "py-2.5 px-3 text-center text-xs text-gray-400" }, c.nextRenewal || "\u2014")), isExp && /* @__PURE__ */ React.createElement("tr", { className: "bg-blue-50 border-b border-blue-100" }, /* @__PURE__ */ React.createElement("td", { colSpan: "9", className: "px-6 py-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex flex-wrap gap-4 items-start" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-1 font-semibold uppercase tracking-wide" }, "Pipeline Mix"), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3 text-xs" }, [["Cat 1", catMix.cat1, "#3b82f6"], ["Cat 2", catMix.cat2, "#8b5cf6"], ["Cat 3", catMix.cat3, "#10b981"], ["OT", catMix.onetime, "#f59e0b"]].filter(([, v]) => v > 0).map(([l, v, c2]) => /* @__PURE__ */ React.createElement("span", { key: l, className: "font-medium", style: { color: c2 } }, l, ": ", fmtV(v))), catMix.cat1 + catMix.cat2 + catMix.cat3 + catMix.onetime === 0 && /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "No active opps"))), attain != null && /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-1 font-semibold uppercase tracking-wide" }, "Goal Attainment"), /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2" }, /* @__PURE__ */ React.createElement("div", { className: "w-32 bg-gray-200 rounded-full h-2" }, /* @__PURE__ */ React.createElement("div", { className: "h-2 rounded-full", style: { width: Math.min(attain, 100) + "%", background: attain >= 100 ? "#16a34a" : attain >= 75 ? "#ca8a04" : "#3b82f6" } })), /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-600" }, attain, "%"))), m.qualOpps.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-2 font-semibold uppercase tracking-wide" }, "Active Opps (", m.qualOpps.length, ")"), /* @__PURE__ */ React.createElement("div", { className: "space-y-1.5" }, m.qualOpps.slice(0, 6).map((o) => {
          const cs = getCatShort(o);
          const STAGE_COL = { "Closed-Won": "#16a34a", "Closed-Lost": "#dc2626", "Negotiation": "#ca8a04", "Solution Validation": "#0d9488" };
          const sCol = STAGE_COL[o.status] || "#3b82f6";
          const days = o.lastUpdated ? Math.round((Date.now() - new Date(o.lastUpdated).getTime()) / 864e5) : null;
          return /* @__PURE__ */ React.createElement(
            "button",
            {
              key: o.id,
              onClick: () => setPeekOpp(o),
              className: "w-full text-left bg-white border border-gray-200 hover:border-blue-300 hover:bg-blue-50 rounded-lg px-3 py-2 transition-all group"
            },
            /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between gap-2" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-800 truncate flex-1" }, o.name), /* @__PURE__ */ React.createElement("span", { className: "text-xs font-bold text-gray-700 shrink-0" }, fmtV(o.value))),
            /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 mt-0.5" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold", style: { color: sCol } }, o.status), /* @__PURE__ */ React.createElement("span", { className: "text-gray-300" }, "\xB7"), /* @__PURE__ */ React.createElement(
              "span",
              {
                className: "text-xs font-medium px-1.5 py-0 rounded-full",
                style: {
                  background: cs === "Cat 1" ? "#eff6ff" : cs === "Cat 2" ? "#f5f3ff" : cs === "Cat 3" ? "#f0fdf4" : "#fffbeb",
                  color: cs === "Cat 1" ? "#1d4ed8" : cs === "Cat 2" ? "#7c3aed" : cs === "Cat 3" ? "#15803d" : "#92400e"
                }
              },
              cs
            ), isRecurring(o) && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-teal-500" }, "Rec."), days != null && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-gray-300 ml-auto" }, days, "d ago"), /* @__PURE__ */ React.createElement("span", { className: "text-xs text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity ml-auto shrink-0" }, "Quick peek \u2192"))
          );
        }), m.qualOpps.length > 6 && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 pl-1" }, m.qualOpps.length - 6, " more opps\u2026")))))));
      }))));
    };
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-4" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between flex-wrap gap-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "Farming Goals ", /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 text-base font-normal" }, "FY26")), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "ARR actuals, targets, and pipeline coverage")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 bg-gray-100 p-1 rounded-xl" }, [["executive", "\u{1F4CA} Executive"], ["team", "\u{1F465} Team"], ["clients", "\u{1F3E2} Clients"]].map(([v, l]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: v,
        onClick: () => setActiveView(v),
        className: "px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all",
        style: activeView === v ? { background: "#fff", color: "#2080BD", boxShadow: "0 1px 3px rgba(0,0,0,.1)" } : { color: "#6b7280" }
      },
      l
    )))), renderFilters(), activeView === "executive" && renderExecutive(), activeView === "team" && renderTeam(), activeView === "clients" && renderClients(), peekOpp && (() => {
      const cl = allActive.find((c) => c.id === peekOpp.clientId);
      const cs = getCatShort(peekOpp);
      const days = peekOpp.lastUpdated ? Math.round((Date.now() - new Date(peekOpp.lastUpdated).getTime()) / 864e5) : null;
      const STAGE_COL = { "Closed-Won": "#16a34a", "Closed-Lost": "#dc2626", "Negotiation": "#ca8a04", "Solution Validation": "#0d9488" };
      const sCol = STAGE_COL[peekOpp.status] || "#3b82f6";
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          className: "fixed inset-0 z-50 flex items-center justify-center p-4",
          style: { background: "rgba(0,0,0,0.35)" },
          onClick: () => setPeekOpp(null)
        },
        /* @__PURE__ */ React.createElement("div", { className: "bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden", onClick: (e) => e.stopPropagation() }, /* @__PURE__ */ React.createElement("div", { className: "px-5 py-4 border-b border-gray-100", style: { background: "#f8fafc" } }, /* @__PURE__ */ React.createElement("div", { className: "flex items-start justify-between gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("h3", { className: "font-bold text-gray-900 text-base leading-snug" }, peekOpp.name), cl && /* @__PURE__ */ React.createElement("p", { className: "text-sm text-gray-500 mt-0.5" }, cl.name)), /* @__PURE__ */ React.createElement("button", { onClick: () => setPeekOpp(null), className: "text-gray-400 hover:text-gray-600 text-xl leading-none shrink-0" }, "\u2715"))), /* @__PURE__ */ React.createElement("div", { className: "px-5 py-4 space-y-3" }, /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-3" }, /* @__PURE__ */ React.createElement("div", { className: "bg-gray-50 rounded-xl p-3" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-0.5" }, "Value"), /* @__PURE__ */ React.createElement("div", { className: "text-xl font-bold text-gray-900" }, fmtV(peekOpp.value))), /* @__PURE__ */ React.createElement("div", { className: "bg-gray-50 rounded-xl p-3" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mb-0.5" }, "Stage"), /* @__PURE__ */ React.createElement("div", { className: "text-sm font-bold", style: { color: sCol } }, peekOpp.status))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-2 text-xs" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 block" }, "Owner"), /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-700" }, peekOpp.owner || "\u2014")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 block" }, "Category"), /* @__PURE__ */ React.createElement(
          "span",
          {
            className: "font-semibold px-1.5 py-0.5 rounded-full text-xs",
            style: {
              background: cs === "Cat 1" ? "#eff6ff" : cs === "Cat 2" ? "#f5f3ff" : cs === "Cat 3" ? "#f0fdf4" : "#fffbeb",
              color: cs === "Cat 1" ? "#1d4ed8" : cs === "Cat 2" ? "#7c3aed" : cs === "Cat 3" ? "#15803d" : "#92400e"
            }
          },
          cs
        )), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 block" }, "Type"), /* @__PURE__ */ React.createElement("span", { className: "font-semibold " + (isRecurring(peekOpp) ? "text-teal-600" : "text-amber-600") }, isRecurring(peekOpp) ? "Recurring" : "One-time"))), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-2 gap-2 text-xs" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 block" }, "Target Qtr"), /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-700" }, peekOpp.targetQtr || "\u2014")), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("span", { className: "text-gray-400 block" }, "Last Updated"), /* @__PURE__ */ React.createElement("span", { className: "font-semibold text-gray-700" }, days != null ? days + "d ago" : peekOpp.lastUpdated || "\u2014"))), peekOpp.insights && /* @__PURE__ */ React.createElement("div", { className: "bg-blue-50 rounded-xl p-3" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-blue-400 font-semibold mb-1 uppercase tracking-wide" }, "Insights"), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-700 leading-relaxed line-clamp-3" }, peekOpp.insights))), /* @__PURE__ */ React.createElement("div", { className: "px-5 py-3 border-t border-gray-100 flex items-center justify-between bg-gray-50" }, /* @__PURE__ */ React.createElement("button", { onClick: () => setPeekOpp(null), className: "text-sm text-gray-500 hover:text-gray-700" }, "Close"), /* @__PURE__ */ React.createElement(
          "button",
          {
            onClick: () => {
              setPeekOpp(null);
              if (cl) onSelectClient(cl.id);
            },
            className: "btn-primary text-sm px-4 py-2 flex items-center gap-1.5"
          },
          "Open Opportunity ",
          /* @__PURE__ */ React.createElement("span", { className: "text-base leading-none" }, "\u2192")
        )))
      );
    })());
  }
  function AdminView({ currentUserEmail }) {
    const [users, setUsers] = useState([]);
    const [loading, setLoading] = useState(true);
    const [activeTab, setActiveTab] = useState("users");
    const [newEmail, setNewEmail] = useState("");
    const [newName, setNewName] = useState("");
    const [newRole, setNewRole] = useState("read_only");
    const [saving, setSaving] = useState(false);
    const [msg, setMsg] = useState("");
    const flash = (m) => {
      setMsg(m);
      setTimeout(() => setMsg(""), 3e3);
    };
    useEffect(() => {
      if (!sbClient) return;
      sbClient.from("user_roles").select("*").order("created_at").then(({ data }) => {
        if (data) setUsers(data);
        setLoading(false);
      });
    }, []);
    const updateRole = async (id, role) => {
      await sbClient.from("user_roles").update({ role, updated_at: (/* @__PURE__ */ new Date()).toISOString() }).eq("id", id);
      setUsers((prev) => prev.map((u) => u.id === id ? { ...u, role } : u));
      flash("Role updated \u2713");
    };
    const addUser = async () => {
      const email = newEmail.trim().toLowerCase();
      if (!email) return;
      setSaving(true);
      const { data, error } = await sbClient.from("user_roles").insert({ email, role: newRole, display_name: newName.trim() || null }).select().single();
      setSaving(false);
      if (error) {
        flash("Error: " + error.message);
        return;
      }
      if (data) {
        setUsers((prev) => [...prev, data]);
        setNewEmail("");
        setNewName("");
        setNewRole("read_only");
        flash("User added \u2713");
      }
    };
    const removeUser = async (id, email) => {
      if (email === currentUserEmail) {
        flash("You can't remove yourself.");
        return;
      }
      await sbClient.from("user_roles").delete().eq("id", id);
      setUsers((prev) => prev.filter((u) => u.id !== id));
      flash("User removed \u2713");
    };
    const ROLE_LABELS = { admin: "Admin", write: "Write Access", read_only: "Read Only" };
    const ROLE_COLORS = { admin: "#7c3aed", write: "#2080BD", read_only: "#64748b" };
    const ROLE_BG = { admin: "#f5f3ff", write: "#e0f0ff", read_only: "#f1f5f9" };
    return /* @__PURE__ */ React.createElement("div", { className: "p-6 space-y-5" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("h1", { className: "text-xl font-bold text-gray-900" }, "User Management"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-400 text-sm mt-0.5" }, "Control who can view or edit the CS Hub")), /* @__PURE__ */ React.createElement("div", { className: "flex gap-1 bg-gray-100 rounded-xl p-1" }, [["users", "\u{1F465} Users"]].map(([tab, label]) => /* @__PURE__ */ React.createElement(
      "button",
      {
        key: tab,
        onClick: () => setActiveTab(tab),
        className: "text-xs font-semibold px-3 py-1.5 rounded-lg transition-all",
        style: { background: activeTab === tab ? "#fff" : "transparent", color: activeTab === tab ? "#1e293b" : "#64748b", boxShadow: activeTab === tab ? "0 1px 3px rgba(0,0,0,0.1)" : "none" }
      },
      label
    )))), activeTab === "users" && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-3" }, [
      { role: "admin", desc: "Full access \u2014 manage users, edit all data, view everything" },
      { role: "write", desc: "Can edit clients, opportunities, health, NPS, and goals" },
      { role: "read_only", desc: "View-only \u2014 no editing, no imports, no deletes" }
    ].map(({ role, desc }) => /* @__PURE__ */ React.createElement("div", { key: role, className: "card", style: { borderLeft: `4px solid ${ROLE_COLORS[role]}`, marginBottom: 0 } }, /* @__PURE__ */ React.createElement("div", { className: "font-semibold text-sm", style: { color: ROLE_COLORS[role] } }, ROLE_LABELS[role]), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400 mt-1" }, desc)))), /* @__PURE__ */ React.createElement("div", { className: "card p-0 overflow-hidden" }, /* @__PURE__ */ React.createElement("div", { className: "px-5 py-3 border-b border-gray-100 bg-gray-50 flex items-center justify-between" }, /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wide" }, "Users (", users.length, ")"), msg && /* @__PURE__ */ React.createElement("span", { className: "text-xs font-semibold text-green-600" }, msg)), loading ? /* @__PURE__ */ React.createElement("div", { className: "py-8 text-center text-sm text-gray-400" }, "Loading\u2026") : /* @__PURE__ */ React.createElement("table", { className: "w-full text-sm" }, /* @__PURE__ */ React.createElement("thead", null, /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4" }, "Name / Email"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4" }, "Role"), /* @__PURE__ */ React.createElement("th", { className: "text-left py-2.5 px-4" }, "Added"), /* @__PURE__ */ React.createElement("th", { className: "py-2.5 px-4" }))), /* @__PURE__ */ React.createElement("tbody", null, users.map((u) => /* @__PURE__ */ React.createElement("tr", { key: u.id, className: "border-t border-gray-50 hover:bg-gray-50" }, /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, /* @__PURE__ */ React.createElement("div", { className: "font-medium text-gray-800" }, u.display_name || "\u2014"), /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-400" }, u.email), u.email === currentUserEmail && /* @__PURE__ */ React.createElement("span", { className: "text-xs text-indigo-500 font-semibold" }, "You")), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4" }, u.email === currentUserEmail ? /* @__PURE__ */ React.createElement("span", { className: "text-xs font-bold px-2 py-1 rounded-lg", style: { background: ROLE_BG[u.role], color: ROLE_COLORS[u.role] } }, ROLE_LABELS[u.role]) : /* @__PURE__ */ React.createElement(
      "select",
      {
        value: u.role,
        onChange: (e) => updateRole(u.id, e.target.value),
        className: "text-xs border border-gray-200 rounded-lg px-2 py-1 font-semibold focus:outline-none focus:ring-1 focus:ring-indigo-400",
        style: { color: ROLE_COLORS[u.role] }
      },
      /* @__PURE__ */ React.createElement("option", { value: "admin" }, "Admin"),
      /* @__PURE__ */ React.createElement("option", { value: "write" }, "Write Access"),
      /* @__PURE__ */ React.createElement("option", { value: "read_only" }, "Read Only")
    )), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-xs text-gray-400" }, u.created_at ? new Date(u.created_at).toLocaleDateString() : ""), /* @__PURE__ */ React.createElement("td", { className: "py-3 px-4 text-right" }, u.email !== currentUserEmail && /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: () => removeUser(u.id, u.email),
        className: "text-xs text-red-400 hover:text-red-600 font-semibold"
      },
      "Remove"
    )))), !users.length && /* @__PURE__ */ React.createElement("tr", null, /* @__PURE__ */ React.createElement("td", { colSpan: "4", className: "py-6 text-center text-sm text-gray-400" }, "No users yet"))))), /* @__PURE__ */ React.createElement("div", { className: "card" }, /* @__PURE__ */ React.createElement("div", { className: "text-sm font-semibold text-gray-700 mb-3" }, "Add User"), /* @__PURE__ */ React.createElement("div", { className: "grid grid-cols-3 gap-3 mb-3" }, /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Email (required)"), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "email",
        value: newEmail,
        onChange: (e) => setNewEmail(e.target.value),
        placeholder: "name@capillarytech.com",
        onKeyDown: (e) => e.key === "Enter" && addUser(),
        className: "w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-400"
      }
    )), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Display Name"), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "text",
        value: newName,
        onChange: (e) => setNewName(e.target.value),
        placeholder: "First Last",
        onKeyDown: (e) => e.key === "Enter" && addUser(),
        className: "w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-400"
      }
    )), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-gray-500 mb-1" }, "Role"), /* @__PURE__ */ React.createElement(
      "select",
      {
        value: newRole,
        onChange: (e) => setNewRole(e.target.value),
        className: "w-full text-sm border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-400"
      },
      /* @__PURE__ */ React.createElement("option", { value: "read_only" }, "Read Only"),
      /* @__PURE__ */ React.createElement("option", { value: "write" }, "Write Access"),
      /* @__PURE__ */ React.createElement("option", { value: "admin" }, "Admin")
    ))), /* @__PURE__ */ React.createElement("button", { onClick: addUser, disabled: saving || !newEmail.trim(), className: "btn-primary text-sm px-5 py-2" }, saving ? "Adding\u2026" : "+ Add User"), /* @__PURE__ */ React.createElement("p", { className: "text-xs text-gray-400 mt-2" }, "Users are granted access by email \u2014 they must sign in with the matching Google account."))));
  }
  function LoginScreen({ onSignIn }) {
    return /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", justifyContent: "center", minHeight: "100vh", background: "#0f172a", flexDirection: "column", gap: 24 } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 14, marginBottom: 8 } }, /* @__PURE__ */ React.createElement("div", { style: { width: 48, height: 48, borderRadius: 12, overflow: "hidden", flexShrink: 0 } }, /* @__PURE__ */ React.createElement("img", { src: "data:image/png;base64,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", alt: "logo", style: { width: "100%", height: "100%", objectFit: "cover" } })), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { style: { color: "#fff", fontSize: 22, fontWeight: 800, letterSpacing: "-0.5px", fontFamily: "sans-serif" } }, "Capillary CS Hub"), /* @__PURE__ */ React.createElement("div", { style: { color: "#475569", fontSize: 13, fontFamily: "sans-serif" } }, "Customer Success Dashboard"))), /* @__PURE__ */ React.createElement("div", { style: { background: "#1e293b", borderRadius: 16, padding: "32px 40px", display: "flex", flexDirection: "column", alignItems: "center", gap: 20, border: "1px solid #334155", minWidth: 320 } }, /* @__PURE__ */ React.createElement("div", { style: { color: "#94a3b8", fontSize: 13, fontFamily: "sans-serif", textAlign: "center" } }, "Sign in with your Capillary Google account"), /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: onSignIn,
        style: { display: "flex", alignItems: "center", gap: 12, background: "#fff", color: "#1e293b", border: "none", borderRadius: 10, padding: "12px 24px", fontSize: 14, fontWeight: 600, cursor: "pointer", fontFamily: "sans-serif", width: "100%", justifyContent: "center", boxShadow: "0 2px 8px rgba(0,0,0,0.3)" }
      },
      /* @__PURE__ */ React.createElement("svg", { width: "20", height: "20", viewBox: "0 0 48 48" }, /* @__PURE__ */ React.createElement("path", { fill: "#EA4335", d: "M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z" }), /* @__PURE__ */ React.createElement("path", { fill: "#4285F4", d: "M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z" }), /* @__PURE__ */ React.createElement("path", { fill: "#FBBC05", d: "M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z" }), /* @__PURE__ */ React.createElement("path", { fill: "#34A853", d: "M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.18 1.48-4.97 2.31-8.16 2.31-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z" }), /* @__PURE__ */ React.createElement("path", { fill: "none", d: "M0 0h48v48H0z" })),
      "Sign in with Google"
    )), /* @__PURE__ */ React.createElement("div", { style: { color: "#334155", fontSize: 11, fontFamily: "sans-serif" } }, "Access restricted to Capillary Technologies accounts"));
  }
  function App() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    const [session, setSession] = useState(null);
    const [authReady, setAuthReady] = useState(false);
    const [userRole, setUserRole] = useState("read_only");
    const [clients, setClients] = useState([]);
    const [opps, setOpps] = useState([]);
    const [rels, setRels] = useState({});
    const [dbLoaded, setDbLoaded] = useState(false);
    const [view, setView] = useState("home");
    const [selectedClientId, setSelectedClientId] = useState(null);
    const [selectedOppId, setSelectedOppId] = useState(null);
    const [oppBackView, setOppBackView] = useState("clientDetail");
    const [platformFilter, setPlatformFilter] = useState("all");
    const [teamGoals, setTeamGoals] = useState({ fy26ARR: null });
    const [modal, setModal] = useState(null);
    const [sidebarSearch, setSidebarSearch] = useState("");
    const [saveMsg, setSaveMsg] = useState("");
    const [toast, setToast] = useState(null);
    const [archiveModal, setArchiveModal] = useState(null);
    const [confirmData, setConfirmData] = useState(null);
    useEffect(() => {
      if (!sbClient) {
        setAuthReady(true);
        return;
      }
      sbClient.auth.getSession().then(({ data: { session: session2 } }) => {
        setSession(session2);
        setAuthReady(true);
      });
      const { data: { subscription } } = sbClient.auth.onAuthStateChange((_event, session2) => {
        var _a2, _b2;
        setSession(session2);
        if (_event === "SIGNED_IN" && ((_a2 = session2 == null ? void 0 : session2.user) == null ? void 0 : _a2.email)) {
          sbClient.from("login_events").insert({
            email: session2.user.email,
            display_name: ((_b2 = session2.user.user_metadata) == null ? void 0 : _b2.name) || null
          }).then().catch(() => {
          });
        }
      });
      return () => subscription.unsubscribe();
    }, []);
    useEffect(() => {
      var _a2;
      if (!sbClient || !session) {
        setUserRole("read_only");
        return;
      }
      const email = (_a2 = session.user) == null ? void 0 : _a2.email;
      if (!email) return;
      sbClient.from("user_roles").select("role").eq("email", email).single().then(({ data }) => {
        setUserRole((data == null ? void 0 : data.role) || "read_only");
      }).catch(() => {
        setUserRole("read_only");
      });
    }, [session]);
    const canEdit = userRole === "admin" || userRole === "write";
    const isAdmin = userRole === "admin";
    const signIn = () => {
      if (!sbClient) return;
      sbClient.auth.signInWithOAuth({
        provider: "google",
        options: { redirectTo: "https://capillary-cs.github.io/capillary-cs-hub" }
      });
    };
    const signOut = () => {
      if (!sbClient) return;
      sbClient.auth.signOut();
      setSession(null);
    };
    useEffect(() => {
      loadFromSupabase().then((state) => {
        if (state && (state[DB_KEY_CLIENTS] || state[DB_KEY_OPPS] || state[DB_KEY_RELS])) {
          if (state[DB_KEY_CLIENTS]) setClients(state[DB_KEY_CLIENTS].map(sanitizeClient));
          if (state[DB_KEY_OPPS]) setOpps(state[DB_KEY_OPPS].map(sanitizeOpp));
          if (state[DB_KEY_RELS]) setRels(state[DB_KEY_RELS]);
          if (state[DB_KEY_GOALS]) setTeamGoals(state[DB_KEY_GOALS]);
        } else {
          const local = loadDB();
          setClients(local.clients);
          setOpps(local.opps);
          setRels(local.rels);
          try {
            const s = localStorage.getItem(DB_KEY_GOALS);
            if (s) setTeamGoals(JSON.parse(s));
          } catch {
          }
        }
        setDbLoaded(true);
      }).catch(() => {
        const local = loadDB();
        setClients(local.clients);
        setOpps(local.opps);
        setRels(local.rels);
        try {
          const s = localStorage.getItem(DB_KEY_GOALS);
          if (s) setTeamGoals(JSON.parse(s));
        } catch {
        }
        setDbLoaded(true);
      });
    }, []);
    useEffect(() => {
      if (!dbLoaded) return;
      saveDB(clients, opps, rels);
      saveToSupabase(DB_KEY_CLIENTS, clients);
      saveToSupabase(DB_KEY_OPPS, opps);
      saveToSupabase(DB_KEY_RELS, rels);
      setSaveMsg("Saved \u2713");
      const t = setTimeout(() => setSaveMsg(""), 2e3);
      return () => clearTimeout(t);
    }, [clients, opps, rels]);
    useEffect(() => {
      if (!dbLoaded) return;
      try {
        localStorage.setItem(DB_KEY_GOALS, JSON.stringify(teamGoals));
      } catch {
      }
      saveToSupabase(DB_KEY_GOALS, teamGoals);
    }, [teamGoals]);
    const updateTeamGoals = (goals) => setTeamGoals(goals);
    const exportData = () => {
      const data = { clients, opps, rels, teamGoals, exportedAt: (/* @__PURE__ */ new Date()).toISOString(), version: "v4" };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "CapillaryCS_data_" + (/* @__PURE__ */ new Date()).toISOString().split("T")[0] + ".json";
      a.click();
      URL.revokeObjectURL(url);
    };
    const importData = (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (ev) => {
        try {
          const data = JSON.parse(ev.target.result);
          if (data.clients) setClients(data.clients.map(sanitizeClient));
          if (data.opps) setOpps(data.opps.map(sanitizeOpp));
          if (data.rels) setRels(data.rels);
          if (data.teamGoals) setTeamGoals(data.teamGoals);
          setToast({ message: "Data imported successfully \u2713" });
        } catch (err) {
          setToast({ message: "Import failed \u2014 invalid file." });
        }
      };
      reader.readAsText(file);
      e.target.value = "";
    };
    const selectedClient = clients.find((c) => c.id === selectedClientId) || null;
    const selectedOpp = opps.find((o) => o.id === selectedOppId) || null;
    const oppClient = selectedOpp ? clients.find((c) => c.id === selectedOpp.clientId) : null;
    const goToClient = (id) => {
      setSelectedClientId(id);
      setView("clientDetail");
    };
    const goToOpp = (id, backView = "clientDetail") => {
      setSelectedOppId(id);
      setOppBackView(backView);
      setView("oppDetail");
    };
    const updateClient = (u) => setClients((prev) => prev.map((c) => c.id === u.id ? u : c));
    const updateOpp = (u) => setOpps((prev) => prev.map((o) => o.id === u.id ? u : o));
    const updateRels = (clientName, newContacts) => setRels((prev) => ({ ...prev, [clientName]: newContacts }));
    const addClient = (c) => setClients((prev) => [...prev, c]);
    const addOpp = (o) => setOpps((prev) => [...prev, o]);
    const archiveClient = (client, lastEngagement) => {
      const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
      updateClient({ ...client, archived: true, archivedDate: today, lastEngagement: lastEngagement || today });
      setArchiveModal(null);
      setToast({ message: `"${client.name}" archived.`, onUndo: () => {
        updateClient({ ...client, archived: false, archivedDate: null, lastEngagement: null });
        setToast(null);
      } });
      setView("clients");
      setSelectedClientId(null);
    };
    const unarchiveClient = (id) => {
      const c = clients.find((x) => x.id === id);
      if (!c) return;
      updateClient({ ...c, archived: false, archivedDate: null, lastEngagement: null });
      setToast({ message: `"${c.name}" restored to active.` });
    };
    const removeClient = (id, name) => {
      setConfirmData({
        message: `Permanently delete "${name}" and all their opportunities?`,
        confirmLabel: "Delete",
        confirmClass: "btn-danger",
        onConfirm: () => {
          const snapshot = clients;
          const oppSnapshot = opps;
          setClients((prev) => prev.filter((c) => c.id !== id));
          setOpps((prev) => prev.filter((o) => o.clientId !== id));
          setConfirmData(null);
          setView("clients");
          setSelectedClientId(null);
          setToast({ message: `"${name}" deleted.`, onUndo: () => {
            setClients(snapshot);
            setOpps(oppSnapshot);
            setToast(null);
          } });
        }
      });
    };
    const removeOpp = (id, name) => {
      setConfirmData({
        message: `Delete opportunity "${name}"?`,
        confirmLabel: "Delete",
        confirmClass: "btn-danger",
        onConfirm: () => {
          const snapshot = opps;
          setOpps((prev) => prev.filter((o) => o.id !== id));
          setConfirmData(null);
          setToast({ message: `"${name}" deleted.`, onUndo: () => {
            setOpps(snapshot);
            setToast(null);
          } });
        }
      });
    };
    const handleImportOpps = (newOpps) => {
      setOpps((prev) => [...prev, ...newOpps]);
      setSaveMsg("Imported \u2713");
    };
    const handleImportHealth = (updates) => {
      setClients((prev) => prev.map((c) => {
        if (!updates[c.id]) return c;
        return { ...c, healthHistory: { ...c.healthHistory, ...updates[c.id] } };
      }));
      setSaveMsg("Health updated \u2713");
    };
    const handleImportNPS = (updates) => {
      setClients((prev) => prev.map((c) => {
        if (!updates[c.id]) return c;
        return { ...c, ...updates[c.id] };
      }));
      setSaveMsg("NPS updated \u2713");
    };
    const sidebarResults = useMemo(() => {
      if (!sidebarSearch.trim()) return [];
      const q = sidebarSearch.toLowerCase();
      return clients.filter((c) => !c.archived && (c.name.toLowerCase().includes(q) || (c.execSponsor || "").toLowerCase().includes(q))).slice(0, 8);
    }, [clients, sidebarSearch]);
    const activeCount = clients.filter((c) => !c.archived).length;
    const archivedCount = clients.filter((c) => c.archived).length;
    const inspireCount = clients.filter((c) => c.platform === "inspire" && !c.archived).length;
    const capillaryCount = clients.filter((c) => c.platform === "capillary" && !c.archived).length;
    const inspireOppCount = opps.filter((o) => o.pipeline === "inspire").length;
    const capOppCount = opps.filter((o) => o.pipeline !== "inspire").length;
    const leadCount = [...new Set(clients.filter((c) => !c.archived).map((c) => c.execSponsor).filter(Boolean))].length;
    const nav = (id, label, icon, count, plat) => {
      const isActive = view === id && (plat === void 0 || platformFilter === plat);
      return /* @__PURE__ */ React.createElement(
        "div",
        {
          className: `nav-item ${isActive ? "active" : ""}`,
          onClick: () => {
            setView(id);
            if (plat !== void 0) setPlatformFilter(plat);
          }
        },
        /* @__PURE__ */ React.createElement("span", null, icon),
        /* @__PURE__ */ React.createElement("span", null, label),
        count != null && /* @__PURE__ */ React.createElement("span", { className: "ml-auto text-xs rounded-md px-1.5 py-0.5", style: { background: isActive ? "rgba(255,255,255,.25)" : "rgba(148,163,184,.15)", color: isActive ? "#fff" : "#94a3b8" } }, count)
      );
    };
    if (sbClient && !authReady) return /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", justifyContent: "center", minHeight: "100vh", background: "#0f172a", flexDirection: "column", gap: 16 } }, /* @__PURE__ */ React.createElement("div", { style: { width: 48, height: 48, border: "4px solid #334155", borderTopColor: "#6366f1", borderRadius: "50%", animation: "spin 0.8s linear infinite" } }), /* @__PURE__ */ React.createElement("div", { style: { color: "#94a3b8", fontSize: 14, fontFamily: "sans-serif" } }, "Checking authentication\u2026"));
    if (sbClient && authReady && !session) return /* @__PURE__ */ React.createElement(LoginScreen, { onSignIn: signIn });
    if (!dbLoaded) return /* @__PURE__ */ React.createElement("div", { style: { display: "flex", alignItems: "center", justifyContent: "center", minHeight: "100vh", background: "#0f172a", flexDirection: "column", gap: 16 } }, /* @__PURE__ */ React.createElement("div", { style: { width: 48, height: 48, border: "4px solid #334155", borderTopColor: "#6366f1", borderRadius: "50%", animation: "spin 0.8s linear infinite" } }), /* @__PURE__ */ React.createElement("div", { style: { color: "#94a3b8", fontSize: 14, fontFamily: "sans-serif" } }, "Loading from Supabase\u2026"));
    return /* @__PURE__ */ React.createElement(RoleCtx.Provider, { value: { role: userRole, canEdit, isAdmin } }, /* @__PURE__ */ React.createElement("div", { style: { display: "flex", minHeight: "100vh" } }, /* @__PURE__ */ React.createElement("div", { className: "sidebar", style: { width: 260 } }, /* @__PURE__ */ React.createElement("div", { className: "px-4 py-4 border-b border-slate-800" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2.5" }, /* @__PURE__ */ React.createElement("div", { className: "cap-logo-mark" }, /* @__PURE__ */ React.createElement("img", { src: "data:image/png;base64,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", alt: "Capillary", style: { height: "32px", width: "auto" } })), /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-white font-bold text-sm leading-tight" }, "Capillary"), /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold", style: { color: "#4fa3d1" } }, "Client Success"))), /* @__PURE__ */ React.createElement("div", { className: "text-slate-600 text-xs mt-2" }, "FY26 \xB7 Americas")), /* @__PURE__ */ React.createElement("div", { className: "px-3 pt-3 pb-1 relative" }, /* @__PURE__ */ React.createElement("div", { className: "relative" }, /* @__PURE__ */ React.createElement("span", { className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-xs" }, "\u{1F50D}"), /* @__PURE__ */ React.createElement(
      "input",
      {
        type: "search",
        value: sidebarSearch,
        onChange: (e) => setSidebarSearch(e.target.value),
        placeholder: "Find a client\u2026",
        className: "w-full bg-slate-800 text-slate-200 text-xs rounded-xl pl-8 pr-3 py-2 focus:outline-none focus:ring-1 border border-slate-700 placeholder-slate-600",
        style: { "--tw-ring-color": "#2080BD" }
      }
    )), sidebarResults.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "absolute left-3 right-3 bg-slate-800 border border-slate-700 rounded-xl mt-1 z-50 shadow-xl overflow-hidden", style: { top: "100%" } }, sidebarResults.map((c) => /* @__PURE__ */ React.createElement(
      "div",
      {
        key: c.id,
        className: "flex items-center gap-2 px-3 py-2.5 cursor-pointer hover:bg-slate-700 transition-colors",
        onClick: () => {
          goToClient(c.id);
          setSidebarSearch("");
        }
      },
      /* @__PURE__ */ React.createElement(HealthDot, { health: getCurrentHealth(c), size: 20 }),
      /* @__PURE__ */ React.createElement("div", { className: "flex-1 min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-white text-xs font-medium truncate" }, c.name), /* @__PURE__ */ React.createElement("div", { className: "text-slate-400 text-xs" }, c.platform === "inspire" ? "\u2726 Inspire" : "\u25C8 Capillary"))
    )))), /* @__PURE__ */ React.createElement("div", { className: "px-3 flex-1 overflow-y-auto pb-4 mt-2", style: { scrollbarWidth: "none" } }, /* @__PURE__ */ React.createElement("div", { className: "nav-section" }, "Main"), nav("home", "Overview", "\u{1F3E0}"), nav("clients", "All Clients", "\u{1F465}", activeCount, "all"), nav("allOpps", "All Opportunities", "\u{1F4BC}"), nav("nps", "NPS Overview", "\u{1F4CA}"), nav("goals", "Farming Goals", "\u{1F3AF}"), nav("whitespace", "Expansion Opps", "\u{1F680}"), nav("renewals", "Renewals", "\u{1F4C5}", (() => {
      const active = clients.filter((c) => !c.archived);
      return active.filter((c) => renewalUrgency(c.nextRenewal) === "overdue" || renewalUrgency(c.nextRenewal) === "critical").length || void 0;
    })()), /* @__PURE__ */ React.createElement("div", { className: "nav-section" }, "Account Leads"), nav("accountLeads", "Lead Boards", "\u{1F464}", leadCount), canEdit && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("div", { className: "nav-section" }, "Actions"), /* @__PURE__ */ React.createElement("div", { className: "nav-item", onClick: () => setModal("addClient") }, /* @__PURE__ */ React.createElement("span", null, "\u2795"), /* @__PURE__ */ React.createElement("span", null, "Add Client")), /* @__PURE__ */ React.createElement("div", { className: "nav-item", onClick: () => setModal("addOpp") }, /* @__PURE__ */ React.createElement("span", null, "\u{1F4CB}"), /* @__PURE__ */ React.createElement("span", null, "Add Opportunity")), /* @__PURE__ */ React.createElement("div", { className: "nav-item", onClick: () => setModal("import") }, /* @__PURE__ */ React.createElement("span", null, "\u{1F4C2}"), /* @__PURE__ */ React.createElement("span", null, "Import Excel"))), isAdmin && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("div", { className: "nav-section" }, "Admin"), nav("admin", "User Management", "\u{1F510}")), /* @__PURE__ */ React.createElement("div", { className: "nav-section" }, "Archive"), nav("archived", "Archived Clients", "\u{1F4E6}", archivedCount || void 0)), /* @__PURE__ */ React.createElement("div", { className: "px-4 py-3 border-t border-slate-800 space-y-2" }, session && /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between gap-2 mb-1" }, /* @__PURE__ */ React.createElement("div", { className: "flex items-center gap-2 min-w-0" }, ((_b = (_a = session.user) == null ? void 0 : _a.user_metadata) == null ? void 0 : _b.avatar_url) ? /* @__PURE__ */ React.createElement("img", { src: session.user.user_metadata.avatar_url, alt: "", style: { width: 24, height: 24, borderRadius: "50%", flexShrink: 0 } }) : /* @__PURE__ */ React.createElement("div", { style: { width: 24, height: 24, borderRadius: "50%", background: "#6366f1", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 11, fontWeight: 700, color: "#fff", flexShrink: 0 } }, (((_d = (_c = session.user) == null ? void 0 : _c.user_metadata) == null ? void 0 : _d.name) || ((_e = session.user) == null ? void 0 : _e.email) || "?")[0].toUpperCase()), /* @__PURE__ */ React.createElement("div", { className: "min-w-0" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-slate-400 truncate" }, ((_g = (_f = session.user) == null ? void 0 : _f.user_metadata) == null ? void 0 : _g.name) || ((_h = session.user) == null ? void 0 : _h.email)), /* @__PURE__ */ React.createElement("div", { className: "text-xs font-semibold", style: { color: userRole === "admin" ? "#a78bfa" : userRole === "write" ? "#60a5fa" : "#94a3b8" } }, userRole === "admin" ? "Admin" : userRole === "write" ? "Write Access" : "View Only"))), /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: signOut,
        title: "Sign out",
        className: "text-xs text-slate-500 hover:text-red-400 transition-colors shrink-0 font-semibold"
      },
      "Sign out"
    )), /* @__PURE__ */ React.createElement("div", { className: "flex items-center justify-between" }, /* @__PURE__ */ React.createElement("div", { className: "text-xs text-slate-600" }, "\xA9 Capillary Technologies"), saveMsg && /* @__PURE__ */ React.createElement("div", { className: "text-xs text-green-500 font-semibold" }, saveMsg)), /* @__PURE__ */ React.createElement("div", { className: "flex gap-2" }, /* @__PURE__ */ React.createElement(
      "button",
      {
        onClick: exportData,
        className: "flex-1 text-xs py-1.5 rounded-lg font-semibold text-center transition-all",
        style: { background: "#1e3a5f", color: "#7dd3fc", border: "1px solid #2563eb" },
        title: "Download all your data as a JSON file to share or back up"
      },
      "\u2B07 Export Data"
    ), canEdit && /* @__PURE__ */ React.createElement(
      "label",
      {
        className: "flex-1 text-xs py-1.5 rounded-lg font-semibold text-center cursor-pointer transition-all",
        style: { background: "#1e3a5f", color: "#86efac", border: "1px solid #16a34a" },
        title: "Load a previously exported data file"
      },
      "\u2B06 Import Data",
      /* @__PURE__ */ React.createElement("input", { type: "file", accept: ".json", className: "hidden", onChange: importData })
    )))), /* @__PURE__ */ React.createElement("div", { className: "main flex-1 overflow-y-auto" }, view === "home" && /* @__PURE__ */ React.createElement(HomeView, { clients, opps, onSelectClient: goToClient, platformFilter, onSetPlatformFilter: setPlatformFilter, onGoToRenewals: () => setView("renewals"), teamGoals, onGoToGoals: () => setView("goals"), onGoToWhitespace: () => setView("whitespace") }), view === "clients" && /* @__PURE__ */ React.createElement(ClientsView, { clients, opps, onSelectClient: goToClient, platformFilter, onSetPlatformFilter: setPlatformFilter }), view === "allOpps" && /* @__PURE__ */ React.createElement(AllOppsView, { clients, opps, onSelectClient: goToClient, onSelectOpp: (id) => goToOpp(id, "allOpps"), onUpdateOpp: updateOpp }), view === "nps" && /* @__PURE__ */ React.createElement(NPSErrorBoundary, null, /* @__PURE__ */ React.createElement(NPSView, { clients, onSelectClient: goToClient, onUpdateClient: updateClient, platformFilter, onSetPlatformFilter: setPlatformFilter })), view === "goals" && /* @__PURE__ */ React.createElement(GoalsView, { clients, opps, onSelectClient: goToClient, onUpdateClient: updateClient, platformFilter, onSetPlatformFilter: setPlatformFilter, teamGoals, onUpdateTeamGoals: updateTeamGoals }), view === "renewals" && /* @__PURE__ */ React.createElement(RenewalsView, { clients, onSelectClient: goToClient }), view === "whitespace" && /* @__PURE__ */ React.createElement(WhitespaceView, { clients, onSelectClient: goToClient, onUpdateClient: updateClient }), view === "accountLeads" && /* @__PURE__ */ React.createElement(AccountLeadView, { clients, opps, onSelectClient: goToClient }), view === "admin" && isAdmin && /* @__PURE__ */ React.createElement(AdminView, { currentUserEmail: (_i = session == null ? void 0 : session.user) == null ? void 0 : _i.email }), view === "archived" && /* @__PURE__ */ React.createElement(ArchivedView, { clients, onSelectClient: goToClient, onUnarchive: unarchiveClient }), view === "clientDetail" && selectedClient && /* @__PURE__ */ React.createElement(
      ClientDetailView,
      {
        client: selectedClient,
        opps,
        rels,
        onBack: () => {
          setView("clients");
          setSelectedClientId(null);
        },
        onUpdateClient: updateClient,
        onUpdateRels: updateRels,
        onSelectOpp: goToOpp,
        onAddOpp: () => setModal("addOpp"),
        onRemoveOpp: removeOpp,
        onArchive: () => {
          if (selectedClient.archived) {
            unarchiveClient(selectedClient.id);
          } else {
            setArchiveModal(selectedClient);
          }
        }
      }
    ), view === "oppDetail" && selectedOpp && /* @__PURE__ */ React.createElement(OppDetailView, { opp: selectedOpp, client: oppClient, backView: oppBackView, onBack: () => {
      setView(oppBackView);
      setSelectedOppId(null);
    }, onUpdateOpp: updateOpp })), modal === "addClient" && /* @__PURE__ */ React.createElement(AddClientModal, { onAdd: (c) => {
      addClient(c);
      setModal(null);
    }, onClose: () => setModal(null) }), modal === "addOpp" && /* @__PURE__ */ React.createElement(AddOppModal, { clients, defaultClientId: selectedClientId, onAdd: (o) => {
      addOpp(o);
      setModal(null);
    }, onClose: () => setModal(null) }), modal === "import" && /* @__PURE__ */ React.createElement(ImportModal, { clients, onImportOpps: handleImportOpps, onImportHealth: handleImportHealth, onImportNPS: handleImportNPS, onClose: () => setModal(null) }), archiveModal && /* @__PURE__ */ React.createElement(ArchiveModal, { client: archiveModal, onConfirm: (le) => archiveClient(archiveModal, le), onCancel: () => setArchiveModal(null) }), confirmData && /* @__PURE__ */ React.createElement("div", { className: "fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" }, /* @__PURE__ */ React.createElement("div", { className: "bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6 text-center" }, /* @__PURE__ */ React.createElement("div", { className: "text-4xl mb-3" }, "\u{1F5D1}\uFE0F"), /* @__PURE__ */ React.createElement("p", { className: "text-gray-800 font-semibold mb-5" }, confirmData.message), /* @__PURE__ */ React.createElement("div", { className: "flex gap-3" }, /* @__PURE__ */ React.createElement("button", { onClick: () => setConfirmData(null), className: "btn-secondary flex-1 py-2.5" }, "Cancel"), /* @__PURE__ */ React.createElement("button", { onClick: confirmData.onConfirm, className: "flex-1 py-2.5 rounded-xl font-semibold text-sm text-white", style: { background: "#ef4444" } }, confirmData.confirmLabel || "Delete")))), toast && /* @__PURE__ */ React.createElement(Toast, { message: toast.message, onUndo: toast.onUndo, onDismiss: () => setToast(null) })));
  }
  try {
    const rootEl = document.getElementById("root");
    ReactDOM.render(/* @__PURE__ */ React.createElement(ErrorBoundary, null, /* @__PURE__ */ React.createElement(App, null)), rootEl);
  } catch (e) {
    document.getElementById("root").innerHTML = '<div style="padding:40px;color:#ef4444;font-family:sans-serif;"><h2>\u26A0 Dashboard failed to load</h2><pre style="font-size:12px;white-space:pre-wrap;">' + e.toString() + "</pre></div>";
  } finally {
    var ld = document.getElementById("loading");
    if (ld) ld.style.display = "none";
  }
})();

</script>
</body>
</html>